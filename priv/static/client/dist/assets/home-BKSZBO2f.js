import{b as u,N as h,j as t,aV as G,r as I,bp as U,fM as Q,S as s,T as x,k as V,f as Y,m as q,fc as $,fb as X,fN as Z,c3 as J,f9 as tt,fO as et,fP as ot,fQ as rt,i as b,fR as it,c_ as st,d as nt,h as at,cO as mt,az as lt,fS as ct}from"./index-Du6cLc2g.js";import{M as pt}from"./MaintenanceAnnouncement-sOrv1EwO.js";import{O as dt}from"./OldDeletedItemsNotice-CiA78Ptl.js";import{u as ut}from"./useLocalStorage-DuUvOJRe.js";import{A as E}from"./Alert-CbKF_a_e.js";import{T as ht}from"./Trans-EtLtbqsJ.js";import{C as xt}from"./CardActionArea-DIOO8dgr.js";import{I as ft}from"./ItemIcon-CVFe5RC4.js";import{g as jt}from"./mimeTypes-Bpmm_hmI.js";import{g as gt,B as It,C as Ct,M as St,e as kt,f as Mt,R as yt,b as Et,d as w,S as Ot,c as Bt,I as wt,u as vt}from"./useSorting-Cri5MYK5.js";import{C as _}from"./Card-CdGogg3Y.js";import{B as C}from"./Box-6qYIb0IB.js";import{f as T}from"./date-BPVbmzn6.js";import{B as At}from"./Badge-BxSVnORh.js";import{C as bt}from"./CardContent-BpfyQ-_k.js";import{I as _t}from"./IconButton-DGQNRfUk.js";import{X as Tt}from"./x-BHbqH91-.js";import{B as j}from"./Button-BZonE8EM.js";import{C as Rt}from"./check-BjKssNkE.js";import{P as Dt}from"./pen-Lz7yweGr.js";import{G as M}from"./Grid-C2qF_7LL.js";import{S as Nt}from"./Skeleton-DL17Y8WH.js";import{u as g}from"./index-8QNzrxwJ.js";import{v as Lt}from"./v4-CEEIItsa.js";import{u as R,F as Pt}from"./FilterItemsContext-BUWSAJ79.js";import{N as y,a as Ft}from"./NoItemFilters-Cq-dg_2X.js";import{u as O,S as Kt,b as zt,D as Wt,a as Ht}from"./SelectionToolbar-CP-gJCdn.js";import{F as Gt}from"./FolderCreateForm-DPsieq4K.js";import{L as Ut}from"./LoadingScreen-B0vs5053.js";import{B as Qt}from"./langs-BKRoRoQy.js";import{C as Vt}from"./ThumbnailCrop-iU1PYi3L.js";import{u as v}from"./useModalStatus-Deyvcg1U.js";import{D as Yt}from"./Divider-CoTlx057.js";import"./langs-DUiJXdIq.js";import"./normalizeDates-Bl5IZJGD.js";import"./toDate-BXq0HhWu.js";import"./Collapse-CnjxOpna.js";import"./utils-TS7gOHXB.js";import"./ButtonBase-CdsCMxD3.js";import"./isFocusVisible-B8k4qzLc.js";import"./AlertTitle-Bdf1oZJW.js";import"./format-Cv4mH62M.js";import"./differenceInCalendarDays-DiZ3ZI30.js";import"./getTimezoneOffsetInMilliseconds-CkMJBntH.js";import"./useSlot-Jtq-mfHw.js";import"./createSvgIcon-DpKUgtm0.js";import"./Paper-B8YcVVca.js";import"./StyledBaseComponents-CGx14SPL.js";import"./link-t0gZlfUa.js";import"./text-align-start-B7PT5KlE.js";import"./fileItem-Bbp5pYua.js";import"./itemType-D9KQEJss.js";import"./FormControl-BpWV3VDf.js";import"./isMuiElement-BOwKGjxf.js";import"./TextField-HOePLdCm.js";import"./Modal-CVujTFOw.js";import"./createChainedFunction-BO_9K8Jh.js";import"./Popover-DKSgKXB-.js";import"./Grow-DtN_YV5L.js";import"./Menu-BWxVMNIi.js";import"./List-BxElNHcx.js";import"./listItemTextClasses-D6I-qz9g.js";import"./useControlled-B5xzdI43.js";import"./MenuItem-BDQospWL.js";import"./dividerClasses-bGF6_inT.js";import"./Checkbox-zg_kSEbu.js";import"./SwitchBase-DRi_6CGV.js";import"./ListItemText-DtIE91_b.js";import"./InputAdornment-19J4ELs1.js";import"./LinkTypeFormControl-DEWxmDYc.js";import"./index.esm-ByZbOMQw.js";import"./Clear-BjI9AlL3.js";import"./LinkUrlField-Dv3sfJld.js";import"./Thumbnail--Tilnabo.js";import"./external-link-BbK42ISd.js";import"./withResizing-9DMApuwO.js";import"./AccordionSummary-4HQnX5ST.js";import"./chevron-down-DS52ak5B.js";import"./TextDisplay-D01g4AZQ.js";import"./alignment-FBy0_b-y.js";import"./index-Chjiymov.js";import"./constants-CyQbYbhY.js";import"./linkItem-VVVu8jA7.js";import"./Link-DghQZPZy.js";import"./item-dXKRHMD1.js";import"./TextEditor-puUzdNHQ.js";import"./isEqual-CJ8LbfeT.js";import"./Tabs-CImzAR51.js";import"./useThemeProps-DtP0foFg.js";import"./RadioGroup-BK_Mg-zB.js";import"./FormControlLabel-Ck-LB9EX.js";import"./Switch-DI0rrL6B.js";import"./ItemSettingProperty-CRpcSL8X.js";import"./Button-D6pY2JNh.js";import"./uploadWithProgress-B5eF6DUZ.js";import"./LibraryIcon-Ce6_jpZ3.js";import"./Avatar-BsacKTQe.js";import"./eye-off-D-8o9_aZ.js";import"./pin-BudRUfMl.js";import"./Tooltip-CkGlpyEO.js";import"./useLocation-yoai5t4G.js";import"./CustomLink-C-uYfSDk.js";import"./capsule-ocBuEWIN.js";import"./LayoutContext-DaU0037A.js";import"./PinButton-DM6PbfsR.js";import"./ListItemIcon-B3CKIE52.js";import"./ItemCard-DGgWBVL4.js";import"./EditButton-C70EIHqU.js";import"./index-RERcJu9w.js";import"./Breadcrumbs-B-53bV0w.js";import"./CancelButton-D_f8GGBm.js";import"./CircularProgress-CnPELIce.js";import"./DialogContent-BVO65bHL.js";import"./DialogTitle-DnHtd1CR.js";import"./DialogActions-hH_AKLy2.js";import"./FlagItemModalContext-B0K0Erjf.js";import"./ListItemButton-TZ0nPx2E.js";import"./listItemButtonClasses-DxNRX85C.js";import"./eye-ByKgq0Tl.js";import"./trash-Srs7zO-j.js";import"./MenuItemLink-BCqfpz1w.js";import"./settings-BrKPuy4i.js";import"./download-Cr-ydt7j.js";import"./permissionLevel-BOsSKewz.js";import"./differenceInMinutes-BbWlujZi.js";import"./differenceInSeconds-DNsH8fUT.js";import"./differenceInCalendarMonths-C8dGLoK4.js";import"./usePreviousProps-zyP3vJcr.js";import"./stringify-D92ucQ0I.js";import"./circle-question-mark-4vLz0IMx.js";import"./CropModal-C_dADBxf.js";import"./DialogContentText-DUgZTVZ1.js";import"./trash-2-B7nze1WX.js";function qt(){const{t:e}=u(h.Home),{value:r,changeValue:o}=ut("user-survey-2025-closed",!1);return r?null:t.jsx(E,{severity:"info",onClose:()=>{o(!0)},children:t.jsx(ht,{t:e,i18nKey:"SURVEY.INFO",components:{l1:t.jsx("a",{href:"https://docs.google.com/forms/d/e/1FAIpQLScSSD8oPlpvLvX1YPDfvfDGQzV7zqqPoSEhkItIZ8pIAPCpTw/viewform?usp=preview",children:"here"})}})})}const $t=I.forwardRef((e,r)=>{const{onClick:o,...i}=e;return t.jsx(xt,{component:"a",ref:r,onClick:o,...i})}),Xt=G($t),Zt=e=>t.jsx(Xt,{preload:"intent",...e}),D=({item:e,size:r=U.Medium})=>{const o=e.thumbnails?.[r];return t.jsx(ft,{type:e.type,mimetype:jt(e.extra),alt:e.name,iconSrc:o})};function Jt({item:e}){const{i18n:r}=u(h.Player),o=e.type==="shortcut"?gt(e.extra)?.target:e.id;return t.jsx(_,{sx:{height:"100%"},id:Q(e.id),children:t.jsx(s,{direction:"row",alignItems:"stretch",justifyContent:"space-between",width:"100%",height:"100%",children:t.jsx(Zt,{id:`bookmarkCardAction-${e.id}`,to:"/builder/items/$itemId",params:{itemId:o},onClick:()=>{window.umami.track("bookmark-card")},sx:{minWidth:0,width:"100%",flex:1,display:"flex",alignItems:"center",padding:2},children:t.jsxs(s,{direction:"row",spacing:2,width:"100%",minWidth:0,children:[t.jsx(C,{display:"flex",justifyContent:"center",alignItems:"center",flexShrink:0,children:t.jsx(D,{item:e})}),t.jsxs(s,{minWidth:0,children:[t.jsx(x,{variant:"h5",component:"h2",alignItems:"center",textOverflow:"ellipsis",overflow:"hidden",noWrap:!0,children:e.name}),t.jsx(x,{variant:"body2",color:"text.secondary",children:T(e.updatedAt,{locale:r.language})})]})]})})})})}function te({item:e}){const r=V(),{i18n:o}=u(),{color:i}=Y("error"),{t:a}=u(h.Common,{keyPrefix:"ARIA"}),{mutate:l}=q({...$(),onSettled:()=>{r.invalidateQueries({queryKey:X()})}});return t.jsx(At,{className:Z(e.id),sx:{width:"100%"},badgeContent:t.jsx(_t,{"aria-label":a("REMOVE_BOOKMARK"),onClick:()=>{l({path:{itemId:e.id}})},children:t.jsx(Tt,{color:i})}),children:t.jsx(_,{sx:{height:"100%",width:"100%"},id:`bookmark-${e.id}`,children:t.jsx(bt,{id:`bookmarkCardAction-${e.id}`,children:t.jsxs(s,{direction:"row",alignItems:"stretch",width:"100%",height:"100%",gap:1,children:[t.jsx(C,{display:"flex",justifyContent:"center",alignItems:"center",flexShrink:0,children:t.jsx(D,{item:e})}),t.jsxs(s,{minWidth:0,children:[t.jsx(x,{variant:"h5",component:"h2",alignItems:"center",textOverflow:"ellipsis",overflow:"hidden",noWrap:!0,children:e.name}),t.jsx(x,{variant:"body2",color:"text.secondary",children:T(e.updatedAt,{locale:o.language})})]})]})})})})}const A=({children:e})=>t.jsx(M,{size:{xs:12,sm:4,md:3,xl:2},children:e}),ee=Array(6).map(()=>({id:Lt()})),oe=()=>{const e=b(),r=g(e.breakpoints.up("xl")),o=g(e.breakpoints.up("md")),i=g(e.breakpoints.up("sm"));return r?24:o?12:i?6:4};function re(){const{t:e}=u(h.Home,{keyPrefix:"BOOKMARKED_ITEMS"}),{data:r,isPending:o,isError:i}=J(tt()),[a,l]=I.useState(!1),[m,c]=I.useState(!1),p=oe();if(r?.length){const d=a?r:r.slice(0,p);return t.jsxs(t.Fragment,{children:[t.jsxs(s,{direction:"row",justifyContent:"space-between",children:[t.jsxs(s,{direction:"row",gap:1,alignItems:"center",children:[t.jsx(It,{}),t.jsx(x,{variant:"h3",children:e("TITLE")})]}),m?t.jsx(j,{size:"small",startIcon:t.jsx(Rt,{size:16}),onClick:()=>c(!1),children:e("DONE_BUTTON")}):t.jsx(j,{size:"small",startIcon:t.jsx(Dt,{size:16}),onClick:()=>c(!0),id:et,children:e("MANAGE_BUTTON")})]}),t.jsx(M,{id:ot,width:"100%",container:!0,spacing:2,justifyItems:"center",children:d.map(({item:n})=>t.jsx(A,{children:m?t.jsx(te,{item:n},n.id):t.jsx(Jt,{item:n},n.id)},n.id))}),p<r.length?t.jsx(j,{onClick:()=>l(n=>!n),children:e(a?"SHOW_LESS":"SHOW_MORE")}):null]})}return o?t.jsx(M,{width:"100%",container:!0,spacing:2,justifyItems:"center",children:ee.map(({id:d})=>t.jsx(A,{children:t.jsx(Nt,{variant:"rounded",animation:"wave",width:"100%",height:"75px"})},d))}):i?t.jsx(E,{id:rt,severity:"error",children:e("ERROR_MESSAGE")}):null}const ie=({onClick:e,enabled:r=!1})=>{const{t:o}=u(h.Builder);return t.jsx(Vt,{color:"primary",onClick:()=>{e?.(!r)},variant:r?"filled":"outlined",sx:{fontSize:"1rem",maxWidth:"max-content"},id:it,label:o(Qt.HOME_SHOW_ONLY_CREATED_BY_ME),component:"button","data-umami-event":"filter-created-by-me"})},se=({items:e})=>{const{selectedIds:r,clearSelection:o}=O(),i=e?.filter(({id:n})=>r.includes(n)),{isOpen:a,openModal:l,closeModal:m}=v(),{isOpen:c,openModal:p,closeModal:d}=v();return t.jsxs(t.Fragment,{children:[t.jsx(Ct,{onClose:()=>{m(),o()},open:a,items:i}),t.jsx(St,{onClose:()=>{d(),o()},open:c,items:i}),t.jsx(Kt,{children:t.jsxs(t.Fragment,{children:[t.jsx(kt,{onClick:p}),t.jsx(Mt,{onClick:l}),t.jsx(yt,{onClick:o,color:"primary",itemIds:r})]})})]})},N="home-items-container";function ne({searchText:e}){const{t:r}=u(h.Builder),{t:o}=u(h.Enums),[i,a]=I.useState(!1),{selectedIds:l}=O(),{sortBy:m,setSortBy:c,ordering:p,setOrdering:d}=Et({sortBy:w.ItemUpdatedAt,ordering:st.DESC}),{user:n}=nt(),{itemTypes:L}=R(),{data:f,fetchNextPage:P,isLoading:F,isFetching:B,hasNextPage:K}=at.useInfiniteAccessibleItems({creatorId:i?n?.id:void 0,sortBy:m,ordering:p,types:L,keywords:e},{pageSize:mt}),z=zt({containerId:N}),W=S=>{a(S)};if(f?.pages?.length){const S=Object.values(w).sort((k,H)=>o(k).localeCompare(o(H)));return t.jsxs(t.Fragment,{children:[z,t.jsxs(s,{alignItems:"space-between",direction:"column",mt:2,gap:1,width:"100%",children:[t.jsx(s,{spacing:1,children:t.jsx(ie,{onClick:W,enabled:i})}),l.length?t.jsx(se,{items:f.pages.flatMap(({data:k})=>k)}):t.jsxs(s,{spacing:1,direction:"row",justifyContent:"space-between",alignItems:"center",children:[t.jsx(Ot,{}),t.jsx(s,{direction:"row",gap:1,children:m&&c&&t.jsx(Bt,{sortBy:m,setSortBy:c,ordering:p,setOrdering:d,options:S})})]})]}),t.jsxs(s,{height:"100%",children:[t.jsx(ae,{data:f,isFetching:B,fetchNextPage:P,searchText:e,hasNextPage:K}),f&&B&&t.jsx(C,{sx:{width:"100%"},children:t.jsx(lt,{})})]})]})}return F?t.jsx(Ut,{chipsPlaceholder:!0}):t.jsx(E,{severity:"error",children:r("ERROR_MESSAGE")})}function ae({data:e,fetchNextPage:r,searchText:o,hasNextPage:i,isFetching:a}){const{t:l}=u(h.Builder),{itemTypes:m}=R(),{selectedIds:c,toggleSelection:p,clearSelection:d}=O();return e.pages[0].data.length?t.jsxs(Wt,{id:N,children:[t.jsx(wt,{canMove:!o,id:ct,items:e.pages.flatMap(({data:n})=>n),enableMoveInBetween:!1,onCardClick:p,selectedIds:c,onMove:d}),i&&t.jsx(s,{textAlign:"center",alignItems:"center",children:t.jsx(j,{variant:"outlined",onClick:r,role:"feed",loading:a,children:l("HOME_SCREEN_LOAD_MORE_BUTTON")})}),!i&&t.jsx(s,{alignItems:"center",mb:2,children:t.jsx(y,{type:"icon"})})]}):m.length||o?t.jsx(Ft,{searchText:o}):t.jsx(C,{mt:2,children:t.jsx(Gt,{buttons:t.jsx(y,{size:"small"})})})}function Rr(){const e=b(),r=g(e.breakpoints.up("md")),o=vt();return t.jsxs(t.Fragment,{children:[t.jsx(pt,{suffix:"home"}),t.jsx(qt,{}),t.jsx(dt,{}),t.jsx(re,{}),t.jsx(Yt,{flexItem:!0}),t.jsxs(Ht,{children:[t.jsxs(s,{direction:"row",alignItems:"center",justifyContent:"flex-end",spacing:1,children:[o.input,t.jsx(y,{type:r?"button":"icon"})]}),t.jsx(Pt,{children:t.jsx(ne,{searchText:o.text})})]})]})}export{Rr as component};
