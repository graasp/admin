import{r as e,j as E,C as d,f3 as P,h as A}from"./index-Du6cLc2g.js";import{A as c,a as T,D as m}from"./constants-DnfdrTfa.js";const U={view:c.Builder,setView:()=>{}},b=a=>Object.values(c).includes(a),v=e.createContext(U),_=({children:a})=>{const[t,s]=e.useState(c.Builder),o=e.useMemo(()=>({view:t,setView:n=>{b(n)&&s(n)}}),[t,s]);return E.jsx(v.Provider,{value:o,children:a})},C={selectedUsers:[],itemChildren:[],setSelectedUsers:()=>{},setSelectedActionTypes:()=>{},selectedActionTypes:[],error:!1,isLoading:!0,requestedSampleSize:m,descendantApps:[],dateRange:{startDate:T(new Date,-30),endDate:new Date,key:"selection"},setDateRange:()=>{},itemId:void 0},j=e.createContext(C),k=({children:a,itemId:t})=>{const[s,o]=e.useState({[d.Builder]:!1,[d.Player]:!1,[d.Library]:!1}),[n,V]=e.useState([]),[l,g]=e.useState([]),[u,L]=e.useState(!1),{view:i}=e.useContext(v),[p,R]=e.useState(C.dateRange),f=m,{data:D=[]}=P({id:t||"",types:["app"],showHidden:!1}),{data:r,isError:S,isLoading:w}=A.useItem(t),{data:x}=A.useChildren(t,void 0,{enabled:r?.type==="folder"}),y=r?.type==="app"?[r,...D]:D;e.useEffect(()=>{S&&L(!0)},[S]),e.useEffect(()=>{s[i]||o({...s,[i]:!0})},[i,s]);const h=e.useMemo(()=>({selectedUsers:n,setSelectedUsers:V,selectedActionTypes:l,setSelectedActionTypes:g,error:u,itemData:r,itemChildren:x,isLoading:w,requestedSampleSize:f,descendantApps:y,dateRange:p,setDateRange:R,itemId:t}),[u,n,l,r,w,x,f,y,p,t]);return E.jsx(j.Provider,{value:h,children:a})};export{j as D,_ as V,k as a};
