import{b as a,N as l,j as t,S as u,G as j,d as x,l as g,A as f,r as O,i as v,f as _,k as A,m as T,n as E,o as y,y as R,p as k,L as S,q as P,t as I,T as b,D as G,O as N}from"./index-Du6cLc2g.js";import{F as U}from"./Footer-Dx1uEG7F.js";import{B as m}from"./ButtonLink-rFd5ZjYd.js";import{M as h}from"./MenuItemLink-BCqfpz1w.js";import{I as D}from"./IconButton-DGQNRfUk.js";import{M as W}from"./menu-HfQQ_gVI.js";import{M as F}from"./Menu-BWxVMNIi.js";import{D as V}from"./Divider-CoTlx057.js";import{L as $}from"./LanguageSwitch-DF2Cbktt.js";import{u as M}from"./index-8QNzrxwJ.js";import"./icons-CdeAQmLZ.js";import"./Box-6qYIb0IB.js";import"./external-link-BbK42ISd.js";import"./Link-DghQZPZy.js";import"./isFocusVisible-B8k4qzLc.js";import"./Button-BZonE8EM.js";import"./ButtonBase-CdsCMxD3.js";import"./CircularProgress-CnPELIce.js";import"./MenuItem-BDQospWL.js";import"./listItemTextClasses-D6I-qz9g.js";import"./dividerClasses-bGF6_inT.js";import"./useSlot-Jtq-mfHw.js";import"./Grow-DtN_YV5L.js";import"./utils-TS7gOHXB.js";import"./Modal-CVujTFOw.js";import"./createChainedFunction-BO_9K8Jh.js";import"./Popover-DKSgKXB-.js";import"./Paper-B8YcVVca.js";import"./List-BxElNHcx.js";import"./langs-DUiJXdIq.js";import"./normalizeDates-Bl5IZJGD.js";import"./toDate-BXq0HhWu.js";import"./chevron-down-DS52ak5B.js";function q(){const{t:e}=a(l.Landing,{keyPrefix:"NAVBAR"});return t.jsxs(u,{direction:"row",gap:2,children:[t.jsx(m,{activeProps:()=>({fontWeight:"bold"}),to:"/features",children:e("FEATURES")}),t.jsx(m,{activeProps:()=>({fontWeight:"bold"}),to:"/support",children:e("GETTING_STARTED")}),t.jsx(m,{activeProps:()=>({fontWeight:"bold"}),to:j,children:e("LIBRARY")}),t.jsx(m,{activeProps:()=>({fontWeight:"bold"}),to:"/about-us",children:e("ABOUT_US")})]})}const L=()=>{const{t:e}=a(l.Common),{t:i}=a(l.Landing),{isAuthenticated:o,user:n}=x();return o?o?n.type===f.Individual?[g({to:"/home",event:"go-to-graasp-button",label:i("NAV.GO_TO_GRAASP"),params:{},highlight:!0})]:[g({to:"/player/$rootId/$itemId",params:{rootId:n.item.id,itemId:n.item.id},event:"go-to-item-button",label:i("NAV.GO_TO_ITEM",{name:n.item.name}),highlight:!0})]:[]:[g({to:"/auth/login",event:"login-button",label:e("LOG_IN.BUTTON_TEXT"),params:{},highlight:!1}),g({to:"/auth/register",event:"register-button",label:e("REGISTER.BUTTON_TEXT"),params:{},highlight:!0})]};function z({handleClose:e}){return L().map(o=>t.jsx(h,{to:o.to,params:o.params,onClick:e,dataUmamiEvent:`menu-${o.event}`,sx:o.highlight?{fontWeight:"bold",color:"primary.main"}:void 0,children:o.label},o.event))}function H(){const{t:e}=a(l.Landing,{keyPrefix:"NAVBAR"}),[i,o]=O.useState(null),n=!!i,p=c=>{o(c.currentTarget)},s=()=>{o(null)};return t.jsxs("div",{children:[t.jsx(D,{id:"landing-mobile-menu","aria-controls":n?"demo-positioned-menu":void 0,"aria-haspopup":"true","aria-expanded":n?"true":void 0,onClick:p,children:t.jsx(W,{})}),t.jsxs(F,{"aria-labelledby":"landing-mobile-menu",anchorEl:i,open:n,onClose:s,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},children:[t.jsx(h,{activeProps:()=>({selected:!0}),to:"/",onClick:s,children:e("HOME")}),t.jsx(h,{activeProps:()=>({selected:!0}),to:"/features",onClick:s,children:e("FEATURES")}),t.jsx(h,{activeProps:()=>({selected:!0}),to:"/support",onClick:s,children:e("GETTING_STARTED")}),t.jsx(h,{activeProps:()=>({selected:!0}),to:j,onClick:s,children:e("LIBRARY")}),t.jsx(h,{activeProps:()=>({selected:!0}),to:"/about-us",onClick:s,children:e("ABOUT_US")}),t.jsx(V,{}),t.jsx(z,{handleClose:s})]})]})}function K({onChangeLang:e}){const{i18n:i}=a(l.Common),o=v(),{user:n}=x(),p=L();if(M(o.breakpoints.down("sm")))return null;const c=!n||n?.type===f.Individual;return t.jsxs(u,{gap:2,direction:"row",alignItems:"center",children:[p.map(r=>t.jsx(m,{variant:r.highlight?"contained":"text",to:r.to,params:r.params,dataUmamiEvent:`header-${r.event}`,children:r.label},r.event)),!!c&&t.jsx($,{id:"languageSwitch",lang:i.language,onChange:e})]})}function Q(){const{i18n:e}=a(l.Landing,{keyPrefix:"NAVBAR"}),{t:i}=a(l.Messages),{isAuthenticated:o,user:n}=x(),{fill:p}=_("primary"),s=v(),c=M(s.breakpoints.up("lg")),r=A(),{mutate:w}=T({...E(),onError:d=>{console.error(d),R.error(i("EDIT_MEMBER_ERROR"))},onSettled:async()=>{await r.invalidateQueries({queryKey:y.current().content})}}),{isEnabled:C}=k(),B=d=>{o&&n.type===f.Individual&&w({body:{extra:{lang:d}}}),e.changeLanguage(d)};return t.jsx(u,{width:"100%",p:2,gap:2,bgcolor:"white",position:"fixed",top:"0px",sx:{boxShadow:d=>d.shadows[3],zIndex:d=>d.zIndex.appBar},children:t.jsxs(u,{direction:"row",maxWidth:"lg",width:"100%",m:"auto",justifyContent:"space-between",children:[t.jsxs(u,{direction:"row",alignItems:"center",id:"rightTitleWrapper",gap:4,children:[t.jsxs(u,{direction:"row",gap:1,alignItems:"center",children:[!c&&t.jsx(H,{}),t.jsxs(u,{direction:"row",gap:1,alignItems:"center",to:P,component:S,sx:{textDecoration:"none",color:"inherit"},children:[t.jsx(I,{height:44,sx:{fill:p}}),t.jsxs(b,{fontWeight:"bold",variant:"h2",color:"primary",sx:{textDecoration:"none"},children:["Graasp",C?t.jsx(b,{variant:"note",children:"preview"}):""]})]})]}),c&&t.jsx(q,{})]}),t.jsx(K,{onChangeLang:B})]})})}function Ct(){const{i18n:e}=a(l.Landing,{keyPrefix:"NAVBAR"}),{t:i}=a(l.Messages),{isAuthenticated:o,user:n}=x(),p=A(),{mutate:s}=T({...E(),onError:r=>{console.error(r),R.error(i("EDIT_MEMBER_ERROR"))},onSettled:async()=>{await p.invalidateQueries({queryKey:y.current().content})}}),c=r=>{o&&n.type===f.Individual&&s({body:{extra:{lang:r}}}),e.changeLanguage(r)};return t.jsxs(t.Fragment,{children:[t.jsx(Q,{}),t.jsx(u,{direction:"column",width:"100%",mt:5,pb:15,bgcolor:G,flexGrow:1,children:t.jsx(N,{})}),t.jsx(U,{onChangeLang:c})]})}export{Ct as component};
