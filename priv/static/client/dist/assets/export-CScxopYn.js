import{v as S,b as l,N as x,r as I,m as P,g_ as f,bg as L,j as a,S as h,T as n,g$ as u,h as C,s as N,b0 as j}from"./index-Du6cLc2g.js";import{L as A}from"./Loader-BOZMRbfQ.js";import{E as M,e as g}from"./selectors-D3m2hp05.js";import{F as v}from"./FormControl-BpWV3VDf.js";import{R as X,a as D}from"./RadioGroup-BK_Mg-zB.js";import{A as _}from"./Alert-CbKF_a_e.js";import{B as b}from"./Button-BZonE8EM.js";import{F}from"./FormControlLabel-Ck-LB9EX.js";import{B as d}from"./Box-6qYIb0IB.js";import{S as k}from"./SectionTitle-CnmF-hoE.js";import{L as B}from"./List-BxElNHcx.js";import{L as G}from"./ListItemText-DtIE91_b.js";import{L as V}from"./ListItem-D9P1QCDu.js";import{P as w}from"./permissionLevel-BOsSKewz.js";import"./CircularProgress-CnPELIce.js";import"./isMuiElement-BOwKGjxf.js";import"./SwitchBase-DRi_6CGV.js";import"./useSlot-Jtq-mfHw.js";import"./ButtonBase-CdsCMxD3.js";import"./isFocusVisible-B8k4qzLc.js";import"./useControlled-B5xzdI43.js";import"./createSvgIcon-DpKUgtm0.js";import"./createChainedFunction-BO_9K8Jh.js";import"./IconButton-DGQNRfUk.js";import"./Paper-B8YcVVca.js";import"./listItemTextClasses-D6I-qz9g.js";import"./listItemButtonClasses-DxNRX85C.js";var s;(function(t){t.JSON="json",t.CSV="csv"})(s||(s={}));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=[["path",{d:"M8 3H7a2 2 0 0 0-2 2v5a2 2 0 0 1-2 2 2 2 0 0 1 2 2v5c0 1.1.9 2 2 2h1",key:"ezmyqa"}],["path",{d:"M16 21h1a2 2 0 0 0 2-2v-5c0-1.1.9-2 2-2a2 2 0 0 1-2-2V5a2 2 0 0 0-2-2h-1",key:"e1hn23"}]],H=S("braces",z);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],U=S("grid-3x3",J),$=({icon:t,title:r,description:i})=>a.jsx(F,{control:a.jsx(D,{value:r}),id:g(r),label:a.jsxs(a.Fragment,{children:[a.jsxs(d,{display:"flex",alignItems:"center",gap:.5,children:[t,r]}),a.jsx(n,{variant:"caption",children:i})]})}),q=L("/analytics/items/$itemId/export");function Y(){const{t}=l(x.Analytics),[r,i]=I.useState(s.CSV),[e,m]=I.useState({[s.CSV]:!1,[s.JSON]:!1}),{mutateAsync:T,isSuccess:c,isError:p,isPending:R}=P({...f(),onError:o=>{console.error(o)}}),{itemId:E}=q.useParams(),O=async()=>{E&&(await T({path:{id:E},query:{format:r}}),m({...e,[r]:!0}))},y=[{format:s.CSV,label:t("CSV_DESCRIPTION"),icon:a.jsx(U,{size:16})},{format:s.JSON,label:t("JSON_DESCRIPTION"),icon:a.jsx(H,{size:16})}];return a.jsxs(h,{gap:1,children:[a.jsxs(v,{sx:{display:"block"},children:[a.jsx(n,{variant:"h6",children:t("SELECT_FORMAT_TITLE")}),a.jsx(n,{variant:"body1",children:t("SELECT_FORMAT_DIALOG_DESCRIPTION")}),a.jsx(X,{name:"export-format",value:r,onChange:o=>{i(o.target.value)},children:y.map(o=>a.jsx($,{icon:o.icon,title:o.format,description:o.label},o.format))})]}),c&&a.jsx(_,{severity:"success",children:t("EXPORT_SUCCESS_MESSAGE")}),p&&a.jsx(_,{severity:"error",children:t("EXPORT_ERROR_MESSAGE")}),a.jsx(b,{onClick:O,variant:"contained",disabled:e[r],id:M,loading:R,"data-umami-event-format":r,"data-umami-event":"export-item-data",children:e[r]?t("EXPORTING_DONE",{format:r.toUpperCase()}):t("START_EXPORTING",{format:r.toUpperCase()})})]})}const W=N(V)(({theme:t})=>({paddingTop:0,"&:before":{content:'"â€¢"',paddingRight:t.spacing(1),fontSize:t.typography.body1.fontSize}}));function ft(){const{t}=l(x.Analytics),{itemId:r}=u.useParams(),{data:i,isLoading:e}=C.useItem(r),m=[{id:"item",primary:t("EXPORT_LIST_ITEM_ITEM_TITLE"),secondary:t("EXPORT_LIST_ITEM_ITEM_DESCRIPTION")},{id:"descendants",primary:t("EXPORT_LIST_ITEM_DESCENDANTS_TITLE"),secondary:t("EXPORT_LIST_ITEM_DESCENDANTS_DESCRIPTION")},{id:"apps",primary:t("EXPORT_LIST_ITEM_APPS_TITLE"),secondary:t("EXPORT_LIST_ITEM_APPS_DESCRIPTION")},{id:"members",primary:t("EXPORT_LIST_ITEM_MEMBERS_TITLE"),secondary:t("EXPORT_LIST_ITEM_MEMBERS_DESCRIPTION")},{id:"chat",primary:t("EXPORT_LIST_ITEM_CHATS_TITLE"),secondary:t("EXPORT_LIST_ITEM_CHATS_DESCRIPTION")},{id:"actions",primary:t("EXPORT_LIST_ITEM_ACTIONS_TITLE"),secondary:t("EXPORT_LIST_ITEM_ACTIONS_DESCRIPTION")}];return!e&&i?.permission&&w.gte(i.permission,"write")?a.jsxs(h,{paddingY:2,spacing:2,children:[a.jsx(d,{width:"fit-content",children:a.jsx(k,{title:t("EXPORT_ANALYTICS_TITLE")})}),a.jsx(n,{variant:"body1",whiteSpace:"pre-line",sx:{maxWidth:"100ch"},children:t("EXPORT_ANALYTICS_DESCRIPTION")}),a.jsxs(d,{children:[a.jsx(n,{variant:"h6",children:t("WHAT_TO_EXPORT_TITLE")}),a.jsx(B,{dense:!0,sx:{paddingTop:0},children:m.map(({id:T,primary:c,secondary:p})=>a.jsx(W,{children:a.jsx(G,{primary:c,secondary:p})},T))})]}),a.jsx(Y,{})]}):e?a.jsx(A,{}):a.jsx(j,{to:"/analytics/items/$itemId",params:{itemId:r},replace:!0})}export{ft as component};
