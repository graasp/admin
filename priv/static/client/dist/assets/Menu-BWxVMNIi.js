import{r as c,J as _,j as T,w as $,x as B,z as J,dd as q,s as j,B as Q,E as X,d1 as Y}from"./index-Du6cLc2g.js";import{u as H}from"./useSlot-Jtq-mfHw.js";import{u as Z}from"./Grow-DtN_YV5L.js";import{P as ee,a as te}from"./Popover-DKSgKXB-.js";import{a as se,o as oe,b as re}from"./Modal-CVujTFOw.js";import{u as ne}from"./ButtonBase-CdsCMxD3.js";import{L as ie}from"./List-BxElNHcx.js";function L(t,s,o){return t===s?t.firstChild:s&&s.nextElementSibling?s.nextElementSibling:o?null:t.firstChild}function O(t,s,o){return t===s?o?t.firstChild:t.lastChild:s&&s.previousElementSibling?s.previousElementSibling:o?null:t.lastChild}function z(t,s){if(s===void 0)return!0;let o=t.innerText;return o===void 0&&(o=t.textContent),o=o.trim().toLowerCase(),o.length===0?!1:s.repeating?o[0]===s.keys[0]:o.startsWith(s.keys.join(""))}function D(t,s,o,w,d,S){let m=!1,u=d(t,s,s?o:!1);for(;u;){if(u===t.firstChild){if(m)return!1;m=!0}const p=w?!1:u.disabled||u.getAttribute("aria-disabled")==="true";if(!u.hasAttribute("tabindex")||!z(u,S)||p)u=d(t,u,o);else return u.focus(),!0}return!1}const ae=c.forwardRef(function(s,o){const{actions:w,autoFocus:d=!1,autoFocusItem:S=!1,children:m,className:u,disabledItemsFocusable:p=!1,disableListWrap:h=!1,onKeyDown:y,variant:C="selectedMenu",...K}=s,f=c.useRef(null),k=c.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});_(()=>{d&&f.current.focus()},[d]),c.useImperativeHandle(w,()=>({adjustStyleForScrollbar:(e,{direction:i})=>{const r=!f.current.style.width;if(e.clientHeight<f.current.clientHeight&&r){const M=`${se(oe(e))}px`;f.current.style[i==="rtl"?"paddingLeft":"paddingRight"]=M,f.current.style.width=`calc(100% + ${M})`}return f.current}}),[]);const F=e=>{const i=f.current,r=e.key;if(e.ctrlKey||e.metaKey||e.altKey){y&&y(e);return}const P=re(i).activeElement;if(r==="ArrowDown")e.preventDefault(),D(i,P,h,p,L);else if(r==="ArrowUp")e.preventDefault(),D(i,P,h,p,O);else if(r==="Home")e.preventDefault(),D(i,null,h,p,L);else if(r==="End")e.preventDefault(),D(i,null,h,p,O);else if(r.length===1){const a=k.current,I=r.toLowerCase(),v=performance.now();a.keys.length>0&&(v-a.lastTime>500?(a.keys=[],a.repeating=!0,a.previousKeyMatched=!0):a.repeating&&I!==a.keys[0]&&(a.repeating=!1)),a.lastTime=v,a.keys.push(I);const x=P&&!a.repeating&&z(P,a);a.previousKeyMatched&&(x||D(i,P,!1,p,L,a))?e.preventDefault():a.previousKeyMatched=!1}y&&y(e)},R=ne(f,o);let n=-1;c.Children.forEach(m,(e,i)=>{if(!c.isValidElement(e)){n===i&&(n+=1,n>=m.length&&(n=-1));return}e.props.disabled||(C==="selectedMenu"&&e.props.selected||n===-1)&&(n=i),n===i&&(e.props.disabled||e.props.muiSkipListHighlight||e.type.muiSkipListHighlight)&&(n+=1,n>=m.length&&(n=-1))});const g=c.Children.map(m,(e,i)=>{if(i===n){const r={};return S&&(r.autoFocus=!0),e.props.tabIndex===void 0&&C==="selectedMenu"&&(r.tabIndex=0),c.cloneElement(e,r)}return e});return T.jsx(ie,{role:"menu",ref:R,className:u,onKeyDown:F,tabIndex:d?0:-1,...K,children:g})});function le(t){return $("MuiMenu",t)}B("MuiMenu",["root","paper","list"]);const ue={vertical:"top",horizontal:"right"},ce={vertical:"top",horizontal:"left"},pe=t=>{const{classes:s}=t;return X({root:["root"],paper:["paper"],list:["list"]},le,s)},fe=j(te,{shouldForwardProp:t=>Y(t)||t==="classes",name:"MuiMenu",slot:"Root"})({}),de=j(ee,{name:"MuiMenu",slot:"Paper"})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),me=j(ae,{name:"MuiMenu",slot:"List"})({outline:0}),Se=c.forwardRef(function(s,o){const w=J({props:s,name:"MuiMenu"}),{autoFocus:d=!0,children:S,className:m,disableAutoFocusItem:u=!1,MenuListProps:p={},onClose:h,open:y,PaperProps:C={},PopoverClasses:K,transitionDuration:f="auto",TransitionProps:{onEntering:k,...F}={},variant:R="selectedMenu",slots:n={},slotProps:g={},...e}=w,i=q(),r={...w,autoFocus:d,disableAutoFocusItem:u,MenuListProps:p,onEntering:k,PaperProps:C,transitionDuration:f,TransitionProps:F,variant:R},M=pe(r),P=d&&!u&&y,a=c.useRef(null),I=(l,b)=>{a.current&&a.current.adjustStyleForScrollbar(l,{direction:i?"rtl":"ltr"}),k&&k(l,b)},v=l=>{l.key==="Tab"&&(l.preventDefault(),h&&h(l,"tabKeyDown"))};let x=-1;c.Children.map(S,(l,b)=>{c.isValidElement(l)&&(l.props.disabled||(R==="selectedMenu"&&l.props.selected||x===-1)&&(x=b))});const E={slots:n,slotProps:{list:p,transition:F,paper:C,...g}},A=Z({elementType:n.root,externalSlotProps:g.root,ownerState:r,className:[M.root,m]}),[U,W]=H("paper",{className:M.paper,elementType:de,externalForwardedProps:E,shouldForwardComponentProp:!0,ownerState:r}),[G,V]=H("list",{className:Q(M.list,p.className),elementType:me,shouldForwardComponentProp:!0,externalForwardedProps:E,getSlotProps:l=>({...l,onKeyDown:b=>{v(b),l.onKeyDown?.(b)}}),ownerState:r}),N=typeof E.slotProps.transition=="function"?E.slotProps.transition(r):E.slotProps.transition;return T.jsx(fe,{onClose:h,anchorOrigin:{vertical:"bottom",horizontal:i?"right":"left"},transformOrigin:i?ue:ce,slots:{root:n.root,paper:U,backdrop:n.backdrop,...n.transition&&{transition:n.transition}},slotProps:{root:A,paper:W,backdrop:typeof g.backdrop=="function"?g.backdrop(r):g.backdrop,transition:{...N,onEntering:(...l)=>{I(...l),N?.onEntering?.(...l)}}},open:y,ref:o,transitionDuration:f,ownerState:r,...e,classes:K,children:T.jsx(G,{actions:a,autoFocus:d&&(x===-1||u),autoFocusItem:P,variant:R,...V,children:S})})});export{Se as M,ae as a};
