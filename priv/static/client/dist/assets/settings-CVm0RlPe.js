import{v as dt,j as e,r as v,b as f,N as P,y as j,d as Et,Z as _t,h as Le,bp as Ft,i as Ct,S as D,bH as Y,bI as Mt,s as mt,bJ as jt,bK as kt,bL as Ut,A as It,T as b,bM as Bt,bN as qt,k as pe,m as F,bO as Yt,o as Pe,bP as ht,bQ as pt,bR as Gt,bS as Kt,bT as Wt,bU as Vt,bV as zt,bW as Xt,bX as Qt,bY as Ht,bZ as ft,b_ as Pt,b$ as Ot,c0 as $t,c1 as Zt,c2 as Jt,c3 as Tt,c4 as er,c5 as tr,c6 as rr,c7 as nr,c8 as sr,n as Rt,c9 as Oe,ca as or,cb as ar,cc as ir,cd as cr,ce as Dt,cf as ur,cg as lr,ch as dr,ci as Er,cj as _r,ck as mr,cl as St,cm as Ir,cn as hr,co as pr,cp as fr,cq as Pr,at as Lt,as as vt,cr as Or,cs as Tr,ct as Rr,cu as Dr,cv as Sr,bE as Lr,L as vr,f as yr,G as Ar,cw as yt,cx as gr,cy as Te,cz as br,cA as wr,cB as xr,cC as Nr,cD as Fr,cE as Cr,cF as Mr,cG as jr}from"./index-Du6cLc2g.js";import{c as kr,d as Ur,u as Br}from"./useSuspenseQuery-DwsIladH.js";import{S as qr}from"./ScreenLayout-CYGpWsHI.js";import{c as Yr,b as Ae,d as fe}from"./toDate-BXq0HhWu.js";import{n as Gr,g as Kr}from"./normalizeDates-Bl5IZJGD.js";import{g as ge}from"./getTimezoneOffsetInMilliseconds-CkMJBntH.js";import{d as Wr}from"./differenceInSeconds-DNsH8fUT.js";import{e as Vr,g as zr,L as Xr}from"./langs-DUiJXdIq.js";import{B as be}from"./ButtonLink-rFd5ZjYd.js";import{I as we,M as Qr,C as Hr}from"./CropModal-C_dADBxf.js";import{D as At,a as $r}from"./DialogContent-BVO65bHL.js";import{A as x}from"./Alert-CbKF_a_e.js";import{D as Zr}from"./DialogTitle-DnHtd1CR.js";import{D as xe}from"./DialogContentText-DUgZTVZ1.js";import{T as q}from"./TextField-HOePLdCm.js";import{D as Jr}from"./DialogActions-hH_AKLy2.js";import{B as A}from"./Button-BZonE8EM.js";import{u as ve}from"./index.esm-ByZbOMQw.js";import{I as gt}from"./InputAdornment-19J4ELs1.js";import{I as en}from"./IconButton-DGQNRfUk.js";import{E as tn}from"./eye-ByKgq0Tl.js";import{i as Se}from"./password-DGq-f_5N.js";import{B as rn}from"./Box-6qYIb0IB.js";import{S as k}from"./Skeleton-DL17Y8WH.js";import{G as Re}from"./Grid-C2qF_7LL.js";import{L as nn}from"./LanguageSwitch-DF2Cbktt.js";import{S as sn}from"./Select-DjWljMTk.js";import{S as bt}from"./Switch-DI0rrL6B.js";import{T as on}from"./Tooltip-CkGlpyEO.js";import{M as an}from"./constants-w-S_fMru.js";import{A as cn}from"./AlertTitle-Bdf1oZJW.js";import{c as ye}from"./createSvgIcon-DpKUgtm0.js";import{F as un,T as ln,L as dn}from"./icons-CdeAQmLZ.js";import{F as En}from"./FormControlLabel-Ck-LB9EX.js";import{C as _n}from"./Checkbox-zg_kSEbu.js";import"./differenceInCalendarMonths-C8dGLoK4.js";import"./endOfDay-DrDjbh-O.js";import"./Divider-CoTlx057.js";import"./dividerClasses-bGF6_inT.js";import"./useSlot-Jtq-mfHw.js";import"./ButtonBase-CdsCMxD3.js";import"./isFocusVisible-B8k4qzLc.js";import"./Paper-B8YcVVca.js";import"./Modal-CVujTFOw.js";import"./createChainedFunction-BO_9K8Jh.js";import"./utils-TS7gOHXB.js";import"./FormControl-BpWV3VDf.js";import"./isMuiElement-BOwKGjxf.js";import"./Popover-DKSgKXB-.js";import"./Grow-DtN_YV5L.js";import"./Menu-BWxVMNIi.js";import"./List-BxElNHcx.js";import"./listItemTextClasses-D6I-qz9g.js";import"./useControlled-B5xzdI43.js";import"./CircularProgress-CnPELIce.js";import"./utils-CHXX7DhN.js";import"./MenuItem-BDQospWL.js";import"./chevron-down-DS52ak5B.js";import"./SwitchBase-DRi_6CGV.js";function mn(t){return Yr(t,Date.now())}function In(t,r,i){const c=Kr(),s=i?.locale??c.locale??Vr,l=2520,_=kr(t,r);if(isNaN(_))throw new RangeError("Invalid time value");const E=Object.assign({},i,{addSuffix:i?.addSuffix,comparison:_}),[O,p]=Gr(i?.in,..._>0?[r,t]:[t,r]),h=Wr(p,O),T=(ge(p)-ge(O))/1e3,m=Math.round((h-T)/60);let u;if(m<2)return i?.includeSeconds?h<5?s.formatDistance("lessThanXSeconds",5,E):h<10?s.formatDistance("lessThanXSeconds",10,E):h<20?s.formatDistance("lessThanXSeconds",20,E):h<40?s.formatDistance("halfAMinute",0,E):h<60?s.formatDistance("lessThanXMinutes",1,E):s.formatDistance("xMinutes",1,E):m===0?s.formatDistance("lessThanXMinutes",1,E):s.formatDistance("xMinutes",m,E);if(m<45)return s.formatDistance("xMinutes",m,E);if(m<90)return s.formatDistance("aboutXHours",1,E);if(m<Ae){const n=Math.round(m/60);return s.formatDistance("aboutXHours",n,E)}else{if(m<l)return s.formatDistance("xDays",1,E);if(m<fe){const n=Math.round(m/Ae);return s.formatDistance("xDays",n,E)}else if(m<fe*2)return u=Math.round(m/fe),s.formatDistance("aboutXMonths",u,E)}if(u=Ur(p,O),u<12){const n=Math.round(m/fe);return s.formatDistance("xMonths",n,E)}else{const n=u%12,a=Math.trunc(u/12);return n<3?s.formatDistance("aboutXYears",a,E):n<9?s.formatDistance("overXYears",a,E):s.formatDistance("almostXYears",a+1,E)}}function hn(t,r){return In(t,mn(t),r)}/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pn=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["rect",{x:"15",y:"5",width:"4",height:"12",rx:"1",key:"q8uenq"}],["rect",{x:"7",y:"8",width:"4",height:"9",rx:"1",key:"sr5ea"}]],fn=dt("chart-column-big",pn);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pn=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],On=dt("database",Pn),Tn=ye(e.jsx("path",{d:"M5 3h14a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2m13 2h-2.5A3.5 3.5 0 0 0 12 8.5V11h-2v3h2v7h3v-7h3v-3h-3V9a1 1 0 0 1 1-1h2V5z"})),Rn=ye(e.jsx("path",{d:"M19 3a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14m-.5 15.5v-5.3a3.26 3.26 0 0 0-3.26-3.26c-.85 0-1.84.52-2.32 1.3v-1.11h-2.79v8.37h2.79v-4.93c0-.77.62-1.4 1.39-1.4a1.4 1.4 0 0 1 1.4 1.4v4.93h2.79M6.88 8.56a1.68 1.68 0 0 0 1.68-1.68c0-.93-.75-1.69-1.68-1.69a1.69 1.69 0 0 0-1.69 1.69c0 .93.76 1.68 1.69 1.68m1.39 9.94v-8.37H5.5v8.37h2.77z"})),Dn=ye(e.jsx("path",{d:"M22.46 6c-.77.35-1.6.58-2.46.69.88-.53 1.56-1.37 1.88-2.38-.83.5-1.75.85-2.72 1.05C18.37 4.5 17.26 4 16 4c-2.35 0-4.27 1.92-4.27 4.29 0 .34.04.67.11.98C8.28 9.09 5.11 7.38 3 4.79c-.37.63-.58 1.37-.58 2.15 0 1.49.75 2.81 1.91 3.56-.71 0-1.37-.2-1.95-.5v.03c0 2.08 1.48 3.82 3.44 4.21a4.22 4.22 0 0 1-1.93.07 4.28 4.28 0 0 0 4 2.98 8.521 8.521 0 0 1-5.33 1.84c-.34 0-.68-.02-1.02-.06C3.44 20.29 5.7 21 8.12 21 16 21 20.33 14.46 20.33 8.79c0-.19 0-.37-.01-.56.84-.6 1.56-1.36 2.14-2.23z"})),Sn=()=>{const t=v.useRef(null),{t:r}=f(P.Account),i=(l=0)=>{t.current=j.info(r("UPLOADING_TOAST_TEXT"),{progress:l,position:"bottom-left"})};return{show:i,update:({progress:l})=>{t.current===null&&l&&l<1&&i(l),t.current&&j.update(t.current,{progress:l})},close:l=>{l?j.error(l.message):t.current&&j.done(t.current),t.current&&(t.current=null)}}},Ln=mt("input")({clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:1,overflow:"hidden",position:"absolute",bottom:0,left:0,whiteSpace:"nowrap",width:1}),vn=mt(D)(({size:t,zIndex:r})=>({zIndex:r,alignItems:"center",justifyContent:"center",height:t,width:t,position:"absolute",opacity:0,transition:"opacity 0.2s ease-in-out",":hover":{opacity:.85}}));function yn(){const{user:t}=Et(),r=_t.useUploadAvatar(),{data:i}=Le.useAvatarUrl({id:t.id,size:Ft.Medium}),{update:c}=Sn(),s=v.useRef(null),[l,_]=v.useState(!1),[E,O]=v.useState(),p=Ct(),{t:h}=f(P.Account),T=({target:a})=>{if(a.files&&a.files?.length>0){const o=new FileReader;o.addEventListener("load",()=>O(o.result)),o.readAsDataURL(a.files?.[0]),_(!0)}},m=()=>{_(!1),s.current&&(s.current.value="")},u=a=>{if(m(),!a){console.error("croppedImage is not defined");return}try{r.mutate({file:a,onUploadProgress:c})}catch(o){console.error(o)}},n=()=>{s.current?.click()};return e.jsxs(D,{justifyContent:"flex-start",direction:"column",children:[e.jsxs(D,{id:Mt,onClick:n,onKeyDown:a=>{["Enter"," "].includes(a.key)&&n()},"aria-label":"change avatar",tabIndex:0,height:Y,width:Y,borderRadius:50,bgcolor:"#E4DFFF",alignItems:"center",justifyContent:"center",overflow:"hidden",position:"relative",sx:{cursor:"pointer"},children:[e.jsx(vn,{bgcolor:p.palette.primary.main,size:Y,borderRadius:2,zIndex:p.zIndex.drawer-2,children:e.jsx(we,{color:p.palette.primary.contrastText})}),i?e.jsx("img",{id:jt,alt:h("PROFILE_AVATAR_CURRENT_ALT"),src:i,height:Y,width:Y}):e.jsx(we,{id:kt,color:p.palette.primary.main})]}),e.jsx(Ln,{id:Ut,type:"file",accept:"image/*",onChange:T,ref:s}),E&&e.jsx(At,{open:l,onClose:m,"aria-labelledby":Qr,children:e.jsx(Hr,{onClose:m,src:E,onConfirm:u})})]})}function An(){const{t,i18n:r}=f(P.Account),{data:i}=Le.useCurrentMember();return i?.type!==It.Individual?e.jsx(x,{severity:"error",children:t("NOT_AUTHENTICATED_OR_GUEST_MESSAGE")}):i?e.jsxs(D,{direction:"row",gap:2,alignItems:"center",children:[e.jsx(D,{alignItems:"center",gap:2,children:e.jsx(yn,{})}),e.jsxs(D,{direction:"column",children:[e.jsx(b,{variant:"h4",id:Bt,children:i.name}),e.jsx(b,{id:qt,variant:"caption",children:t("PROFILE_CREATED_AT_INFO",{date:hn(new Date(i.createdAt),{locale:zr(r.language)})})}),e.jsxs(D,{direction:"row",gap:1,children:[e.jsx(be,{to:"/account/storage",startIcon:e.jsx(On,{fontSize:24}),children:t("MAIN_MENU.STORAGE")}),e.jsx(be,{to:"/account/stats",startIcon:e.jsx(fn,{}),children:t("MAIN_MENU.STATS")})]})]})]}):null}function N({id:t,title:r,topAction:i,children:c}){return e.jsxs(D,{id:t,border:"1px solid",borderColor:"divider",borderRadius:1,p:2,spacing:1,children:[e.jsxs(D,{direction:"row",justifyContent:"space-between",children:[e.jsx(b,{variant:"h5",children:r}),i]}),c]})}function gn({closeModal:t}){const{t:r}=f(P.Account),{t:i}=f(P.Messages),[c,s]=v.useState(""),l=pe(),{mutate:_,error:E}=F({...Yt(),onSuccess:()=>{l.resetQueries(),l.setQueryData(Pe.current().content,void 0)},onError:h=>{console.error(h)}}),O=r("PROFILE_DELETE_CONFIRMATION_VALUE"),p=c!==O;return e.jsxs(e.Fragment,{children:[e.jsx(Zr,{id:ht,children:r("PROFILE_DELETE_ACCOUNT_MODAL_TITLE")}),e.jsxs($r,{children:[e.jsxs(D,{spacing:2,children:[e.jsx(xe,{id:pt,children:r("PROFILE_DELETE_ACCOUNT_MODAL_INFORMATION")}),e.jsx(xe,{children:r("PROFILE_DELETE_TYPE_CONFIRMATION_TEXT",{text:O})})]}),e.jsx(q,{id:Gt,value:c,fullWidth:!0,required:!0,variant:"outlined",onChange:h=>{s(h.target.value)},autoFocus:!0}),E&&e.jsx(x,{severity:"error",sx:{mt:1},children:i("DELETE_MEMBER_ERROR")})]}),e.jsxs(Jr,{children:[e.jsx(A,{onClick:t,variant:p?"contained":"text",children:r("PROFILE_DELETE_ACCOUNT_MODAL_CANCEL_BUTTON")}),e.jsx(A,{id:Kt,onClick:()=>{_({})},color:"error",disabled:p,children:r("PROFILE_DELETE_ACCOUNT_MODAL_CONFIRM_BUTTON")})]})]})}function bn(){const[t,r]=v.useState(!1),{t:i}=f(P.Account),c=()=>{r(!1)};return e.jsxs(N,{title:i("PROFILE_DESTRUCTIVE_SETTINGS_TITLE"),id:Wt,children:[e.jsxs(D,{direction:"column",spacing:2,children:[e.jsx(b,{variant:"body2",children:i("PROFILE_DELETE_ACCOUNT_INFORMATION")}),e.jsx(A,{id:Vt,variant:"outlined",color:"error",onClick:()=>r(!0),children:i("PROFILE_DELETE_ACCOUNT_BUTTON")})]}),e.jsx(At,{open:t,onClose:c,"aria-labelledby":ht,"aria-describedby":pt,maxWidth:"sm",fullWidth:!0,disableRestoreFocus:!0,children:e.jsx(gn,{closeModal:c})})]})}function wn(){const{t}=f(P.Account),[r,i]=v.useState(!1),{mutate:c,isSuccess:s,isError:l}=F(zt()),_=()=>{c({}),i(!0)};return e.jsx(N,{title:t("EXPORT_INFORMATIONS_TITLE"),children:e.jsxs(D,{direction:"column",spacing:2,children:[e.jsx(b,{variant:"body2",children:t("EXPORT_INFORMATIONS_DESCRIPTION")}),s&&e.jsx(x,{severity:"success",children:t("EXPORT_SUCCESS_MESSAGE")}),l&&e.jsx(x,{severity:"error",children:t("EXPORT_ERROR_MESSAGE")}),e.jsx(A,{onClick:_,disabled:r,id:Xt,variant:"contained",children:t("EXPORT_INFORMATIONS_BUTTON_TEXT")})]})})}function he({id:t,label:r,error:i,helperText:c,form:s}){const[l,_]=v.useState(!1);return e.jsx(q,{slotProps:{input:{sx:{paddingRight:0},endAdornment:e.jsx(gt,{position:"end",sx:{margin:0},children:e.jsx(en,{onClick:()=>_(E=>!E),children:e.jsx(tn,{})})})}},label:r,variant:"outlined",size:"small",error:i,helperText:c,type:l?"text":"password",id:t,...s})}const Ne=t=>t?.type==="required"?"REQUIRED_FIELD_ERROR":t?.message,xn=({onClose:t})=>{const{register:r,handleSubmit:i,formState:{errors:c}}=ve(),s=pe(),{t:l}=f(P.Account),{t:_}=f(P.Messages),{t:E}=f(P.Common),{mutateAsync:O,error:p,isPending:h}=F({...Qt(),onSuccess:()=>{j.success(_("UPDATE_PASSWORD"))},onError:o=>{console.error(o)},onSettled:()=>{s.invalidateQueries({queryKey:Pe.current().passwordStatus})}}),T=async o=>{try{await O({body:{password:o.newPassword}}),t()}catch(d){console.error(d)}},m=Ne(c.newPassword),u=Ne(c.confirmNewPassword),n=!!(m??u),a=p?_(p?.message??_("UNEXPECTED_ERROR")):null;return e.jsxs(N,{id:Ht,title:l("PASSWORD_TITLE"),children:[e.jsx(b,{variant:"body1",children:l("PASSWORD_SETTINGS_CONFIRM_INFORMATION")}),e.jsxs(D,{spacing:2,component:"form",onSubmit:i(T),children:[e.jsxs(D,{direction:"row",spacing:2,children:[e.jsx(he,{label:l("PASSWORD_SETTINGS_NEW_LABEL"),error:!!m,helperText:m&&l(m),id:ft,form:r("newPassword",{required:l("REQUIRED_FIELD_ERROR"),validate:{strong:o=>Se(o)||l("PASSWORD_WEAK_ERROR")}})}),e.jsx(he,{label:l("PASSWORD_SETTINGS_NEW_CONFIRM_LABEL"),error:!!u,helperText:u&&l(u),id:Pt,form:r("confirmNewPassword",{required:l("REQUIRED_FIELD_ERROR"),validate:{match:(o,d)=>o===d.newPassword||l("PASSWORD_DO_NOT_MATCH_ERROR")}})})]}),!!a&&e.jsx(x,{severity:"error",children:a}),e.jsxs(D,{direction:"row",gap:1,justifyContent:"flex-end",children:[e.jsx(A,{variant:"outlined",onClick:t,size:"small",children:E("CANCEL.BUTTON_TEXT")}),e.jsx(A,{variant:"contained",color:"primary",id:Ot,disabled:n,size:"small",type:"submit",loading:h,"data-umami-event":"create-password",children:E("SAVE.BUTTON_TEXT")})]})]})]})},Nn=({onClose:t})=>{const{register:r,handleSubmit:i,formState:{errors:c}}=ve(),{t:s}=f(P.Account),{t:l}=f(P.Messages),{t:_}=f(P.Common),{mutateAsync:E,error:O,isPending:p}=F({...$t(),onSuccess:()=>{j.success(l("UPDATE_PASSWORD"))},onError:o=>{j.error(o.message)}}),h=async o=>{try{await E({body:{password:o.newPassword,currentPassword:o.currentPassword}}),t()}catch(d){console.error(d)}},T=c.currentPassword?.message,m=c.newPassword?.message,u=c.confirmNewPassword?.message,n=!!(T??m??u),a=O?l(O?.message??"UNEXPECTED_ERROR"):null;return e.jsx(N,{id:Zt,title:s("PASSWORD_SETTINGS_TITLE"),children:e.jsxs(D,{direction:"column",gap:2,component:"form",onSubmit:i(h),children:[e.jsx(b,{variant:"body1",children:s("PASSWORD_SETTINGS_CONFIRM_INFORMATION")}),e.jsx(rn,{children:e.jsx(he,{id:Jt,label:s("PASSWORD_SETTINGS_CURRENT_LABEL"),error:!!T,helperText:T,form:r("currentPassword",{required:s("REQUIRED_FIELD_ERROR"),validate:{strong:o=>Se(o)||s("PASSWORD_WEAK_ERROR")}})})}),e.jsxs(D,{direction:"row",gap:2,children:[e.jsx(he,{label:s("PASSWORD_SETTINGS_NEW_LABEL"),error:!!m,helperText:m,id:ft,form:r("newPassword",{required:s("REQUIRED_FIELD_ERROR"),validate:{different:(o,d)=>o!==d.currentPassword||s("NEW_PASSWORD_SHOULD_NOT_MATCH_CURRENT_PASSWORD_ERROR"),strong:o=>Se(o)||s("PASSWORD_WEAK_ERROR")}})}),e.jsx(he,{label:s("PASSWORD_SETTINGS_NEW_CONFIRM_LABEL"),error:!!u,helperText:u,id:Pt,form:r("confirmNewPassword",{required:s("REQUIRED_FIELD_ERROR"),validate:{match:(o,d)=>o===d.newPassword||s("PASSWORD_DO_NOT_MATCH_ERROR")}})})]}),!!a&&e.jsx(x,{severity:"error",children:a}),e.jsxs(D,{direction:"row",gap:1,justifyContent:"flex-end",children:[e.jsx(A,{variant:"outlined",onClick:t,size:"small",children:_("CANCEL.BUTTON_TEXT")}),e.jsx(A,{variant:"contained",color:"primary",id:Ot,disabled:n,size:"small",type:"submit",loading:p,"data-umami-event":"update-password",children:_("SAVE.BUTTON_TEXT")})]})]})})};function Fn(){const{t}=f(P.Account),{t:r}=f(P.Common),[i,c]=v.useState(!1),{data:s,isPending:l}=Tt(er()),_=()=>{c(!0)},E=()=>{c(!1)};return i&&s?s.hasPassword?e.jsx(Nn,{onClose:E}):e.jsx(xn,{onClose:E}):i?l?e.jsx(k,{}):e.jsx(x,{severity:"error",children:r("ERRORS.UNEXPECTED")}):e.jsx(N,{id:tr,title:t("PASSWORD_TITLE"),topAction:e.jsx(A,{variant:"contained",onClick:_,id:nr,size:"small","data-umami-event":"edit-password",children:s?.hasPassword?t("EDIT_BUTTON_LABEL"):t("CONFIGURE_BUTTON_LABEL")},"edit"),children:e.jsx(b,{id:rr,variant:"body1",color:"textSecondary",children:s?.hasPassword?t("PASSWORD_SETTINGS_INFORMATION"):t("PASSWORD_SETTINGS_INFORMATION_NEW_PASSWORD")})})}function U({title:t,content:r,contentId:i}){return e.jsxs(D,{direction:"row",gap:2,alignItems:"center",children:[e.jsx(b,{variant:"body1",color:"textSecondary",children:t}),e.jsx(b,{variant:"body1",id:i,children:r})]})}const B=({title:t,children:r})=>e.jsxs(Re,{container:!0,direction:{xs:"column",sm:"row"},alignItems:{xs:"flex-start",sm:"center"},spacing:{xs:1,sm:2},children:[e.jsx(Re,{size:{xs:12,sm:4},p:0,children:e.jsx(b,{color:"textSecondary",children:t})}),e.jsx(Re,{size:{xs:12,sm:8},p:0,children:r})]});function Cn({id:t,value:r,onChange:i}){const{t:c}=f(P.Account),s=l=>{const _=l.target.value;_?i(_):console.error(`The frequency ${l.target.value} is not valid`)};return e.jsx(sn,{name:"notification-frequency",id:t,defaultValue:r,onChange:s,variant:"outlined",size:"small",values:Object.entries(sr).map(([l,_])=>({value:l,text:c(_)}))})}function Mn({value:t,onChange:r}){const{t:i}=f(P.Account),c=s=>{const l=s.target.checked;r(l)};return e.jsx(bt,{name:i("PROFILE_ENABLE_EMAIL_SUBSCRIPTION.TITLE"),onChange:c,checked:t})}const jn=({marketingEmailsSubscribedAt:t})=>{const r=pe(),{mutateAsync:i,error:c}=F({...Rt(),onSettled:async()=>{await r.invalidateQueries({queryKey:Pe.current().content}),await r.invalidateQueries({queryKey:Oe()})}}),{mutateAsync:s}=F({...or(),onSettled:async()=>{await r.invalidateQueries({queryKey:Oe()})}}),{mutateAsync:l}=F({...ar(),onSettled:async()=>{await r.invalidateQueries({queryKey:Oe()})}});return{saveSettings:async({lang:E,enableSaveActions:O,notificationFrequency:p,isSubscribedToMarketingEmails:h})=>{try{await i({body:{extra:{lang:E,emailFreq:p},enableSaveActions:O}}),!!t!==h&&(h?await s({}):l({}))}catch(T){console.error(T)}},error:c}};function kn({lang:t,enableSaveActions:r,marketingEmailsSubscribedAt:i,notificationFrequency:c,onClose:s}){const{i18n:l,t:_}=f(P.Account),{t:E}=f(P.Common),{t:O}=f(P.Messages),{saveSettings:p,error:h}=jn({marketingEmailsSubscribedAt:i}),[T,m]=v.useState(t),[u,n]=v.useState(!!i),[a,o]=v.useState(c),[d,I]=v.useState(r),S=L=>{const{checked:M}=L.target;I(M)},y=()=>{p({lang:T,enableSaveActions:d,notificationFrequency:a,isSubscribedToMarketingEmails:u}),T!==t&&l.changeLanguage(T),s()},g=T!==t||u!==!!i||a!==c||d!==r;return e.jsxs(N,{id:ir,title:_("PROFILE_PREFERENCES_TITLE"),children:[e.jsx(B,{title:_("PROFILE_LANGUAGE_TITLE"),children:e.jsx(nn,{lang:T,dense:!1,id:cr,onChange:m})}),e.jsx(B,{title:_("PROFILE_SAVE_ACTIONS_TITLE"),children:e.jsx(on,{title:_("SAVE_ACTIONS_TOGGLE_TOOLTIP"),children:e.jsx(bt,{id:Dt,onChange:S,checked:d,color:"primary"})})}),e.jsx(B,{title:_("PROFILE_EMAIL_FREQUENCY_TITLE"),children:e.jsx(Cn,{value:a,onChange:o})}),e.jsx(B,{title:_("PROFILE_ENABLE_EMAIL_SUBSCRIPTION.TITLE"),children:e.jsx(Mn,{value:u,onChange:n})}),h&&e.jsx(x,{severity:"error",children:O("EDIT_MEMBER_ERROR")}),e.jsxs(D,{direction:"row",gap:2,justifyContent:"flex-end",children:[e.jsx(A,{onClick:s,variant:"outlined",id:ur,size:"small",children:E("CANCEL.BUTTON_TEXT")}),e.jsx(A,{variant:"contained",onClick:y,id:lr,disabled:!g,size:"small",children:E("SAVE.BUTTON_TEXT")})]})]})}const Un=({lang:t,enableSaveActions:r,marketingEmailsSubscribedAt:i,notificationFrequency:c})=>{const{t:s}=f(P.Account),[l,_]=v.useState(!1),O=Xr[t??St],p=()=>{_(!0)},h=()=>{_(!1)};return l?e.jsx(kn,{lang:t,enableSaveActions:r,marketingEmailsSubscribedAt:i,notificationFrequency:c,onClose:h}):e.jsxs(N,{title:s("PROFILE_PREFERENCES_TITLE"),topAction:e.jsx(A,{variant:"contained",onClick:p,id:mr,size:"small",children:s("EDIT_BUTTON_LABEL")},"edit"),children:[e.jsx(U,{title:s("PROFILE_LANGUAGE_TITLE"),content:O,contentId:dr}),e.jsx(U,{title:s("PROFILE_SAVE_ACTIONS_TITLE"),content:s(r?"PROFILE_SAVE_ACTIONS_ENABLED":"PROFILE_SAVE_ACTIONS_DISABLED"),contentId:Dt}),e.jsx(U,{title:s("PROFILE_EMAIL_FREQUENCY_TITLE"),content:s(c==="always"?"ALWAYS_RECEIVE_EMAILS":"DISABLE_EMAILS"),contentId:Er}),e.jsx(U,{title:s("PROFILE_ENABLE_EMAIL_SUBSCRIPTION.TITLE"),content:s(i?"PROFILE_ENABLE_EMAIL_SUBSCRIPTION.ENABLED":"PROFILE_ENABLE_EMAIL_SUBSCRIPTION.DISABLED"),contentId:_r})]})},Bn=an.USERNAME_FORMAT_REGEX,Fe=t=>{const r=t.trim();return r===""?"USERNAME_EMPTY_ERROR":r.length<vt||r.length>Lt?"USERNAME_LENGTH_ERROR":Bn.test(r)?null:"USERNAME_SPECIAL_CHARACTERS_ERROR"};function qn({member:t,onEmailUpdate:r,onClose:i}){const{t:c}=f(P.Account),{t:s}=f(P.Common),{t:l}=f(P.Messages),_=pe(),{mutateAsync:E,error:O}=F({...Rt(),onSettled:async()=>{await _.invalidateQueries({queryKey:Pe.current().content})}}),{mutateAsync:p}=_t.useUpdateMemberEmail(),[h,T]=v.useState(t.name),[m,u]=v.useState(t.email),[n,a]=v.useState(),o=({target:g})=>{const L=g.value;u(L),r(L)},d=({target:g})=>{const{value:L}=g;T(L);const M=Fe(L);a(M?c(M,{min:vt,max:Lt}):null)},I=async()=>{const g=Fe(h??"");try{if(!g){const L=h.trim();t&&L!==t.name&&await E({body:{name:L}})}m!==t?.email&&await p(m),i()}catch(L){console.error(L)}},S=()=>{u(""),r(""),i()},y=h!==t?.name||m!==t?.email;return e.jsxs(N,{id:Ir,title:c("PERSONAL_INFORMATION_TITLE"),children:[e.jsx(B,{title:c("PROFILE_MEMBER_NAME"),children:e.jsx(q,{id:hr,variant:"outlined",size:"small",type:"text",name:"username",value:h,error:!!n,helperText:n,fullWidth:!0,onChange:d})}),e.jsx(B,{title:c("PROFILE_EMAIL_TITLE"),children:e.jsx(q,{id:pr,variant:"outlined",size:"small",type:"text",name:"email",value:m,fullWidth:!0,onChange:o})}),(n||O)&&e.jsx(x,{severity:"error",children:l("EDIT_MEMBER_ERROR")}),e.jsxs(D,{direction:"row",gap:1,justifyContent:"flex-end",children:[e.jsx(A,{onClick:S,variant:"outlined",id:fr,size:"small",children:s("CANCEL.BUTTON_TEXT")}),e.jsx(A,{variant:"contained",color:"primary",onClick:I,disabled:!!n||!y,id:Pr,size:"small",children:s("SAVE.BUTTON_TEXT")})]})]})}function Yn(){const{data:t}=Le.useCurrentMember(),{t:r}=f(P.Account),[i,c]=v.useState(!1),[s,l]=v.useState(""),_=()=>c(!1);return t?.type!==It.Individual?null:i?e.jsx(qn,{member:t,onClose:_,onEmailUpdate:l}):e.jsxs(N,{title:r("PERSONAL_INFORMATION_TITLE"),id:Or,topAction:e.jsx(A,{id:Sr,onClick:()=>c(!0),variant:"contained",size:"small",children:r("EDIT_BUTTON_LABEL")},"edit"),children:[e.jsx(U,{title:r("PROFILE_MEMBER_NAME"),content:t?.name,contentId:Tr},"name"),e.jsx(U,{title:r("PROFILE_EMAIL_TITLE"),content:t?.email,contentId:Rr},"email"),s&&e.jsxs(x,{severity:"info",id:Dr,children:[e.jsx(cn,{children:r("PROFILE_EMAIL_UPDATED_ALERT_TITLE")}),r("PROFILE_EMAIL_UPDATED_ALERT_MESSAGE",{email:s})]})]})}var w={},G={},K={},C={},Ce;function R(){return Ce||(Ce=1,Object.defineProperty(C,"__esModule",{value:!0}),C.TYPE_DEFAULT=C.TYPE_MOBILE=C.TYPE_DESKTOP=void 0,C.TYPE_DESKTOP=0,C.TYPE_MOBILE=1,C.TYPE_DEFAULT=1/0),C}var Me;function Gn(){if(Me)return K;Me=1,Object.defineProperty(K,"__esModule",{value:!0}),K.behance=void 0;var t=R();return K.behance={name:"behance",matches:[{match:"(https?://)?(www.)?behance.net/({PROFILE_ID})/?",group:3,type:t.TYPE_DESKTOP,pattern:"https://behance.net/{PROFILE_ID}"},{match:"({PROFILE_ID})",group:1}]},K}var W={},je;function Kn(){if(je)return W;je=1,Object.defineProperty(W,"__esModule",{value:!0}),W.dev_to=void 0;var t=R();return W.dev_to={name:"dev_to",matches:[{match:"(https?://)?(www.)?dev.to/({PROFILE_ID})/?",group:3,type:t.TYPE_DESKTOP,pattern:"https://dev.to/{PROFILE_ID}"},{match:"({PROFILE_ID})",group:1}]},W}var V={},ke;function Wn(){if(ke)return V;ke=1,Object.defineProperty(V,"__esModule",{value:!0}),V.dribbble=void 0;var t=R();return V.dribbble={name:"dribbble",matches:[{match:"(https?://)?(www.)?dribbble.com/({PROFILE_ID})/?",group:3,type:t.TYPE_DESKTOP,pattern:"https://dribbble.com/{PROFILE_ID}"},{match:"({PROFILE_ID})",group:1}]},V}var z={},Ue;function Vn(){if(Ue)return z;Ue=1,Object.defineProperty(z,"__esModule",{value:!0}),z.exercism=void 0;var t=R();return z.exercism={name:"exercism",matches:[{match:"(https?://)?(www.)?exercism.io/profiles/({PROFILE_ID})/?",group:3,type:t.TYPE_DESKTOP,pattern:"https://exercism.io/profiles/{PROFILE_ID}"},{match:"({PROFILE_ID})",group:1}]},z}var X={},Be;function zn(){if(Be)return X;Be=1,Object.defineProperty(X,"__esModule",{value:!0}),X.facebook=void 0;var t=R();return X.facebook={name:"facebook",matches:[{match:"(https?://)?(www.)?facebook.com/({PROFILE_ID})/?",group:3,type:t.TYPE_DESKTOP,pattern:"https://facebook.com/{PROFILE_ID}"},{match:"(https?://)?m.facebook.com/({PROFILE_ID})/?",group:2,type:t.TYPE_MOBILE,pattern:"https://m.facebook.com/{PROFILE_ID}"},{match:"({PROFILE_ID})",group:1}]},X}var Q={},qe;function Xn(){if(qe)return Q;qe=1,Object.defineProperty(Q,"__esModule",{value:!0}),Q.github=void 0;var t=R();return Q.github={name:"github",matches:[{match:"(https?://)?(www.)?github.com/({PROFILE_ID})/?",group:3,type:t.TYPE_DESKTOP,pattern:"https://github.com/{PROFILE_ID}"},{match:"({PROFILE_ID})",group:1}]},Q}var H={},Ye;function Qn(){if(Ye)return H;Ye=1,Object.defineProperty(H,"__esModule",{value:!0}),H.instagram=void 0;var t=R();return H.instagram={name:"instagram",matches:[{match:"(https?://)?(www.)?instagram.com/({PROFILE_ID})/?",group:3,type:t.TYPE_DESKTOP,pattern:"https://instagram.com/{PROFILE_ID}"},{match:"(https?://)?m.instagram.com/({PROFILE_ID})/?",group:2,type:t.TYPE_MOBILE,pattern:"https://m.instagram.com/{PROFILE_ID}"},{match:"@?({PROFILE_ID})",group:1}]},H}var $={},Ge;function Hn(){if(Ge)return $;Ge=1,Object.defineProperty($,"__esModule",{value:!0}),$.keybase=void 0;var t=R();return $.keybase={name:"keybase",matches:[{match:"(https?://)?(www.)?keybase.io/({PROFILE_ID})/?",group:3,type:t.TYPE_DESKTOP,pattern:"https://keybase.io/{PROFILE_ID}"},{match:"({PROFILE_ID})",group:1}]},$}var Z={},Ke;function $n(){if(Ke)return Z;Ke=1,Object.defineProperty(Z,"__esModule",{value:!0}),Z.lemmy_world=void 0;var t=R();return Z.lemmy_world={name:"lemmy_world",matches:[{match:"(https?://)?lemmy.world/u/({PROFILE_ID})/?",group:2,type:t.TYPE_DESKTOP,pattern:"https://lemmy.world/u/{PROFILE_ID}"},{match:"@?({PROFILE_ID})",group:1}]},Z}var J={},We;function Zn(){if(We)return J;We=1,Object.defineProperty(J,"__esModule",{value:!0}),J.linkedin=void 0;var t=R();return J.linkedin={name:"linkedin",matches:[{match:"(https?://)?([a-z]{2,3}.)?linkedin.com/in/({PROFILE_ID})/?",group:3,type:t.TYPE_DESKTOP,pattern:"https://linkedin.com/in/{PROFILE_ID}"},{match:"(https?://)?([a-z]{2,3}.)?linkedin.com/mwlite/in/({PROFILE_ID})/?",group:3,type:t.TYPE_MOBILE,pattern:"https://linkedin.com/mwlite/in/{PROFILE_ID}"},{match:"({PROFILE_ID})",group:1}]},J}var ee={},Ve;function Jn(){if(Ve)return ee;Ve=1,Object.defineProperty(ee,"__esModule",{value:!0}),ee.linktree=void 0;var t=R();return ee.linktree={name:"linktree",matches:[{match:"(https?://)?(www.)?linktr.ee/({PROFILE_ID})/?",group:3,type:t.TYPE_DESKTOP,pattern:"https://linktr.ee/{PROFILE_ID}"},{match:"({PROFILE_ID})",group:1}]},ee}var te={},ze;function es(){if(ze)return te;ze=1,Object.defineProperty(te,"__esModule",{value:!0}),te.mastodon=void 0;var t=R();return te.mastodon={name:"mastodon",matches:[{match:"(https?://)?(www.)?mastodon.social/@({PROFILE_ID})/?",group:3,type:t.TYPE_DESKTOP,pattern:"https://mastodon.social/@{PROFILE_ID}"},{match:"(https?://)?(www.)?mstdn.social/@({PROFILE_ID})/?",group:3,type:t.TYPE_DESKTOP,pattern:"https://mstdn.social/@{PROFILE_ID}"},{match:"(https?://)?(www.)?mastodon.world/@({PROFILE_ID})/?",group:3,type:t.TYPE_DESKTOP,pattern:"https://mastodon.world/@{PROFILE_ID}"},{match:"@?({PROFILE_ID})(@mastodon.social)?",group:1},{match:"@?({PROFILE_ID})(@mstdn.social)?",group:1},{match:"@?({PROFILE_ID})(@mastodon.world)?",group:1}]},te}var re={},Xe;function ts(){if(Xe)return re;Xe=1,Object.defineProperty(re,"__esModule",{value:!0}),re.medium=void 0;var t=R();return re.medium={name:"medium",matches:[{match:"(https?://)?(www.)?medium.com/@({PROFILE_ID})/?",group:3,type:t.TYPE_DESKTOP,pattern:"https://medium.com/@{PROFILE_ID}"},{match:"@?({PROFILE_ID})",group:1}]},re}var ne={},Qe;function rs(){if(Qe)return ne;Qe=1,Object.defineProperty(ne,"__esModule",{value:!0}),ne.patreon=void 0;var t=R();return ne.patreon={name:"patreon",matches:[{match:"(https?://)?(www.)?patreon.com/({PROFILE_ID})/?",group:3,type:t.TYPE_DESKTOP,pattern:"https://patreon.com/{PROFILE_ID}"},{match:"({PROFILE_ID})",group:1}]},ne}var se={},He;function ns(){if(He)return se;He=1,Object.defineProperty(se,"__esModule",{value:!0}),se.pinterest=void 0;var t=R();return se.pinterest={name:"pinterest",matches:[{match:"(https?://)?([a-z]{1,3}.)?pinterest.com/({PROFILE_ID})/?",group:3,type:t.TYPE_DESKTOP,pattern:"https://pinterest.com/{PROFILE_ID}"},{match:"@?({PROFILE_ID})",group:1}]},se}var oe={},$e;function ss(){if($e)return oe;$e=1,Object.defineProperty(oe,"__esModule",{value:!0}),oe.soundcloud=void 0;var t=R();return oe.soundcloud={name:"soundcloud",matches:[{match:"(https?://)?(www.)?soundcloud.com/({PROFILE_ID})/?",group:3,type:t.TYPE_DESKTOP,pattern:"https://soundcloud.com/{PROFILE_ID}"},{match:"({PROFILE_ID})",group:1}]},oe}var ae={},Ze;function os(){if(Ze)return ae;Ze=1,Object.defineProperty(ae,"__esModule",{value:!0}),ae.spotify=void 0;var t=R();return ae.spotify={name:"spotify",matches:[{match:"(https?://)?(open.)?spotify.com/artist/({PROFILE_ID})/?",group:3,type:t.TYPE_DESKTOP,pattern:"https://open.spotify.com/artist/{PROFILE_ID}"},{match:"({PROFILE_ID})",group:1}]},ae}var ie={},Je;function as(){if(Je)return ie;Je=1,Object.defineProperty(ie,"__esModule",{value:!0}),ie.stackoverflow=void 0;var t=R();return ie.stackoverflow={name:"stackoverflow",matches:[{match:"(https?://)?(www.)?stackoverflow.com/users/({PROFILE_ID})(/[A-Za-z0-9_\\-\\.]+)?/?",group:3,type:t.TYPE_DESKTOP,pattern:"https://stackoverflow.com/users/{PROFILE_ID}"},{match:"({PROFILE_ID})",group:1}]},ie}var ce={},et;function is(){if(et)return ce;et=1,Object.defineProperty(ce,"__esModule",{value:!0}),ce.substack=void 0;var t=R();return ce.substack={name:"substack",matches:[{match:"(https?://)?({PROFILE_ID}).substack.com/?",group:2,type:t.TYPE_DESKTOP,pattern:"https://{PROFILE_ID}.substack.com"},{match:"({PROFILE_ID})",group:1}]},ce}var ue={},tt;function cs(){if(tt)return ue;tt=1,Object.defineProperty(ue,"__esModule",{value:!0}),ue.telegram=void 0;var t=R();return ue.telegram={name:"telegram",matches:[{match:"(https?://)?(www.)?(t.me|telegram.me)/({PROFILE_ID})/?",group:4,type:t.TYPE_DESKTOP,pattern:"https://t.me/{PROFILE_ID}"},{match:"@?({PROFILE_ID})",group:1}]},ue}var le={},rt;function us(){if(rt)return le;rt=1,Object.defineProperty(le,"__esModule",{value:!0}),le.tiktok=void 0;var t=R();return le.tiktok={name:"tiktok",matches:[{match:"(https?://)?(www.)?tiktok.com/@({PROFILE_ID})/?",group:3,type:t.TYPE_DESKTOP,pattern:"https://tiktok.com/@{PROFILE_ID}"},{match:"@?({PROFILE_ID})",group:1}]},le}var de={},nt;function ls(){if(nt)return de;nt=1,Object.defineProperty(de,"__esModule",{value:!0}),de.twitch=void 0;var t=R();return de.twitch={name:"twitch",matches:[{match:"(https?://)?(www.)?twitch.tv/({PROFILE_ID})/?",group:3,type:t.TYPE_DESKTOP,pattern:"https://twitch.tv/{PROFILE_ID}"},{match:"(https?://)?m.twitch.tv/({PROFILE_ID})/?",group:2,type:t.TYPE_MOBILE,pattern:"https://m.twitch.tv/{PROFILE_ID}"},{match:"({PROFILE_ID})",group:1}]},de}var Ee={},st;function ds(){if(st)return Ee;st=1,Object.defineProperty(Ee,"__esModule",{value:!0}),Ee.twitter=void 0;var t=R();return Ee.twitter={name:"twitter",matches:[{match:"(https?://)?(www.)?twitter.com/@?({PROFILE_ID})/?",group:3,type:t.TYPE_DESKTOP,pattern:"https://twitter.com/{PROFILE_ID}"},{match:"(https?://)?mobile.twitter.com/@?({PROFILE_ID})/?",group:2,type:t.TYPE_MOBILE,pattern:"https://mobile.twitter.com/{PROFILE_ID}"},{match:"@?({PROFILE_ID})",group:1}]},Ee}var _e={},ot;function Es(){if(ot)return _e;ot=1,Object.defineProperty(_e,"__esModule",{value:!0}),_e.vk=void 0;var t=R();return _e.vk={name:"vk",matches:[{match:"(https?://)?(www.)?vk.com/({PROFILE_ID})/?",group:3,type:t.TYPE_DESKTOP,pattern:"https://vk.com/{PROFILE_ID}"},{match:"(https?://)?m.vk.com/@?({PROFILE_ID})/?",group:2,type:t.TYPE_MOBILE,pattern:"https://m.vk.com/{PROFILE_ID}"},{match:"@?({PROFILE_ID})",group:1}]},_e}var me={},at;function _s(){if(at)return me;at=1,Object.defineProperty(me,"__esModule",{value:!0}),me.x=void 0;var t=R();return me.x={name:"x",matches:[{match:"(https?://)?(www.)?x.com/({PROFILE_ID})/?",group:3,type:t.TYPE_DESKTOP,pattern:"https://x.com/{PROFILE_ID}"},{match:"({PROFILE_ID})",group:1}]},me}var Ie={},it;function ms(){if(it)return Ie;it=1,Object.defineProperty(Ie,"__esModule",{value:!0}),Ie.youtube=void 0;var t=R();return Ie.youtube={name:"youtube",matches:[{match:"(https?://)?(www.)?youtube.com/@?({PROFILE_ID})/?",group:3,type:t.TYPE_DESKTOP,pattern:"https://youtube.com/@{PROFILE_ID}"},{match:"(https?://)?(www.)?youtube.com/channel/({PROFILE_ID})/?",group:3},{match:"(https?://)?(www.)?youtube.com/user/({PROFILE_ID})/?",group:3},{match:"(https?://)?m.youtube.com/c/({PROFILE_ID})/?",group:2},{match:"({PROFILE_ID})",group:1}]},Ie}var ct;function Is(){if(ct)return G;ct=1,Object.defineProperty(G,"__esModule",{value:!0}),G.PREDEFINED_PROFILES=void 0;var t=Gn(),r=Kn(),i=Wn(),c=Vn(),s=zn(),l=Xn(),_=Qn(),E=Hn(),O=$n(),p=Zn(),h=Jn(),T=es(),m=ts(),u=rs(),n=ns(),a=ss(),o=os(),d=as(),I=is(),S=cs(),y=us(),g=ls(),L=ds(),M=Es(),xt=_s(),Nt=ms();return G.PREDEFINED_PROFILES=[t.behance,r.dev_to,i.dribbble,c.exercism,s.facebook,l.github,_.instagram,E.keybase,O.lemmy_world,p.linkedin,h.linktree,T.mastodon,m.medium,u.patreon,n.pinterest,a.soundcloud,o.spotify,d.stackoverflow,I.substack,S.telegram,y.tiktok,g.twitch,L.twitter,M.vk,xt.x,Nt.youtube],G}var ut;function hs(){return ut||(ut=1,(function(t){var r=w&&w.__assign||function(){return r=Object.assign||function(u){for(var n,a=1,o=arguments.length;a<o;a++){n=arguments[a];for(var d in n)Object.prototype.hasOwnProperty.call(n,d)&&(u[d]=n[d])}return u},r.apply(this,arguments)},i=w&&w.__createBinding||(Object.create?(function(u,n,a,o){o===void 0&&(o=a);var d=Object.getOwnPropertyDescriptor(n,a);(!d||("get"in d?!n.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return n[a]}}),Object.defineProperty(u,o,d)}):(function(u,n,a,o){o===void 0&&(o=a),u[o]=n[a]})),c=w&&w.__exportStar||function(u,n){for(var a in u)a!=="default"&&!Object.prototype.hasOwnProperty.call(n,a)&&i(n,u,a)},s=w&&w.__read||function(u,n){var a=typeof Symbol=="function"&&u[Symbol.iterator];if(!a)return u;var o=a.call(u),d,I=[],S;try{for(;(n===void 0||n-- >0)&&!(d=o.next()).done;)I.push(d.value)}catch(y){S={error:y}}finally{try{d&&!d.done&&(a=o.return)&&a.call(o)}finally{if(S)throw S.error}}return I},l=w&&w.__spreadArray||function(u,n,a){if(a||arguments.length===2)for(var o=0,d=n.length,I;o<d;o++)(I||!(o in n))&&(I||(I=Array.prototype.slice.call(n,0,o)),I[o]=n[o]);return u.concat(I||Array.prototype.slice.call(n))};Object.defineProperty(t,"__esModule",{value:!0}),t.SocialLinks=t.DEFAULT_CONFIG=t.PREDEFINED_PROFILES=void 0;var _=Is();Object.defineProperty(t,"PREDEFINED_PROFILES",{enumerable:!0,get:function(){return _.PREDEFINED_PROFILES}});var E=R();c(R(),t);var O="[A-Za-z0-9_\\-\\.]+",p="(\\?.*)?",h=function(u,n){var a=u.match.replace("{PROFILE_ID}","".concat(O)),o=typeof u.type<"u",d=new RegExp(l(l(["^",a],s(n.allowQueryParams&&o?[p]:[]),!1),["$"],!1).join(""));return d},T=function(u,n,a){return(u??[]).findIndex(function(o){return h(o,a).test(n)})};t.DEFAULT_CONFIG={usePredefinedProfiles:!0,trimInput:!0,allowQueryParams:!1};var m=(function(){function u(n){n===void 0&&(n=t.DEFAULT_CONFIG);var a=this;typeof n=="boolean"&&(n={usePredefinedProfiles:n}),this.config=r(r({},t.DEFAULT_CONFIG),n),this.profiles=new Map,this.config.usePredefinedProfiles&&_.PREDEFINED_PROFILES.map(function(o){var d=o.name,I=o.matches;return a.addProfile(d,I)})}return u.prototype.trim=function(n){return this.config.trimInput?n.trim():n},u.prototype.addProfile=function(n,a){return this.hasProfile(n)?!1:(this.profiles.set(n,a),!0)},u.prototype.cleanProfiles=function(){this.profiles.clear()},u.prototype.isValid=function(n,a){if(!this.hasProfile(n))return!1;var o=this.profiles.get(n);return T(o,this.trim(a),this.config)!==-1},u.prototype.getProfileId=function(n,a){var o,d;if(!this.hasProfile(n))throw new Error("There is no profile ".concat(n," defined"));var I=(o=this.profiles.get(n))!==null&&o!==void 0?o:[],S=this.trim(a),y=T(I,S,this.config);if(y===-1)throw new Error("Link has not matched with profile ".concat(n));return((d=S.match(h(I[y],this.config)))!==null&&d!==void 0?d:[])[I[y].group]},u.prototype.getLink=function(n,a,o){var d,I;if(o===void 0&&(o=E.TYPE_DEFAULT),!this.hasProfile(n))throw new Error("There is no profile ".concat(n," defined"));var S=(d=this.profiles.get(n))!==null&&d!==void 0?d:[],y=o===E.TYPE_DEFAULT?E.TYPE_DESKTOP:o,g=S.findIndex(function(L){return o===E.TYPE_DEFAULT?!0:L.type===y});if(g===-1)throw new Error("There is no pattern for profile ".concat(n));return((I=S[g].pattern)!==null&&I!==void 0?I:"").replace("{PROFILE_ID}","".concat(this.trim(a)))},u.prototype.sanitize=function(n,a,o){var d,I;o===void 0&&(o=E.TYPE_DEFAULT);var S=this.trim(a),y=this.getProfileId(n,S),g=(d=this.profiles.get(n))!==null&&d!==void 0?d:[],L=T(g,S,this.config),M=o!==E.TYPE_DEFAULT?o:(I=g[L].type)!==null&&I!==void 0?I:E.TYPE_DEFAULT;return this.getLink(n,y,M)},u.prototype.hasProfile=function(n){return this.profiles.has(n)},u.prototype.getProfileNames=function(){return l([],s(this.profiles.keys()),!1)},u.prototype.scoreProfiles=function(n){var a=this;return this.getProfileNames().map(function(o){var d=a.profiles.get(o),I=(d||[]).reduce(function(S,y){return S+(h(y,a.config).test(n)?1:0)},0);return{profileName:o,score:I}}).filter(function(o){return o.score>0}).sort(function(o,d){return d.score-o.score})},u.prototype.detectProfile=function(n){var a=this.scoreProfiles(n);return a.length===0?"":a[0].profileName},u})();t.SocialLinks=m,t.default=m})(w)),w}var wt=hs();const ps=Lr(wt);function De({icon:t,contentId:r,content:i,href:c}){return e.jsxs(D,{direction:"row",spacing:1,children:[e.jsx(b,{variant:"body1",color:"textSecondary",children:t}),e.jsx(b,{variant:"body1",id:r,children:c?e.jsx(vr,{to:c,children:i}):i})]})}const fs={usePredefinedProfiles:!0,trimInput:!0,allowQueryParams:!0},lt=new wt.SocialLinks(fs);function Ps({onClose:t,profile:r}){const{user:i}=Et(),{t:c}=f(P.Account,{keyPrefix:"PUBLIC_PROFILE"}),{t:s}=f(P.Common),{fill:l}=yr("inherit"),{register:_,handleSubmit:E,watch:O,formState:{errors:p,isValid:h}}=ve({mode:"onChange",defaultValues:{bio:r?.bio,twitterId:r?.twitterId,facebookId:r?.facebookId,linkedinId:r?.linkedinId,visibility:r?.visibility??!1}}),T=[{fieldName:"facebookId",socialProfile:"facebook",Icon:un,label:"FACEBOOK_LINK"},{fieldName:"twitterId",socialProfile:"twitter",Icon:ln,label:"TWITTER_LINK"},{fieldName:"linkedinId",socialProfile:"linkedin",Icon:dn,label:"LINKEDIN_LINK"}],m=_("visibility"),u=O("visibility");return e.jsxs(N,{title:c("TITLE"),children:[e.jsx(b,{variant:"body1",children:c("DESCRIPTION")}),r&&i&&e.jsx("a",{href:`${Ar}/members/${i.id}`,children:c("CHECK_TEXT")}),e.jsxs(D,{component:"form",onSubmit:E(t),direction:"column",gap:2,children:[e.jsx(q,{..._("bio"),helperText:p.bio?.message&&c("BIO_ERROR_MSG"),error:!!p.bio?.message,label:c("BIO_LABEL"),multiline:!0,rows:4,id:yt}),T.map(({fieldName:n,Icon:a,label:o,socialProfile:d})=>e.jsx(q,{..._(n,{validate:I=>{if(I)return lt.isValid(d,I)||c("INVALID_LINK_ERROR")},setValueAs:I=>{if(I)try{return lt.getProfileId(d,I)}catch{return I}else return I}}),slotProps:{input:{startAdornment:e.jsx(gt,{position:"start",children:e.jsx(a,{size:24,fill:l})})}},error:!!p[n]?.message,helperText:p[n]?.message,label:c(o),id:n},n)),e.jsx(En,{control:e.jsx(_n,{color:"primary",checked:u,name:m.name,onChange:m.onChange}),ref:m.ref,label:c("VISIBILITY_LABEL")}),e.jsxs(D,{direction:"row",gap:1,justifyContent:"flex-end",children:[e.jsx(A,{onClick:()=>t(void 0),variant:"outlined",size:"small",children:s("CANCEL.BUTTON_TEXT")}),e.jsx(A,{type:"submit",variant:"contained",color:"primary",size:"small",disabled:!h,id:gr,children:s("SAVE.BUTTON_TEXT")})]})]})]})}function Os(){const t=new ps,{t:r}=f(P.Account,{keyPrefix:"PUBLIC_PROFILE"}),{t:i}=f(P.Common),{t:c}=f(P.Messages),{data:s}=Tt(Te()),l=pe(),{mutate:_,isSuccess:E,isError:O,error:p}=F({...br(),onSettled:()=>{l.invalidateQueries({queryKey:Te().queryKey})}}),{mutate:h,isSuccess:T,isError:m,error:u}=F({...wr(),onSettled:()=>{l.invalidateQueries({queryKey:Te().queryKey})}}),{bio:n,linkedinId:a,twitterId:o,facebookId:d}=s??{},[I,S]=v.useState(!1),y=L=>{L&&(s?h({body:L}):_({body:L})),S(!1)},g=()=>S(!0);return I?e.jsx(Ps,{onClose:y,profile:s}):s?e.jsxs(N,{id:xr,title:r("TITLE"),topAction:e.jsx(A,{variant:"contained",onClick:g,id:Nr,size:"small",children:i("EDIT.BUTTON_TEXT")}),children:[e.jsx(b,{variant:"body1",color:"textSecondary",children:r("BIO_LABEL")}),e.jsx(b,{variant:"body1",id:yt,children:n??r("BIO_EMPTY_MSG")}),a&&e.jsx(De,{icon:e.jsx(Rn,{}),contentId:"linkedinId",href:t.sanitize("linkedin",a),content:a}),o&&e.jsx(De,{icon:e.jsx(Dn,{}),contentId:"twitterId",href:t.sanitize("twitter",o),content:o}),d&&e.jsx(De,{icon:e.jsx(Tn,{}),contentId:"facebookId",href:t.sanitize("facebook",d),content:d}),(T||E)&&e.jsx(x,{severity:"success",children:r("PATCH_SUCCESS_MESSAGE")}),m&&e.jsx(x,{severity:"error",children:u?.message?c(u?.message):c("UNEXPECTED_ERROR")}),O&&e.jsx(x,{severity:"error",children:p?.message?c(p?.message):c("UNEXPECTED_ERROR")})]}):e.jsx(N,{id:Fr,title:r("TITLE"),topAction:e.jsx(A,{variant:"contained",onClick:g,id:Cr,size:"small",children:r("CONFIGURE")}),children:s===null?e.jsx(b,{color:"textSecondary",fontStyle:"italic",children:r("NOT_CONFIGURED_DESCRIPTION")}):e.jsx(k,{width:"100%"})})}function Ts(){return e.jsx(v.Suspense,{fallback:e.jsx(Ds,{}),children:e.jsx(Rs,{})})}function Rs(){const{t}=f(P.Account),{data:r}=Br(Mr()),{lang:i,enableSaveActions:c,notificationFrequency:s,marketingEmailsSubscribedAt:l}=r;return e.jsxs(qr,{id:jr,title:t("MAIN_MENU.SETTINGS"),children:[e.jsx(An,{}),e.jsx(Yn,{}),e.jsx(Fn,{}),e.jsx(Os,{}),e.jsx(Un,{lang:i??St,enableSaveActions:c,notificationFrequency:s,marketingEmailsSubscribedAt:l}),e.jsx(wn,{}),e.jsx(bn,{})]})}function Ds(){return e.jsxs(D,{gap:3,children:[e.jsx(k,{width:"100%",height:50,sx:{transform:"unset"}}),e.jsx(k,{height:120,sx:{transform:"unset"}}),e.jsx(k,{height:200,sx:{transform:"unset"}}),e.jsx(k,{height:200,sx:{transform:"unset"}})]})}function bo(){return e.jsx(Ts,{})}export{bo as component};
