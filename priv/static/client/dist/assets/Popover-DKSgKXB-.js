import{B as M,w as mt,x as yt,s as ot,r as h,z as gt,j as R,E as vt}from"./index-Du6cLc2g.js";import{u as N,i as Pt}from"./useSlot-Jtq-mfHw.js";import{P as xt}from"./Paper-B8YcVVca.js";import{b as V,o as Z,M as bt}from"./Modal-CVujTFOw.js";import{G as wt}from"./Grow-DtN_YV5L.js";function Et(t,o=166){let n;function c(...x){const l=()=>{t.apply(this,x)};clearTimeout(n),n=setTimeout(l,o)}return c.clear=()=>{clearTimeout(n)},c}function Ct(t,o){const n=t.charCodeAt(2);return t[0]==="o"&&t[1]==="n"&&n>=65&&n<=90&&typeof o=="function"}function Tt(t,o){if(!t)return o;function n(f,r){const s={};return Object.keys(r).forEach(p=>{Ct(p,r[p])&&typeof f[p]=="function"&&(s[p]=(...g)=>{f[p](...g),r[p](...g)})}),s}if(typeof t=="function"||typeof o=="function")return f=>{const r=typeof o=="function"?o(f):o,s=typeof t=="function"?t({...f,...r}):t,p=M(f?.className,r?.className,s?.className),g=n(s,r);return{...r,...s,...g,...!!p&&{className:p},...r?.style&&s?.style&&{style:{...r.style,...s.style}},...r?.sx&&s?.sx&&{sx:[...Array.isArray(r.sx)?r.sx:[r.sx],...Array.isArray(s.sx)?s.sx:[s.sx]]}}};const c=o,x=n(t,c),l=M(c?.className,t?.className);return{...o,...t,...x,...!!l&&{className:l},...c?.style&&t?.style&&{style:{...c.style,...t.style}},...c?.sx&&t?.sx&&{sx:[...Array.isArray(c.sx)?c.sx:[c.sx],...Array.isArray(t.sx)?t.sx:[t.sx]]}}}function At(t){return mt("MuiPopover",t)}yt("MuiPopover",["root","paper"]);function _(t,o){let n=0;return typeof o=="number"?n=o:o==="center"?n=t.height/2:o==="bottom"&&(n=t.height),n}function S(t,o){let n=0;return typeof o=="number"?n=o:o==="center"?n=t.width/2:o==="right"&&(n=t.width),n}function tt(t){return[t.horizontal,t.vertical].map(o=>typeof o=="number"?`${o}px`:o).join(" ")}function C(t){return typeof t=="function"?t():t}const Ot=t=>{const{classes:o}=t;return vt({root:["root"],paper:["paper"]},At,o)},zt=ot(bt,{name:"MuiPopover",slot:"Root"})({}),Rt=ot(xt,{name:"MuiPopover",slot:"Paper"})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),Wt=h.forwardRef(function(o,n){const c=gt({props:o,name:"MuiPopover"}),{action:x,anchorEl:l,anchorOrigin:f={vertical:"top",horizontal:"left"},anchorPosition:r,anchorReference:s="anchorEl",children:p,className:g,container:et,elevation:H=8,marginThreshold:u=16,open:y,PaperProps:nt={},slots:j={},slotProps:E={},transformOrigin:b={vertical:"top",horizontal:"left"},TransitionComponent:D,transitionDuration:T="auto",TransitionProps:W={},disableScrollLock:A=!1,...st}=c,O=h.useRef(),w={...c,anchorOrigin:f,anchorReference:s,elevation:H,marginThreshold:u,transformOrigin:b,TransitionComponent:D,transitionDuration:T,TransitionProps:W},L=Ot(w),k=h.useCallback(()=>{if(s==="anchorPosition")return r;const e=C(l),a=(e&&e.nodeType===1?e:V(O.current).body).getBoundingClientRect();return{top:a.top+_(a,f.vertical),left:a.left+S(a,f.horizontal)}},[l,f.horizontal,f.vertical,r,s]),F=h.useCallback(e=>({vertical:_(e,b.vertical),horizontal:S(e,b.horizontal)}),[b.horizontal,b.vertical]),U=h.useCallback(e=>{const i={width:e.offsetWidth,height:e.offsetHeight},a=F(i);if(s==="none")return{top:null,left:null,transformOrigin:tt(a)};const X=k();let v=X.top-a.vertical,P=X.left-a.horizontal;const Y=v+i.height,q=P+i.width,J=Z(C(l)),K=J.innerHeight-u,Q=J.innerWidth-u;if(u!==null&&v<u){const d=v-u;v-=d,a.vertical+=d}else if(u!==null&&Y>K){const d=Y-K;v-=d,a.vertical+=d}if(u!==null&&P<u){const d=P-u;P-=d,a.horizontal+=d}else if(q>Q){const d=q-Q;P-=d,a.horizontal+=d}return{top:`${Math.round(v)}px`,left:`${Math.round(P)}px`,transformOrigin:tt(a)}},[l,s,k,F,u]),[rt,$]=h.useState(y),m=h.useCallback(()=>{const e=O.current;if(!e)return;const i=U(e);i.top!==null&&e.style.setProperty("top",i.top),i.left!==null&&(e.style.left=i.left),e.style.transformOrigin=i.transformOrigin,$(!0)},[U]);h.useEffect(()=>(A&&window.addEventListener("scroll",m),()=>window.removeEventListener("scroll",m)),[l,A,m]);const it=()=>{m()},at=()=>{$(!1)};h.useEffect(()=>{y&&m()}),h.useImperativeHandle(x,()=>y?{updatePosition:()=>{m()}}:null,[y,m]),h.useEffect(()=>{if(!y)return;const e=Et(()=>{m()}),i=Z(C(l));return i.addEventListener("resize",e),()=>{e.clear(),i.removeEventListener("resize",e)}},[l,y,m]);let B=T;const z={slots:{transition:D,...j},slotProps:{transition:W,paper:nt,...E}},[G,ct]=N("transition",{elementType:wt,externalForwardedProps:z,ownerState:w,getSlotProps:e=>({...e,onEntering:(i,a)=>{e.onEntering?.(i,a),it()},onExited:i=>{e.onExited?.(i),at()}}),additionalProps:{appear:!0,in:y}});T==="auto"&&!G.muiSupportAuto&&(B=void 0);const lt=et||(l?V(C(l)).body:void 0),[I,{slots:ft,slotProps:pt,...ut}]=N("root",{ref:n,elementType:zt,externalForwardedProps:{...z,...st},shouldForwardComponentProp:!0,additionalProps:{slots:{backdrop:j.backdrop},slotProps:{backdrop:Tt(typeof E.backdrop=="function"?E.backdrop(w):E.backdrop,{invisible:!0})},container:lt,open:y},ownerState:w,className:M(L.root,g)}),[dt,ht]=N("paper",{ref:O,className:L.paper,elementType:Rt,externalForwardedProps:z,shouldForwardComponentProp:!0,additionalProps:{elevation:H,style:rt?void 0:{opacity:0}},ownerState:w});return R.jsx(I,{...ut,...!Pt(I)&&{slots:ft,slotProps:pt,disableScrollLock:A},children:R.jsx(G,{...ct,timeout:B,children:R.jsx(dt,{...ht,children:p})})})});export{Rt as P,Wt as a,Et as d,Tt as m};
