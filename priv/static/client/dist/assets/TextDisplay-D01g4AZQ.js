import{bF as N,bE as U,j as k,s as K}from"./index-Du6cLc2g.js";const o=1,W=2,q=4,b=8,F=16,_=32,T=64,D={a:{content:o|b,self:!1,type:o|b|_|T},address:{invalid:["h1","h2","h3","h4","h5","h6","address","article","aside","section","div","header","footer"],self:!1},audio:{children:["track","source"]},br:{type:o|b,void:!0},body:{content:o|W|q|b|F|_|T},button:{content:b,type:o|b|_|T},caption:{content:o,parent:["table"]},col:{parent:["colgroup"],void:!0},colgroup:{children:["col"],parent:["table"]},details:{children:["summary"],type:o|_|T},dd:{content:o,parent:["dl"]},dl:{children:["dt","dd"],type:o},dt:{content:o,invalid:["footer","header"],parent:["dl"]},figcaption:{content:o,parent:["figure"]},footer:{invalid:["footer","header"]},header:{invalid:["footer","header"]},hr:{type:o,void:!0},img:{void:!0},li:{content:o,parent:["ul","ol","menu"]},main:{self:!1},ol:{children:["li"],type:o},picture:{children:["source","img"],type:o|b|F},rb:{parent:["ruby","rtc"]},rp:{parent:["ruby","rtc"]},rt:{content:b,parent:["ruby","rtc"]},rtc:{content:b,parent:["ruby"]},ruby:{children:["rb","rp","rt","rtc"]},source:{parent:["audio","video","picture"],void:!0},summary:{content:b,parent:["details"]},table:{children:["caption","colgroup","thead","tbody","tfoot","tr"],type:o},tbody:{parent:["table"],children:["tr"]},td:{content:o,parent:["tr"]},tfoot:{parent:["table"],children:["tr"]},th:{content:o,parent:["tr"]},thead:{parent:["table"],children:["tr"]},tr:{parent:["table","tbody","thead","tfoot"],children:["th","td"]},track:{parent:["audio","video"],void:!0},ul:{children:["li"],type:o},video:{children:["track","source"]},wbr:{type:o|b,void:!0}};function w(i){return e=>{D[e]={...i,...D[e]}}}["address","main","div","figure","p","pre"].forEach(w({content:o,type:o|T}));["abbr","b","bdi","bdo","cite","code","data","dfn","em","i","kbd","mark","q","ruby","samp","strong","sub","sup","time","u","var"].forEach(w({content:b,type:o|b|T}));["p","pre"].forEach(w({content:b,type:o|T}));["s","small","span","del","ins"].forEach(w({content:b,type:o|b}));["article","aside","footer","header","nav","section","blockquote"].forEach(w({content:o,type:o|W|T}));["h1","h2","h3","h4","h5","h6"].forEach(w({content:b,type:o|q|T}));["audio","canvas","iframe","img","video"].forEach(w({type:o|b|F|T}));const H=Object.freeze(D),X=["applet","base","body","command","embed","frame","frameset","head","html","link","meta","noscript","object","script","style","title"],J=Object.keys(H).filter(i=>i!=="canvas"&&i!=="iframe"),d=1,Q=2,S=3,I=4,Y=5,C=Object.freeze({alt:d,cite:d,class:d,colspan:S,controls:I,datetime:d,default:I,disabled:I,dir:d,height:d,href:d,id:d,kind:d,label:d,lang:d,loading:d,loop:I,media:d,muted:I,poster:d,rel:d,role:d,rowspan:S,scope:d,sizes:d,span:S,start:S,style:Y,src:d,srclang:d,srcset:d,tabindex:d,target:d,title:d,type:d,width:d}),Z=Object.freeze({class:"className",colspan:"colSpan",datetime:"dateTime",rowspan:"rowSpan",srclang:"srcLang",srcset:"srcSet",tabindex:"tabIndex"});function P(){return P=Object.assign||function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},P.apply(this,arguments)}function $({attributes:i={},className:e,children:t=null,selfClose:n=!1,tagName:r}){const s=r;return n?N.createElement(s,P({className:e},i)):N.createElement(s,P({className:e},i),t)}class ee{attribute(e,t){return t}node(e,t){return t}}/*!
 * escape-html
 * Copyright(c) 2012-2013 TJ Holowaychuk
 * Copyright(c) 2015 Andreas Lubbe
 * Copyright(c) 2015 Tiancheng "Timothy" Gu
 * MIT Licensed
 */var R,j;function te(){if(j)return R;j=1;var i=/["'&<>]/;R=e;function e(t){var n=""+t,r=i.exec(n);if(!r)return n;var s,c="",u=0,a=0;for(u=r.index;u<n.length;u++){switch(n.charCodeAt(u)){case 34:s="&quot;";break;case 38:s="&amp;";break;case 39:s="&#39;";break;case 60:s="&lt;";break;case 62:s="&gt;";break;default:continue}a!==u&&(c+=n.substring(a,u)),a=u+1,c+=s}return a!==u?c+n.substring(a,u):c}return R}var ne=te();const re=U(ne);function x(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}const se=/(url|image|image-set)\(/i;class ae extends ee{attribute(e,t){return e==="style"&&Object.keys(t).forEach(n=>{String(t[n]).match(se)&&delete t[n]}),t}}const M=1,ie=3,oe=/^<(!doctype|(html|head|body)(\s|>))/i,le=/^(aria-|data-|\w+:)/iu,ce=/{{{(\w+)\/?}}}/;function de(){if(!(typeof window>"u"||typeof document>"u"))return document.implementation.createHTMLDocument("Interweave")}class z{constructor(e,t={},n=[],r=[]){var s;x(this,"allowed",void 0),x(this,"banned",void 0),x(this,"blocked",void 0),x(this,"container",void 0),x(this,"content",[]),x(this,"props",void 0),x(this,"matchers",void 0),x(this,"filters",void 0),x(this,"keyIndex",void 0),this.props=t,this.matchers=n,this.filters=[...r,new ae],this.keyIndex=-1,this.container=this.createContainer(e||""),this.allowed=new Set((s=t.allowList)!==null&&s!==void 0?s:J),this.banned=new Set(X),this.blocked=new Set(t.blockList)}applyAttributeFilters(e,t){return this.filters.reduce((n,r)=>n!==null&&typeof r.attribute=="function"?r.attribute(e,n):n,t)}applyNodeFilters(e,t){return this.filters.reduce((n,r)=>n!==null&&typeof r.node=="function"?r.node(e,n):n,t)}applyMatchers(e,t){const n={},{props:r}=this;let s=e,c=0,u=null;return this.matchers.forEach(a=>{const h=a.asTag().toLowerCase(),p=this.getTagConfig(h);if(r[a.inverseName]||!this.isTagAllowed(h)||!this.canRenderChild(t,p))return;let y="";for(;s&&(u=a.match(s));){const{index:l,length:f,match:m,valid:A,void:E,...g}=u,L=a.propName+String(c);l>0&&(y+=s.slice(0,l)),A?(y+=E?`{{{${L}/}}}`:`{{{${L}}}}${m}{{{/${L}}}}`,this.keyIndex+=1,c+=1,n[L]={children:m,matcher:a,props:{...r,...g,key:this.keyIndex}}):y+=m,a.greedy?(s=y+s.slice(l+f),y=""):s=s.slice(l+(f||m.length))}a.greedy||(s=y+s)}),c===0?e:this.replaceTokens(s,n)}canRenderChild(e,t){return!e.tagName||!t.tagName||e.void?!1:e.children.length>0?e.children.includes(t.tagName):e.invalid.length>0&&e.invalid.includes(t.tagName)?!1:t.parent.length>0?t.parent.includes(e.tagName):!e.self&&e.tagName===t.tagName?!1:!!(e&&e.content&t.type)}convertLineBreaks(e){const{noHtml:t,disableLineBreaks:n}=this.props;if(t||n||e.match(/<((?:\/[ a-z]+)|(?:[ a-z]+\/))>/gi))return e;let r=e.replace(/\r\n/g,`
`);return r=r.replace(/\n{3,}/g,`


`),r=r.replace(/\n/g,"<br/>"),r}createContainer(e){var t;const r=(typeof global<"u"&&global.INTERWEAVE_SSR_POLYFILL||de)();if(!r)return;const s=(t=this.props.containerTagName)!==null&&t!==void 0?t:"body",c=s==="body"||s==="fragment"?r.body:r.createElement(s);return e.match(oe)||(c.innerHTML=this.convertLineBreaks(this.props.escapeHtml?re(e):e)),c}extractAttributes(e){const{allowAttributes:t}=this.props,n={};let r=0;return e.nodeType!==M||!e.attributes||([...e.attributes].forEach(s=>{const{name:c,value:u}=s,a=c.toLowerCase(),h=C[a]||C[c];if(!this.isSafe(e)||!a.match(le)&&(!t&&(!h||h===Q)||a.startsWith("on")||u.replace(/(\s|\0|&#x0([9AD]);)/,"").match(/(javascript|vbscript|livescript|xss):/i)))return;let p=a==="style"?this.extractStyleAttribute(e):u;h===I?p=!0:h===S?p=Number.parseFloat(String(p)):h!==Y&&(p=String(p)),n[Z[a]||a]=this.applyAttributeFilters(a,p),r+=1}),r===0)?null:n}extractStyleAttribute(e){const t={};return Array.from(e.style).forEach(n=>{const r=e.style[n];(typeof r=="string"||typeof r=="number")&&(t[n.replace(/-([a-z])/g,(s,c)=>String(c).toUpperCase())]=r)}),t}getTagConfig(e){const t={children:[],content:0,invalid:[],parent:[],self:!0,tagName:"",type:0,void:!1};return H[e]?{...t,...H[e],tagName:e}:t}isSafe(e){if(typeof HTMLAnchorElement<"u"&&e instanceof HTMLAnchorElement){const t=e.getAttribute("href");if(t!=null&&t.startsWith("#"))return!0;const n=e.protocol.toLowerCase();return n===":"||n==="http:"||n==="https:"||n==="mailto:"||n==="tel:"}return!0}isTagAllowed(e){return this.banned.has(e)||this.blocked.has(e)?!1:this.props.allowElements||this.allowed.has(e)}parse(){return this.container?this.parseNode(this.container,this.getTagConfig(this.container.nodeName.toLowerCase())):[]}parseNode(e,t){const{noHtml:n,noHtmlExceptMatchers:r,allowElements:s,transform:c,transformOnlyAllowList:u}=this.props;let a=[],h="";return[...e.childNodes].forEach(p=>{if(p.nodeType===M){const l=p.nodeName.toLowerCase(),f=this.getTagConfig(l);h&&(a.push(h),h="");const m=this.applyNodeFilters(l,p);if(!m)return;let A;if(c&&!(u&&!this.isTagAllowed(l))){this.keyIndex+=1;const E=this.keyIndex;A=this.parseNode(m,f);const g=c(m,A,f);if(g===null)return;if(typeof g<"u"){a.push(N.cloneElement(g,{key:E}));return}this.keyIndex=E-1}if(this.banned.has(l))return;if(!(n||r&&l!=="br")&&this.isTagAllowed(l)&&(s||this.canRenderChild(t,f))){var y;this.keyIndex+=1;const E=this.extractAttributes(m),g={tagName:l};E&&(g.attributes=E),f.void&&(g.selfClose=f.void),a.push(N.createElement($,{...g,key:this.keyIndex},(y=A)!==null&&y!==void 0?y:this.parseNode(m,f)))}else a=[...a,...this.parseNode(m,f.tagName?f:t)]}else if(p.nodeType===ie){const l=n&&!r?p.textContent:this.applyMatchers(p.textContent||"",t);Array.isArray(l)?a=[...a,...l]:h+=l}}),h&&a.push(h),a}replaceTokens(e,t){if(!e.includes("{{{"))return e;const n=[];let r=e,s=null;for(;s=r.match(ce);){const[c,u]=s,a=s.index,h=c.includes("/");a>0&&(n.push(r.slice(0,a)),r=r.slice(a));const{children:p,matcher:y,props:l}=t[u];let f;if(h)f=c.length,n.push(y.createElement(p,l));else{const m=r.match(new RegExp(`{{{/${u}}}}`));f=m.index+m[0].length,n.push(y.createElement(this.replaceTokens(r.slice(c.length,m.index),t),l))}r=r.slice(f)}return r.length>0&&n.push(r),n.length===0?"":n.length===1&&typeof n[0]=="string"?n[0]:n}}function ue(i){var e;const{attributes:t,className:n,containerTagName:r,content:s,emptyContent:c,parsedContent:u,tagName:a,noWrap:h}=i,p=(e=r??a)!==null&&e!==void 0?e:"span",y=p==="fragment"?!0:h;let l;if(u)l=u;else{const f=new z(s??"",i).parse();f.length>0&&(l=f)}return l||(l=c),y?N.createElement(N.Fragment,null,l):N.createElement($,{attributes:t,className:n,tagName:p},l)}function pe(i){const{attributes:e,className:t,content:n="",disableFilters:r=!1,disableMatchers:s=!1,emptyContent:c=null,filters:u=[],matchers:a=[],onAfterParse:h=null,onBeforeParse:p=null,tagName:y="span",noWrap:l=!1,...f}=i,m=s?[]:a,A=r?[]:u,E=p?[p]:[],g=h?[h]:[];m.forEach(v=>{v.onBeforeParse&&E.push(v.onBeforeParse.bind(v)),v.onAfterParse&&g.push(v.onAfterParse.bind(v))});const L=E.reduce((v,O)=>O(v,i),n??""),G=new z(L,f,m,A),B=g.reduce((v,O)=>O(v,i),G.parse());return N.createElement(ue,{attributes:e,className:t,containerTagName:i.containerTagName,emptyContent:c,noWrap:l,parsedContent:B.length===0?void 0:B,tagName:y})}const he=K("div")(({theme:i})=>({"& .ql-editor":{padding:"0px","& p:not(:last-child)":{marginBlockEnd:i.spacing(2)},"& td, th":{border:"1px solid #ddd",textAlign:"left",padding:"8px"}}})),me=({id:i,content:e})=>e?k.jsx(he,{className:"quill",id:i,children:k.jsx("div",{className:"ql-snow ql-disabled",children:k.jsx("div",{className:"ql-editor",children:k.jsx(pe,{content:e,noWrap:!0})})})}):null;export{me as T};
