import{r as n,j as e,s as S,T as C,b as f,N as I,m as F,eS as A,y as g}from"./index-Du6cLc2g.js";import{G as T}from"./Button-D6pY2JNh.js";import{F as M}from"./constants-CyQbYbhY.js";import{D as _,a as D}from"./DialogContent-BVO65bHL.js";import{D as E}from"./DialogTitle-DnHtd1CR.js";import{L as O}from"./ListItemButton-TZ0nPx2E.js";import{L as v}from"./ListItemText-DtIE91_b.js";import{D as G}from"./DialogActions-hH_AKLy2.js";import{L as y}from"./List-BxElNHcx.js";var L;(function(s){s.InappropriateContent="inappropriate-content",s.HateSpeech="hate-speech",s.FraudPlagiarism="fraud-plagiarism",s.Spam="spam",s.TargetedHarassment="targeted-harassment",s.FalseInformation="false-information"})(L||(L={}));const B=S(C)({fontSize:"small"}),N=S(y)({width:"100%",overflow:"auto",maxHeight:M}),H=({flags:s,onFlag:d,open:a,onClose:i,descriptionText:p="Select reason for flagging this item",title:u="Flag Item",cancelButtonText:l="Cancel",confirmButtonText:c="Flag",formatFlag:o})=>{const[r,m]=n.useState(),h=t=>()=>m(t),x=t=>o?o(t):t;return e.jsxs(_,{open:a,onClose:i,maxWidth:"sm",fullWidth:!0,children:[e.jsx(E,{children:u}),e.jsxs(D,{children:[e.jsx(B,{variant:"h6",children:p}),e.jsx(N,{children:s?.map(t=>e.jsx(O,{id:`flagListItem-${t}`,selected:r===t,onClick:h(t),children:e.jsx(v,{primary:x(t)})},t))})]}),e.jsxs(G,{children:[e.jsx(T,{onClick:i,variant:"text",children:l}),e.jsx(T,{color:"error",onClick:()=>d(r),disabled:!r,children:c})]})]})},P=n.createContext({}),q=({children:s})=>{const{t:d}=f(I.Messages),{t:a}=f(I.Builder),{t:i}=f(I.Common),{mutateAsync:p}=F(A()),[u,l]=n.useState(!1),[c,o]=n.useState(null),r=t=>{l(!0),o(t)},m=()=>{l(!1),o(null)},h=t=>{!c||!t?g.error("item id or flag type is not defined"):p({path:{itemId:c},body:{type:t}}).then(()=>{g.success(d("POST_ITEM_FLAG"))}).catch(j=>{g.error(j)}),m()},x=n.useMemo(()=>({openModal:r}),[]);return e.jsxs(P.Provider,{value:x,children:[e.jsx(H,{flags:Object.values(L),onFlag:h,open:u,onClose:m,descriptionText:a("FLAG_REASON_DESCRIPTION"),title:a("FLAG_MODAL_TITLE"),cancelButtonText:i("CANCEL.BUTTON_TEXT"),confirmButtonText:a("FLAG_MODAL_CONFIRM")}),s]})};export{q as F,P as a};
