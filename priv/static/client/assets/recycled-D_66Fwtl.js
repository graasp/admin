import{v as C,cK as O,cL as R,cM as B,cN as N,bu as L,o as M,cO as h,b as T,N as I,Z as f,j as t,cP as y,r as A,cQ as b,cR as U,cS as k,cT as P,S as E,cU as w,cV as F}from"./index-B_BHgQQY.js";import{O as v}from"./OldDeletedItemsNotice-DR5qPbe8.js";import{D as Y}from"./DeleteButton-DxOTZkGM.js";import{B as d}from"./langs-BKRoRoQy.js";import{G as $}from"./Button-C2DML4l_.js";import{C as G}from"./CancelButton-DsqMvRyV.js";import{D as H,a as K}from"./DialogContent-BLGJ1kXP.js";import{D as q}from"./DialogTitle-BL-ZXwRQ.js";import{D as z}from"./DialogContentText-X3gecpnz.js";import{D as Q}from"./DialogActions-B4c7iV3e.js";import{E as Z}from"./ErrorAlert-BzdoD583.js";import{T as V}from"./Tooltip-CY4gBTjx.js";import{I as W}from"./IconButton-t5WdCoTE.js";import{L as J}from"./LoadingScreen-B7yW9AZn.js";import{u as S,S as X,a as tt,b as et,D as ot}from"./SelectionToolbar-DgkJCewa.js";import{I as rt}from"./ItemCard-NGB9iUow.js";import{B as it}from"./Button-4ORflwU5.js";import{A as st}from"./Alert-af15MLjr.js";import"./useLocalStorage-CP_azpUr.js";import"./Trans-1gex2Erj.js";import"./MenuItem-i4R53H8t.js";import"./listItemTextClasses-DkicRqsl.js";import"./ButtonBase-ylRkSt5R.js";import"./isFocusVisible-B8k4qzLc.js";import"./dividerClasses-Bk0V9OT7.js";import"./ListItemIcon-BTN91sVG.js";import"./trash-CYNfI7WN.js";import"./useSlot-D6B6Ly0P.js";import"./Paper-e3G0y0Go.js";import"./Modal-DNRlalor.js";import"./createChainedFunction-BO_9K8Jh.js";import"./utils-NE7yIt1Q.js";import"./useControlled-BMwunPLn.js";import"./Grow-BvZTf0bq.js";import"./CircularProgress-_2M16NEZ.js";import"./Skeleton-Bf_dEhrE.js";import"./x-B2OknFaz.js";import"./Thumbnail-CeEWDJof.js";import"./StyledBaseComponents-0ZpECQxB.js";import"./ItemIcon-aRVTEBTL.js";import"./createSvgIcon-CR_wPvPv.js";import"./mimeTypes-Bpmm_hmI.js";import"./fileItem-Bbp5pYua.js";import"./itemType-D9KQEJss.js";import"./link-nLlUeqkm.js";import"./text-align-start-BvNJbDOj.js";import"./Box-CXXiFbSb.js";import"./Grid-DwBZvdO2.js";import"./isMuiElement-BdxtYttK.js";import"./Card-Rs4ggG5A.js";import"./TextDisplay-DKy1jHXb.js";import"./capsule-ocBuEWIN.js";import"./date-BPVbmzn6.js";import"./differenceInMinutes-BbWlujZi.js";import"./normalizeDates-Bl5IZJGD.js";import"./toDate-BXq0HhWu.js";import"./differenceInCalendarDays-DiZ3ZI30.js";import"./getTimezoneOffsetInMilliseconds-CkMJBntH.js";import"./differenceInSeconds-DNsH8fUT.js";import"./differenceInCalendarMonths-C8dGLoK4.js";import"./linkItem-VVVu8jA7.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nt=[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]],at=C("undo-2",nt),ct=({pageSize:e,page:o})=>{const r=new URLSearchParams;return r.set("page",(o??1).toString()),e&&r.set("pageSize",e.toString()),`${O}/recycled?${r.toString()}`},lt=async e=>R(()=>B.get(`${N}/${ct(e)}`).then(({data:o})=>o)),mt=e=>L({queryKey:M.current().infiniteRecycledItemData(),queryFn:({pageParam:o})=>lt({page:o??1,...e}),getNextPageParam:(o,r)=>o.data.length<(e?.pageSize??h)?void 0:r.length+1,refetchOnWindowFocus:()=>!1,initialPageParam:1}),_="alert-dialog-title",g="alert-dialog-description",dt=({items:e,open:o=!1,handleClose:r,onConfirm:n})=>{const{t:a}=T(I.Builder),{mutate:m}=f.useDeleteItems(),c=e.map(({id:i})=>i),l=()=>{m(c),n?.(),r()},p=e.toSorted((i,u)=>i.name.toLowerCase()>u.name.toLowerCase()?1:-1).map(({name:i})=>t.jsx("li",{children:i},i));return t.jsxs(H,{open:o,onClose:r,"aria-labelledby":_,"aria-describedby":g,children:[t.jsx(q,{id:_,children:a(d.DELETE_ITEM_MODAL_TITLE)}),t.jsx(K,{children:t.jsxs(z,{id:g,children:[a(d.DELETE_ITEM_MODAL_CONTENT,{count:c.length}),t.jsx("ul",{children:p})]})}),t.jsxs(Q,{children:[t.jsx(G,{onClick:r}),t.jsx($,{id:y,onClick:l,color:"error",autoFocus:!0,variant:"text",children:a(d.DELETE_ITEM_MODAL_CONFIRM_BUTTON)})]})]})},D=({items:e,color:o,id:r,type:n,onConfirm:a,onClose:m})=>{const{t:c}=T(I.Builder),[l,p]=A.useState(!1),i=()=>{p(!0)},u=()=>{p(!1),m?.()},s=c(d.DELETE_BUTTON,{count:e.length});return t.jsxs(t.Fragment,{children:[t.jsx(Y,{onClick:i,text:s,"aria-label":s,id:r,color:o,type:n,className:b},s),t.jsx(dt,{onConfirm:a,open:l,handleClose:u,items:e})]})},j=({itemIds:e,color:o="default",id:r,onClick:n})=>{const{t:a}=T(I.Builder),{mutate:m}=f.useRestoreItems(),c=()=>{m(e),n?.()},l=a(d.RESTORE_ITEM_BUTTON,{count:e.length});return t.jsx(V,{title:l,children:t.jsx("span",{children:t.jsx(W,{id:r,"aria-label":l,color:o,className:U,onClick:c,children:t.jsx(at,{})})})})},pt=({items:e})=>{const{selectedIds:o,clearSelection:r}=S();return t.jsx(X,{children:t.jsxs(t.Fragment,{children:[t.jsx(j,{id:k,itemIds:o,onClick:r}),t.jsx(D,{id:P,items:e.filter(({id:n})=>o.includes(n)),onConfirm:r})]})})},x="recycle-items-container";function fe(){return t.jsx(tt,{children:t.jsx(ut,{})})}function ut(){const{t:e}=T(I.Builder),{data:o,fetchNextPage:r,isLoading:n,hasNextPage:a,isFetching:m}=mt({pageSize:h}),{selectedIds:c,toggleSelection:l}=S(),p=et({containerId:x});if(o?.pages?.length){if(o.pages[0].data.length){const i=o.pages.flatMap(s=>s.data),u=!!(c.length&&i.length);return t.jsxs(t.Fragment,{children:[t.jsxs(E,{gap:1,height:"100%",children:[t.jsx(v,{forceOpen:!0}),t.jsx(E,{alignItems:"space-between",direction:"column",gap:1,width:"100%",children:u?t.jsx(pt,{items:i}):null}),t.jsxs(ot,{id:x,children:[i.map(s=>t.jsx(E,{mb:1,children:t.jsx(rt,{item:s,onThumbnailClick:()=>l(s.id),isSelected:c.includes(s.id),footer:t.jsxs(E,{justifyContent:"right",direction:"row",children:[t.jsx(j,{itemIds:[s.id]}),t.jsx(D,{items:[s]})]})})},s.id)),a&&t.jsx(E,{textAlign:"center",alignItems:"center",children:t.jsx(it,{variant:"outlined",onClick:()=>r(),role:"feed",loading:m,children:e(d.HOME_SCREEN_LOAD_MORE_BUTTON)})})]})]}),p]})}return t.jsx(st,{severity:"info",id:w,children:e(d.TRASH_NO_ITEM)})}return n?t.jsx(J,{}):t.jsx(Z,{id:F})}export{fe as component};
