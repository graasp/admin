import{x as yr,w as Or,r as F,z as jr,j as e,s as we,B as Dr,bi as fe,E as Nr,bj as Pr,bn as Ct,v as It,h as me,Z as ye,b as y,N as O,T as G,h0 as wr,h1 as kr,h2 as Ur,h3 as Hr,h4 as Ie,S as q,h5 as Fr,bE as er,i as Vr,$ as Gr,h6 as $r,A as Ce,h7 as Kr,h8 as qr,h9 as zr,ha as Wr,hb as Qr,hc as Yr,hd as Xr,he as Zr,hf as Jr,hg as en,gP as tn,k as Ve,m as Me,hh as rn,e2 as Oe,hi as nn,hj as sn,hk as an,hl as on,hm as ln,hn as dn,ho as un,hp as cn,a6 as hn,hq as fn,hr as pn,hs as tr,eo as mn,ht as _n,hu as En,hv as gn,hw as Tn,hx as rr,hy as st,hz as In,d as nr,hA as Sn,hB as vn,hC as xn,hD as Rn,hE as Cn,hF as Mn,hG as Ln,hH as bn,hI as Bn,e1 as An,c3 as ir,hJ as yn,hK as sr,hL as On,hM as jn,y as ze,hN as Dn,hO as ar,hP as Nn,hQ as Pn,t as wn,C as xe,eL as or,hR as kn,hS as Un,hT as Mt,hU as Hn,hV as Fn,hW as Vn,hX as Gn,aM as Lt,hY as $n,hZ as Kn,h_ as qn,h$ as lr,i0 as dr,i1 as zn,i2 as Wn,fX as Qn,i3 as Yn,i4 as Xn,i5 as Zn}from"./index-B_BHgQQY.js";import{u as Jn,a as ei,P as ti,b as ri}from"./hooks-CjvQ3Yqk.js";import{u as We}from"./useModalStatus-CF1QQN94.js";import{B as T}from"./langs-BKRoRoQy.js";import{a as tt,I as Ye}from"./itemLogin-BRGmCLqv.js";import{A as Le}from"./Alert-af15MLjr.js";import{a as ni,b as ii,B as ce}from"./Button-4ORflwU5.js";import{D as be,a as Be}from"./DialogContent-BLGJ1kXP.js";import{D as De}from"./DialogTitle-BL-ZXwRQ.js";import{T as ur}from"./Trans-1gex2Erj.js";import{D as Ne}from"./DialogActions-B4c7iV3e.js";import{T as cr,H as si}from"./HideSettingCheckbox-DBhwBIPL.js";import{L as ai}from"./Loader-CLxvJV4h.js";import{S as hr,T as fr,b as oi}from"./TextField-CCzZwtaB.js";import{M as Re}from"./MenuItem-i4R53H8t.js";import{u as rt}from"./OutletContext-BGjGZ_Uz.js";import{I as je}from"./IconButton-t5WdCoTE.js";import{T as pr}from"./trash-2-D4QstvMZ.js";import{A as Et}from"./AlertTitle-CZRu3C6o.js";import{I as li,E as di,C as ui,a as ci}from"./EditButton-ZZbYvNZm.js";import{D as Qe}from"./DialogContentText-X3gecpnz.js";import{a as hi}from"./ItemIcon-aRVTEBTL.js";import{u as fi}from"./index.esm-D6N0kWEX.js";import{t as pi}from"./index-BzmWlSRn.js";import{a as mr}from"./invitation-DwDubmJZ.js";import{G as Pe}from"./Button-C2DML4l_.js";import{S as mi}from"./Select-CwIsZUkW.js";import{P as St}from"./permissionLevel-BOsSKewz.js";import{B as Ge}from"./Box-CXXiFbSb.js";import{i as _i}from"./isEmail-CP0_oc0v.js";import{g as Ei}from"./getValidReactChildren-BkgtYZbS.js";import{C as gi}from"./chevron-down-D3HPGb0W.js";import{P as Ti,T as Fe}from"./Tooltip-CY4gBTjx.js";import{G as Ii}from"./Grow-BvZTf0bq.js";import{P as Si}from"./Paper-e3G0y0Go.js";import{u as vi,b as xi}from"./ButtonBase-ylRkSt5R.js";import{g as Ri,b as at}from"./Modal-DNRlalor.js";import{a as Ci,M as Mi}from"./Menu-C45l_y2r.js";import{g as Li}from"./index-CAxbq8YW.js";import{E as _r}from"./ErrorAlert-BzdoD583.js";import{C as vt}from"./CancelButton-DsqMvRyV.js";import{a as Je,b as ie,T as Er,c as gr}from"./TableRow-iBTETprB.js";import{T as Tr}from"./TableHead-CbzCS9fp.js";import{S as Se}from"./Skeleton-Bf_dEhrE.js";import{C as bi}from"./check-D07k9qIq.js";import{f as Bi}from"./date-BPVbmzn6.js";import{a as Ai,T as bt}from"./Tabs-D8U24ZxU.js";import{B as yi}from"./Badge-DAnJA1M3.js";import{u as Oi}from"./LayoutContext-DvWbprYl.js";import{P as ji,B as Di}from"./PlayIcon-DlP8i5u8.js";import{L as Ni}from"./LibraryIcon-Us5FpFqN.js";import{r as Ir}from"./index-Chjiymov.js";import{X as Pi}from"./x-B2OknFaz.js";import{L as Bt}from"./ListItemIcon-BTN91sVG.js";import{P as At}from"./pen-DzBOH2fN.js";import{L as yt}from"./ListItemText-Db53d-gu.js";import{T as wi}from"./trash-CYNfI7WN.js";import{L as ki}from"./Link-DLKBSA2n.js";import{b as Ui}from"./url-DDYejV_U.js";import{D as Ot}from"./Divider-DwBPlmwR.js";import"./itemType-D9KQEJss.js";import"./useSlot-D6B6Ly0P.js";import"./createSvgIcon-CR_wPvPv.js";import"./CircularProgress-_2M16NEZ.js";import"./ItemSettingProperty-DyTew-Ej.js";import"./Switch-BMLgWMtw.js";import"./SwitchBase-BpBcR0Ys.js";import"./FormControl-DkBPBeJg.js";import"./isMuiElement-BdxtYttK.js";import"./useControlled-BMwunPLn.js";import"./eye-off-WWB42nol.js";import"./eye-c2LSV0oY.js";import"./Popover-CgVTRYfe.js";import"./listItemTextClasses-DkicRqsl.js";import"./dividerClasses-Bk0V9OT7.js";import"./Breadcrumbs-CifeKTUg.js";import"./StyledBaseComponents-0ZpECQxB.js";import"./mimeTypes-Bpmm_hmI.js";import"./fileItem-Bbp5pYua.js";import"./link-nLlUeqkm.js";import"./text-align-start-BvNJbDOj.js";import"./utils-CHXX7DhN.js";import"./isFocusVisible-B8k4qzLc.js";import"./utils-NE7yIt1Q.js";import"./createChainedFunction-BO_9K8Jh.js";import"./List-Cf8ruq7c.js";import"./differenceInMinutes-BbWlujZi.js";import"./normalizeDates-Bl5IZJGD.js";import"./toDate-BXq0HhWu.js";import"./differenceInCalendarDays-DiZ3ZI30.js";import"./getTimezoneOffsetInMilliseconds-CkMJBntH.js";import"./differenceInSeconds-DNsH8fUT.js";import"./differenceInCalendarMonths-C8dGLoK4.js";import"./usePreviousProps-WLnL_Kyw.js";function Hi(t){return Or("MuiButtonGroup",t)}const D=yr("MuiButtonGroup",["root","contained","outlined","text","disableElevation","disabled","firstButton","fullWidth","horizontal","vertical","colorPrimary","colorSecondary","grouped","groupedHorizontal","groupedVertical","groupedText","groupedTextHorizontal","groupedTextVertical","groupedTextPrimary","groupedTextSecondary","groupedOutlined","groupedOutlinedHorizontal","groupedOutlinedVertical","groupedOutlinedPrimary","groupedOutlinedSecondary","groupedContained","groupedContainedHorizontal","groupedContainedVertical","groupedContainedPrimary","groupedContainedSecondary","lastButton","middleButton"]),Fi=(t,i)=>{const{ownerState:r}=t;return[{[`& .${D.grouped}`]:i.grouped},{[`& .${D.grouped}`]:i[`grouped${fe(r.orientation)}`]},{[`& .${D.grouped}`]:i[`grouped${fe(r.variant)}`]},{[`& .${D.grouped}`]:i[`grouped${fe(r.variant)}${fe(r.orientation)}`]},{[`& .${D.grouped}`]:i[`grouped${fe(r.variant)}${fe(r.color)}`]},{[`& .${D.firstButton}`]:i.firstButton},{[`& .${D.lastButton}`]:i.lastButton},{[`& .${D.middleButton}`]:i.middleButton},i.root,i[r.variant],r.disableElevation===!0&&i.disableElevation,r.fullWidth&&i.fullWidth,r.orientation==="vertical"&&i.vertical]},Vi=t=>{const{classes:i,color:r,disabled:s,disableElevation:u,fullWidth:a,orientation:h,variant:l}=t,o={root:["root",l,h,a&&"fullWidth",u&&"disableElevation",`color${fe(r)}`],grouped:["grouped",`grouped${fe(h)}`,`grouped${fe(l)}`,`grouped${fe(l)}${fe(h)}`,`grouped${fe(l)}${fe(r)}`,s&&"disabled"],firstButton:["firstButton"],lastButton:["lastButton"],middleButton:["middleButton"]};return Nr(o,Hi,i)},Gi=we("div",{name:"MuiButtonGroup",slot:"Root",overridesResolver:Fi})(Pr(({theme:t})=>({display:"inline-flex",borderRadius:(t.vars||t).shape.borderRadius,variants:[{props:{variant:"contained"},style:{boxShadow:(t.vars||t).shadows[2]}},{props:{disableElevation:!0},style:{boxShadow:"none"}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{orientation:"vertical"},style:{flexDirection:"column",[`& .${D.lastButton},& .${D.middleButton}`]:{borderTopRightRadius:0,borderTopLeftRadius:0},[`& .${D.firstButton},& .${D.middleButton}`]:{borderBottomRightRadius:0,borderBottomLeftRadius:0}}},{props:{orientation:"horizontal"},style:{[`& .${D.firstButton},& .${D.middleButton}`]:{borderTopRightRadius:0,borderBottomRightRadius:0},[`& .${D.lastButton},& .${D.middleButton}`]:{borderTopLeftRadius:0,borderBottomLeftRadius:0}}},{props:{variant:"text",orientation:"horizontal"},style:{[`& .${D.firstButton},& .${D.middleButton}`]:{borderRight:t.vars?`1px solid ${t.alpha(t.vars.palette.common.onBackground,.23)}`:`1px solid ${t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${D.disabled}`]:{borderRight:`1px solid ${(t.vars||t).palette.action.disabled}`}}}},{props:{variant:"text",orientation:"vertical"},style:{[`& .${D.firstButton},& .${D.middleButton}`]:{borderBottom:t.vars?`1px solid ${t.alpha(t.vars.palette.common.onBackground,.23)}`:`1px solid ${t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${D.disabled}`]:{borderBottom:`1px solid ${(t.vars||t).palette.action.disabled}`}}}},...Object.entries(t.palette).filter(Ct()).flatMap(([i])=>[{props:{variant:"text",color:i},style:{[`& .${D.firstButton},& .${D.middleButton}`]:{borderColor:t.alpha((t.vars||t).palette[i].main,.5)}}}]),{props:{variant:"outlined",orientation:"horizontal"},style:{[`& .${D.firstButton},& .${D.middleButton}`]:{borderRightColor:"transparent","&:hover":{borderRightColor:"currentColor"}},[`& .${D.lastButton},& .${D.middleButton}`]:{marginLeft:-1}}},{props:{variant:"outlined",orientation:"vertical"},style:{[`& .${D.firstButton},& .${D.middleButton}`]:{borderBottomColor:"transparent","&:hover":{borderBottomColor:"currentColor"}},[`& .${D.lastButton},& .${D.middleButton}`]:{marginTop:-1}}},{props:{variant:"contained",orientation:"horizontal"},style:{[`& .${D.firstButton},& .${D.middleButton}`]:{borderRight:`1px solid ${(t.vars||t).palette.grey[400]}`,[`&.${D.disabled}`]:{borderRight:`1px solid ${(t.vars||t).palette.action.disabled}`}}}},{props:{variant:"contained",orientation:"vertical"},style:{[`& .${D.firstButton},& .${D.middleButton}`]:{borderBottom:`1px solid ${(t.vars||t).palette.grey[400]}`,[`&.${D.disabled}`]:{borderBottom:`1px solid ${(t.vars||t).palette.action.disabled}`}}}},...Object.entries(t.palette).filter(Ct(["dark"])).map(([i])=>({props:{variant:"contained",color:i},style:{[`& .${D.firstButton},& .${D.middleButton}`]:{borderColor:(t.vars||t).palette[i].dark}}}))],[`& .${D.grouped}`]:{minWidth:40,boxShadow:"none",props:{variant:"contained"},style:{"&:hover":{boxShadow:"none"}}}}))),$i=F.forwardRef(function(i,r){const s=jr({props:i,name:"MuiButtonGroup"}),{children:u,className:a,color:h="primary",component:l="div",disabled:o=!1,disableElevation:n=!1,disableFocusRipple:p=!1,disableRipple:f=!1,fullWidth:m=!1,orientation:g="horizontal",size:E="medium",variant:I="outlined",...C}=s,x={...s,color:h,component:l,disabled:o,disableElevation:n,disableFocusRipple:p,disableRipple:f,fullWidth:m,orientation:g,size:E,variant:I},j=Vi(x),R=F.useMemo(()=>({className:j.grouped,color:h,disabled:o,disableElevation:n,disableFocusRipple:p,disableRipple:f,fullWidth:m,size:E,variant:I}),[h,o,n,p,f,m,E,I,j.grouped]),ee=Ei(u),te=ee.length,Q=L=>{const d=L===0,c=L===te-1;return d&&c?"":d?j.firstButton:c?j.lastButton:j.middleButton};return e.jsx(Gi,{as:l,role:"group",className:Dr(j.root,a),ref:r,ownerState:x,...C,children:e.jsx(ni.Provider,{value:R,children:ee.map((L,d)=>e.jsx(ii.Provider,{value:Q(d),children:L},d))})})});function jt(t){return t.substring(2).toLowerCase()}function Ki(t,i){return i.documentElement.clientWidth<t.clientX||i.documentElement.clientHeight<t.clientY}function qi(t){const{children:i,disableReactTree:r=!1,mouseEvent:s="onClick",onClickAway:u,touchEvent:a="onTouchEnd"}=t,h=F.useRef(!1),l=F.useRef(null),o=F.useRef(!1),n=F.useRef(!1);F.useEffect(()=>(setTimeout(()=>{o.current=!0},0),()=>{o.current=!1}),[]);const p=vi(Ri(i),l),f=xi(E=>{const I=n.current;n.current=!1;const C=at(l.current);if(!o.current||!l.current||"clientX"in E&&Ki(E,C))return;if(h.current){h.current=!1;return}let x;E.composedPath?x=E.composedPath().includes(l.current):x=!C.documentElement.contains(E.target)||l.current.contains(E.target),!x&&(r||!I)&&u(E)}),m=E=>I=>{n.current=!0;const C=i.props[E];C&&C(I)},g={ref:p};return a!==!1&&(g[a]=m(a)),F.useEffect(()=>{if(a!==!1){const E=jt(a),I=at(l.current),C=()=>{h.current=!0};return I.addEventListener(E,f),I.addEventListener("touchmove",C),()=>{I.removeEventListener(E,f),I.removeEventListener("touchmove",C)}}},[f,a]),s!==!1&&(g[s]=m(s)),F.useEffect(()=>{if(s!==!1){const E=jt(s),I=at(l.current);return I.addEventListener(E,f),()=>{I.removeEventListener(E,f)}}},[f,s]),F.cloneElement(i,g)}/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zi=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],Wi=It("qr-code",zi);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qi=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],Yi=It("refresh-ccw",Qi);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xi=[["path",{d:"M9 3H5a2 2 0 0 0-2 2v4m6-6h10a2 2 0 0 1 2 2v4M9 3v18m0 0h10a2 2 0 0 0 2-2V9M9 21H5a2 2 0 0 1-2-2V9m0 0h18",key:"gugj83"}]],Zi=It("table-2",Xi);function Ji({itemId:t}){const{data:i}=me.useItemLoginSchema({itemId:t}),{mutate:r,isPending:s}=ye.useDeleteItemLoginSchema(),{data:u}=Jn(t),{isOpen:a,closeModal:h,openModal:l}=We(),{t:o}=y(O.Common),{t:n}=y(O.Builder),p=()=>{r({itemId:t})},f=()=>{u?.length?l():p()};return i&&i.status!==tt.Active&&u?e.jsxs(e.Fragment,{children:[e.jsx(Le,{severity:"info",action:e.jsx(ce,{color:"error",size:"small",variant:"outlined",onClick:f,children:n(T.DELETE_BTN)}),children:u.length?n(T.DELETE_GUESTS_ALERT_TEXT):n(T.DELETE_ITEM_LOGIN_SCHEMA_ALERT_TEXT)}),e.jsxs(be,{onClose:h,open:a,children:[e.jsx(De,{children:n(T.DELETE_GUESTS_MODAL_TITLE,{count:u.length})}),e.jsxs(Be,{children:[e.jsx(G,{children:e.jsx(ur,{t:n,i18nKey:T.DELETE_GUESTS_MODAL_CONTENT,components:{1:e.jsx("strong",{})}})}),e.jsx("ul",{children:u.map(({account:m})=>e.jsx("li",{children:m.name},m.id))})]}),e.jsxs(Ne,{children:[e.jsx(ce,{size:"small",variant:"text",color:"primary",onClick:h,children:o("CANCEL.BUTTON_TEXT")}),e.jsx(ce,{id:wr,color:"error",size:"small",onClick:p,loading:s,children:n(T.DELETE_GUESTS_MODAL_DELETE_BUTTON)})]})]})]}):null}const{usePutItemLoginSchema:es}=ye,ts=({itemId:t,itemLoginSchema:i,isDisabled:r,edit:s=!1})=>{const{t:u}=y(O.Builder),{mutate:a}=es(),h=l=>{const o=l.target.value;a({itemId:t,type:o})};return i?s?e.jsxs(hr,{value:i?.type||Ye.Username,onChange:h,disabled:r,id:kr,size:"small",children:[e.jsx(Re,{value:Ye.Username,children:u(T.ITEM_SETTINGS_VISIBILITY_PSEUDONYMIZED_SCHEMA_PSEUDONYM_LABEL)}),e.jsx(Re,{value:Ye.UsernameAndPassword,children:u(T.ITEM_SETTINGS_VISIBILITY_PSEUDONYMIZED_SCHEMA_PSEUDONYM_AND_PASSWORD_LABEL)})]}):e.jsx("span",{style:{fontWeight:"bold"},children:i?.type===Ye.Username?u(T.ITEM_SETTINGS_VISIBILITY_PSEUDONYMIZED_SCHEMA_PSEUDONYM_LABEL):u(T.ITEM_SETTINGS_VISIBILITY_PSEUDONYMIZED_SCHEMA_PSEUDONYM_AND_PASSWORD_LABEL)}):null},rs=({isOpen:t,newVisibility:i,onClose:r,onValidate:s})=>{const{t:u}=y(O.Builder);if(!i)return null;const a=async()=>{s(i.value)};return e.jsxs(be,{open:t,children:[e.jsx(De,{children:e.jsx(G,{variant:"h3",children:u(T.UPDATE_VISIBILITY_MODAL_TITLE)})}),e.jsx(Be,{children:e.jsx(G,{children:u(T.UPDATE_VISIBILITY_MODAL_DESCRIPTION)})}),e.jsxs(Ne,{children:[e.jsx(ce,{"data-cy":Ur,onClick:r,variant:"outlined",children:u(T.CANCEL_BUTTON)}),e.jsx(ce,{"data-cy":Hr,onClick:a,variant:"contained",children:u(T.UPDATE_VISIBILITY_MODAL_VALIDATE_BUTTON,{visibility:i.name})})]})]})},ns=({itemId:t,visibility:i,updateVisibility:r})=>{const{t:s}=y(O.Builder),{data:u}=ei(t),[a,h]=F.useState(),l={[Ie.ITEM_LOGIN.name]:s(T.ITEM_SETTINGS_VISIBILITY_PSEUDONYMIZED_LABEL),[Ie.ITEM_PUBLIC.name]:s(T.ITEM_SETTINGS_VISIBILITY_PUBLIC_INFORMATIONS),[Ie.ITEM_PRIVATE.name]:s(T.ITEM_SETTINGS_VISIBILITY_PRIVATE_LABEL)},o=f=>{i===Ie.ITEM_PUBLIC.name&&u===ti.Published?h({name:l[f],value:f}):r(f)},n=()=>h(void 0);return{isModalOpen:!!a,pendingVisibility:a,onCloseModal:n,onValidateModal:f=>{n(),r(f)},onVisibilityChange:o}},is=({item:t,edit:i})=>{const{t:r}=y(O.Builder),{visibility:s,isDisabled:u,itemLoginSchema:a,isLoading:h,updateVisibility:l}=ri(t),{isModalOpen:o,pendingVisibility:n,onCloseModal:p,onValidateModal:f,onVisibilityChange:m}=ns({itemId:t.id,visibility:s,updateVisibility:l});if(h)return e.jsx(ai,{});const g=()=>{switch(s){case Ie.ITEM_LOGIN.name:return e.jsxs(e.Fragment,{children:[r(T.ITEM_SETTINGS_VISIBILITY_PSEUDONYMIZED_SCHEMA_SELECT_MESSAGE),e.jsx(ts,{itemLoginSchema:a,isDisabled:u,itemId:t.id,edit:i})]});case Ie.ITEM_PUBLIC.name:return r(T.ITEM_SETTINGS_VISIBILITY_PUBLIC_INFORMATIONS);case Ie.ITEM_PRIVATE.name:default:return r(T.ITEM_SETTINGS_VISIBILITY_PRIVATE_INFORMATION)}};return e.jsxs(e.Fragment,{children:[e.jsxs(q,{direction:"row",alignItems:"center",gap:1,children:[o&&e.jsx(rs,{isOpen:o,newVisibility:n,onClose:p,onValidate:f}),i&&e.jsxs(hr,{value:s,onChange:E=>m(E.target.value),disabled:u,id:Fr,size:"small",children:[e.jsx(Re,{value:Ie.ITEM_PRIVATE.name,children:r(T.ITEM_SETTINGS_VISIBILITY_PRIVATE_LABEL)}),e.jsx(Re,{value:Ie.ITEM_LOGIN.name,children:r(T.ITEM_SETTINGS_VISIBILITY_PSEUDONYMIZED_LABEL)}),e.jsx(Re,{value:Ie.ITEM_PUBLIC.name,children:r(T.ITEM_SETTINGS_VISIBILITY_PUBLIC_LABEL)})]}),g()]}),u&&e.jsx(Le,{severity:"info",children:r(T.ITEM_SETTINGS_VISIBILITY_CANNOT_EDIT_PARENT_MESSAGE)})]})};var Ze={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/var ss=Ze.exports,Dt;function as(){return Dt||(Dt=1,(function(t,i){((r,s)=>{t.exports=s()})(ss,function r(){var s=typeof self<"u"?self:typeof window<"u"?window:s!==void 0?s:{},u,a=!s.document&&!!s.postMessage,h=s.IS_PAPA_WORKER||!1,l={},o=0,n={};function p(d){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(c){var _=te(c);_.chunkSize=parseInt(_.chunkSize),c.step||c.chunk||(_.chunkSize=null),this._handle=new I(_),(this._handle.streamer=this)._config=_}).call(this,d),this.parseChunk=function(c,_){var v=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<v){let b=this._config.newline;b||(S=this._config.quoteChar||'"',b=this._handle.guessLineEndings(c,S)),c=[...c.split(b).slice(v)].join(b)}this.isFirstChunk&&L(this._config.beforeFirstChunk)&&(S=this._config.beforeFirstChunk(c))!==void 0&&(c=S),this.isFirstChunk=!1,this._halted=!1;var v=this._partialLine+c,S=(this._partialLine="",this._handle.parse(v,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(c=S.meta.cursor,v=(this._finished||(this._partialLine=v.substring(c-this._baseIndex),this._baseIndex=c),S&&S.data&&(this._rowCount+=S.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),h)s.postMessage({results:S,workerId:n.WORKER_ID,finished:v});else if(L(this._config.chunk)&&!_){if(this._config.chunk(S,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=S=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(S.data),this._completeResults.errors=this._completeResults.errors.concat(S.errors),this._completeResults.meta=S.meta),this._completed||!v||!L(this._config.complete)||S&&S.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),v||S&&S.meta.paused||this._nextChunk(),S}this._halted=!0},this._sendError=function(c){L(this._config.error)?this._config.error(c):h&&this._config.error&&s.postMessage({workerId:n.WORKER_ID,error:c,finished:!1})}}function f(d){var c;(d=d||{}).chunkSize||(d.chunkSize=n.RemoteChunkSize),p.call(this,d),this._nextChunk=a?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(_){this._input=_,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(c=new XMLHttpRequest,this._config.withCredentials&&(c.withCredentials=this._config.withCredentials),a||(c.onload=Q(this._chunkLoaded,this),c.onerror=Q(this._chunkError,this)),c.open(this._config.downloadRequestBody?"POST":"GET",this._input,!a),this._config.downloadRequestHeaders){var _,v=this._config.downloadRequestHeaders;for(_ in v)c.setRequestHeader(_,v[_])}var S;this._config.chunkSize&&(S=this._start+this._config.chunkSize-1,c.setRequestHeader("Range","bytes="+this._start+"-"+S));try{c.send(this._config.downloadRequestBody)}catch(b){this._chunkError(b.message)}a&&c.status===0&&this._chunkError()}},this._chunkLoaded=function(){c.readyState===4&&(c.status<200||400<=c.status?this._chunkError():(this._start+=this._config.chunkSize||c.responseText.length,this._finished=!this._config.chunkSize||this._start>=(_=>(_=_.getResponseHeader("Content-Range"))!==null?parseInt(_.substring(_.lastIndexOf("/")+1)):-1)(c),this.parseChunk(c.responseText)))},this._chunkError=function(_){_=c.statusText||_,this._sendError(new Error(_))}}function m(d){(d=d||{}).chunkSize||(d.chunkSize=n.LocalChunkSize),p.call(this,d);var c,_,v=typeof FileReader<"u";this.stream=function(S){this._input=S,_=S.slice||S.webkitSlice||S.mozSlice,v?((c=new FileReader).onload=Q(this._chunkLoaded,this),c.onerror=Q(this._chunkError,this)):c=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var S=this._input,b=(this._config.chunkSize&&(b=Math.min(this._start+this._config.chunkSize,this._input.size),S=_.call(S,this._start,b)),c.readAsText(S,this._config.encoding));v||this._chunkLoaded({target:{result:b}})},this._chunkLoaded=function(S){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(S.target.result)},this._chunkError=function(){this._sendError(c.error)}}function g(d){var c;p.call(this,d=d||{}),this.stream=function(_){return c=_,this._nextChunk()},this._nextChunk=function(){var _,v;if(!this._finished)return _=this._config.chunkSize,c=_?(v=c.substring(0,_),c.substring(_)):(v=c,""),this._finished=!c,this.parseChunk(v)}}function E(d){p.call(this,d=d||{});var c=[],_=!0,v=!1;this.pause=function(){p.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){p.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(S){this._input=S,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){v&&c.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),c.length?this.parseChunk(c.shift()):_=!0},this._streamData=Q(function(S){try{c.push(typeof S=="string"?S:S.toString(this._config.encoding)),_&&(_=!1,this._checkIsFinished(),this.parseChunk(c.shift()))}catch(b){this._streamError(b)}},this),this._streamError=Q(function(S){this._streamCleanUp(),this._sendError(S)},this),this._streamEnd=Q(function(){this._streamCleanUp(),v=!0,this._streamData("")},this),this._streamCleanUp=Q(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function I(d){var c,_,v,S,b=Math.pow(2,53),z=-b,oe=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,le=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,w=this,Y=0,B=0,de=!1,N=!1,k=[],M={data:[],errors:[],meta:{}};function re(U){return d.skipEmptyLines==="greedy"?U.join("").trim()==="":U.length===1&&U[0].length===0}function J(){if(M&&v&&(pe("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+n.DefaultDelimiter+"'"),v=!1),d.skipEmptyLines&&(M.data=M.data.filter(function(A){return!re(A)})),ae()){let A=function(Z,ne){L(d.transformHeader)&&(Z=d.transformHeader(Z,ne)),k.push(Z)};if(M)if(Array.isArray(M.data[0])){for(var U=0;ae()&&U<M.data.length;U++)M.data[U].forEach(A);M.data.splice(0,1)}else M.data.forEach(A)}function V(A,Z){for(var ne=d.header?{}:[],$=0;$<A.length;$++){var K=$,H=A[$],H=((_e,P)=>(W=>(d.dynamicTypingFunction&&d.dynamicTyping[W]===void 0&&(d.dynamicTyping[W]=d.dynamicTypingFunction(W)),(d.dynamicTyping[W]||d.dynamicTyping)===!0))(_e)?P==="true"||P==="TRUE"||P!=="false"&&P!=="FALSE"&&((W=>{if(oe.test(W)&&(W=parseFloat(W),z<W&&W<b))return 1})(P)?parseFloat(P):le.test(P)?new Date(P):P===""?null:P):P)(K=d.header?$>=k.length?"__parsed_extra":k[$]:K,H=d.transform?d.transform(H,K):H);K==="__parsed_extra"?(ne[K]=ne[K]||[],ne[K].push(H)):ne[K]=H}return d.header&&($>k.length?pe("FieldMismatch","TooManyFields","Too many fields: expected "+k.length+" fields but parsed "+$,B+Z):$<k.length&&pe("FieldMismatch","TooFewFields","Too few fields: expected "+k.length+" fields but parsed "+$,B+Z)),ne}var X;M&&(d.header||d.dynamicTyping||d.transform)&&(X=1,!M.data.length||Array.isArray(M.data[0])?(M.data=M.data.map(V),X=M.data.length):M.data=V(M.data,0),d.header&&M.meta&&(M.meta.fields=k),B+=X)}function ae(){return d.header&&k.length===0}function pe(U,V,X,A){U={type:U,code:V,message:X},A!==void 0&&(U.row=A),M.errors.push(U)}L(d.step)&&(S=d.step,d.step=function(U){M=U,ae()?J():(J(),M.data.length!==0&&(Y+=U.data.length,d.preview&&Y>d.preview?_.abort():(M.data=M.data[0],S(M,w))))}),this.parse=function(U,V,X){var A=d.quoteChar||'"',A=(d.newline||(d.newline=this.guessLineEndings(U,A)),v=!1,d.delimiter?L(d.delimiter)&&(d.delimiter=d.delimiter(U),M.meta.delimiter=d.delimiter):((A=((Z,ne,$,K,H)=>{var _e,P,W,Ae;H=H||[",","	","|",";",n.RECORD_SEP,n.UNIT_SEP];for(var ke=0;ke<H.length;ke++){for(var Ee,$e=H[ke],ue=0,ge=0,se=0,he=(W=void 0,new x({comments:K,delimiter:$e,newline:ne,preview:10}).parse(Z)),ve=0;ve<he.data.length;ve++)$&&re(he.data[ve])?se++:(Ee=he.data[ve].length,ge+=Ee,W===void 0?W=Ee:0<Ee&&(ue+=Math.abs(Ee-W),W=Ee));0<he.data.length&&(ge/=he.data.length-se),(P===void 0||ue<=P)&&(Ae===void 0||Ae<ge)&&1.99<ge&&(P=ue,_e=$e,Ae=ge)}return{successful:!!(d.delimiter=_e),bestDelimiter:_e}})(U,d.newline,d.skipEmptyLines,d.comments,d.delimitersToGuess)).successful?d.delimiter=A.bestDelimiter:(v=!0,d.delimiter=n.DefaultDelimiter),M.meta.delimiter=d.delimiter),te(d));return d.preview&&d.header&&A.preview++,c=U,_=new x(A),M=_.parse(c,V,X),J(),de?{meta:{paused:!0}}:M||{meta:{paused:!1}}},this.paused=function(){return de},this.pause=function(){de=!0,_.abort(),c=L(d.chunk)?"":c.substring(_.getCharIndex())},this.resume=function(){w.streamer._halted?(de=!1,w.streamer.parseChunk(c,!0)):setTimeout(w.resume,3)},this.aborted=function(){return N},this.abort=function(){N=!0,_.abort(),M.meta.aborted=!0,L(d.complete)&&d.complete(M),c=""},this.guessLineEndings=function(Z,A){Z=Z.substring(0,1048576);var A=new RegExp(C(A)+"([^]*?)"+C(A),"gm"),X=(Z=Z.replace(A,"")).split("\r"),A=Z.split(`
`),Z=1<A.length&&A[0].length<X[0].length;if(X.length===1||Z)return`
`;for(var ne=0,$=0;$<X.length;$++)X[$][0]===`
`&&ne++;return ne>=X.length/2?`\r
`:"\r"}}function C(d){return d.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function x(d){var c=(d=d||{}).delimiter,_=d.newline,v=d.comments,S=d.step,b=d.preview,z=d.fastMode,oe=null,le=!1,w=d.quoteChar==null?'"':d.quoteChar,Y=w;if(d.escapeChar!==void 0&&(Y=d.escapeChar),(typeof c!="string"||-1<n.BAD_DELIMITERS.indexOf(c))&&(c=","),v===c)throw new Error("Comment character same as delimiter");v===!0?v="#":(typeof v!="string"||-1<n.BAD_DELIMITERS.indexOf(v))&&(v=!1),_!==`
`&&_!=="\r"&&_!==`\r
`&&(_=`
`);var B=0,de=!1;this.parse=function(N,k,M){if(typeof N!="string")throw new Error("Input must be a string");var re=N.length,J=c.length,ae=_.length,pe=v.length,U=L(S),V=[],X=[],A=[],Z=B=0;if(!N)return ue();if(z||z!==!1&&N.indexOf(w)===-1){for(var ne=N.split(_),$=0;$<ne.length;$++){if(A=ne[$],B+=A.length,$!==ne.length-1)B+=_.length;else if(M)return ue();if(!v||A.substring(0,pe)!==v){if(U){if(V=[],Ae(A.split(c)),ge(),de)return ue()}else Ae(A.split(c));if(b&&b<=$)return V=V.slice(0,b),ue(!0)}}return ue()}for(var K=N.indexOf(c,B),H=N.indexOf(_,B),_e=new RegExp(C(Y)+C(w),"g"),P=N.indexOf(w,B);;)if(N[B]===w)for(P=B,B++;;){if((P=N.indexOf(w,P+1))===-1)return M||X.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:V.length,index:B}),Ee();if(P===re-1)return Ee(N.substring(B,P).replace(_e,w));if(w===Y&&N[P+1]===Y)P++;else if(w===Y||P===0||N[P-1]!==Y){K!==-1&&K<P+1&&(K=N.indexOf(c,P+1));var W=ke((H=H!==-1&&H<P+1?N.indexOf(_,P+1):H)===-1?K:Math.min(K,H));if(N.substr(P+1+W,J)===c){A.push(N.substring(B,P).replace(_e,w)),N[B=P+1+W+J]!==w&&(P=N.indexOf(w,B)),K=N.indexOf(c,B),H=N.indexOf(_,B);break}if(W=ke(H),N.substring(P+1+W,P+1+W+ae)===_){if(A.push(N.substring(B,P).replace(_e,w)),$e(P+1+W+ae),K=N.indexOf(c,B),P=N.indexOf(w,B),U&&(ge(),de))return ue();if(b&&V.length>=b)return ue(!0);break}X.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:V.length,index:B}),P++}}else if(v&&A.length===0&&N.substring(B,B+pe)===v){if(H===-1)return ue();B=H+ae,H=N.indexOf(_,B),K=N.indexOf(c,B)}else if(K!==-1&&(K<H||H===-1))A.push(N.substring(B,K)),B=K+J,K=N.indexOf(c,B);else{if(H===-1)break;if(A.push(N.substring(B,H)),$e(H+ae),U&&(ge(),de))return ue();if(b&&V.length>=b)return ue(!0)}return Ee();function Ae(se){V.push(se),Z=B}function ke(se){var he=0;return he=se!==-1&&(se=N.substring(P+1,se))&&se.trim()===""?se.length:he}function Ee(se){return M||(se===void 0&&(se=N.substring(B)),A.push(se),B=re,Ae(A),U&&ge()),ue()}function $e(se){B=se,Ae(A),A=[],H=N.indexOf(_,B)}function ue(se){if(d.header&&!k&&V.length&&!le){var he=V[0],ve=Object.create(null),it=new Set(he);let xt=!1;for(let Ue=0;Ue<he.length;Ue++){let Te=he[Ue];if(ve[Te=L(d.transformHeader)?d.transformHeader(Te,Ue):Te]){let Ke,Rt=ve[Te];for(;Ke=Te+"_"+Rt,Rt++,it.has(Ke););it.add(Ke),he[Ue]=Ke,ve[Te]++,xt=!0,(oe=oe===null?{}:oe)[Ke]=Te}else ve[Te]=1,he[Ue]=Te;it.add(Te)}xt&&console.warn("Duplicate headers found and renamed."),le=!0}return{data:V,errors:X,meta:{delimiter:c,linebreak:_,aborted:de,truncated:!!se,cursor:Z+(k||0),renamedHeaders:oe}}}function ge(){S(ue()),V=[],X=[]}},this.abort=function(){de=!0},this.getCharIndex=function(){return B}}function j(d){var c=d.data,_=l[c.workerId],v=!1;if(c.error)_.userError(c.error,c.file);else if(c.results&&c.results.data){var S={abort:function(){v=!0,R(c.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:ee,resume:ee};if(L(_.userStep)){for(var b=0;b<c.results.data.length&&(_.userStep({data:c.results.data[b],errors:c.results.errors,meta:c.results.meta},S),!v);b++);delete c.results}else L(_.userChunk)&&(_.userChunk(c.results,S,c.file),delete c.results)}c.finished&&!v&&R(c.workerId,c.results)}function R(d,c){var _=l[d];L(_.userComplete)&&_.userComplete(c),_.terminate(),delete l[d]}function ee(){throw new Error("Not implemented.")}function te(d){if(typeof d!="object"||d===null)return d;var c,_=Array.isArray(d)?[]:{};for(c in d)_[c]=te(d[c]);return _}function Q(d,c){return function(){d.apply(c,arguments)}}function L(d){return typeof d=="function"}return n.parse=function(d,c){var _=(c=c||{}).dynamicTyping||!1;if(L(_)&&(c.dynamicTypingFunction=_,_={}),c.dynamicTyping=_,c.transform=!!L(c.transform)&&c.transform,!c.worker||!n.WORKERS_SUPPORTED)return _=null,n.NODE_STREAM_INPUT,typeof d=="string"?(d=(v=>v.charCodeAt(0)!==65279?v:v.slice(1))(d),_=new(c.download?f:g)(c)):d.readable===!0&&L(d.read)&&L(d.on)?_=new E(c):(s.File&&d instanceof File||d instanceof Object)&&(_=new m(c)),_.stream(d);(_=(()=>{var v;return!!n.WORKERS_SUPPORTED&&(v=(()=>{var S=s.URL||s.webkitURL||null,b=r.toString();return n.BLOB_URL||(n.BLOB_URL=S.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",b,")();"],{type:"text/javascript"})))})(),(v=new s.Worker(v)).onmessage=j,v.id=o++,l[v.id]=v)})()).userStep=c.step,_.userChunk=c.chunk,_.userComplete=c.complete,_.userError=c.error,c.step=L(c.step),c.chunk=L(c.chunk),c.complete=L(c.complete),c.error=L(c.error),delete c.worker,_.postMessage({input:d,config:c,workerId:_.id})},n.unparse=function(d,c){var _=!1,v=!0,S=",",b=`\r
`,z='"',oe=z+z,le=!1,w=null,Y=!1,B=((()=>{if(typeof c=="object"){if(typeof c.delimiter!="string"||n.BAD_DELIMITERS.filter(function(k){return c.delimiter.indexOf(k)!==-1}).length||(S=c.delimiter),typeof c.quotes!="boolean"&&typeof c.quotes!="function"&&!Array.isArray(c.quotes)||(_=c.quotes),typeof c.skipEmptyLines!="boolean"&&typeof c.skipEmptyLines!="string"||(le=c.skipEmptyLines),typeof c.newline=="string"&&(b=c.newline),typeof c.quoteChar=="string"&&(z=c.quoteChar),typeof c.header=="boolean"&&(v=c.header),Array.isArray(c.columns)){if(c.columns.length===0)throw new Error("Option columns is empty");w=c.columns}c.escapeChar!==void 0&&(oe=c.escapeChar+z),c.escapeFormulae instanceof RegExp?Y=c.escapeFormulae:typeof c.escapeFormulae=="boolean"&&c.escapeFormulae&&(Y=/^[=+\-@\t\r].*$/)}})(),new RegExp(C(z),"g"));if(typeof d=="string"&&(d=JSON.parse(d)),Array.isArray(d)){if(!d.length||Array.isArray(d[0]))return de(null,d,le);if(typeof d[0]=="object")return de(w||Object.keys(d[0]),d,le)}else if(typeof d=="object")return typeof d.data=="string"&&(d.data=JSON.parse(d.data)),Array.isArray(d.data)&&(d.fields||(d.fields=d.meta&&d.meta.fields||w),d.fields||(d.fields=Array.isArray(d.data[0])?d.fields:typeof d.data[0]=="object"?Object.keys(d.data[0]):[]),Array.isArray(d.data[0])||typeof d.data[0]=="object"||(d.data=[d.data])),de(d.fields||[],d.data||[],le);throw new Error("Unable to serialize unrecognized input");function de(k,M,re){var J="",ae=(typeof k=="string"&&(k=JSON.parse(k)),typeof M=="string"&&(M=JSON.parse(M)),Array.isArray(k)&&0<k.length),pe=!Array.isArray(M[0]);if(ae&&v){for(var U=0;U<k.length;U++)0<U&&(J+=S),J+=N(k[U],U);0<M.length&&(J+=b)}for(var V=0;V<M.length;V++){var X=(ae?k:M[V]).length,A=!1,Z=ae?Object.keys(M[V]).length===0:M[V].length===0;if(re&&!ae&&(A=re==="greedy"?M[V].join("").trim()==="":M[V].length===1&&M[V][0].length===0),re==="greedy"&&ae){for(var ne=[],$=0;$<X;$++){var K=pe?k[$]:$;ne.push(M[V][K])}A=ne.join("").trim()===""}if(!A){for(var H=0;H<X;H++){0<H&&!Z&&(J+=S);var _e=ae&&pe?k[H]:H;J+=N(M[V][_e],H)}V<M.length-1&&(!re||0<X&&!Z)&&(J+=b)}}return J}function N(k,M){var re,J;return k==null?"":k.constructor===Date?JSON.stringify(k).slice(1,25):(J=!1,Y&&typeof k=="string"&&Y.test(k)&&(k="'"+k,J=!0),re=k.toString().replace(B,oe),(J=J||_===!0||typeof _=="function"&&_(k,M)||Array.isArray(_)&&_[M]||((ae,pe)=>{for(var U=0;U<pe.length;U++)if(-1<ae.indexOf(pe[U]))return!0;return!1})(re,n.BAD_DELIMITERS)||-1<re.indexOf(S)||re.charAt(0)===" "||re.charAt(re.length-1)===" ")?z+re+z:re)}},n.RECORD_SEP="",n.UNIT_SEP="",n.BYTE_ORDER_MARK="\uFEFF",n.BAD_DELIMITERS=["\r",`
`,'"',n.BYTE_ORDER_MARK],n.WORKERS_SUPPORTED=!a&&!!s.Worker,n.NODE_STREAM_INPUT=1,n.LocalChunkSize=10485760,n.RemoteChunkSize=5242880,n.DefaultDelimiter=",",n.Parser=x,n.ParserHandle=I,n.NetworkStreamer=f,n.FileStreamer=m,n.StringStreamer=g,n.ReadableStreamStreamer=E,s.jQuery&&((u=s.jQuery).fn.parse=function(d){var c=d.config||{},_=[];return this.each(function(b){if(!(u(this).prop("tagName").toUpperCase()==="INPUT"&&u(this).attr("type").toLowerCase()==="file"&&s.FileReader)||!this.files||this.files.length===0)return!0;for(var z=0;z<this.files.length;z++)_.push({file:this.files[z],inputElem:this,instanceConfig:u.extend({},c)})}),v(),this;function v(){if(_.length===0)L(d.complete)&&d.complete();else{var b,z,oe,le,w=_[0];if(L(d.before)){var Y=d.before(w.file,w.inputElem);if(typeof Y=="object"){if(Y.action==="abort")return b="AbortError",z=w.file,oe=w.inputElem,le=Y.reason,void(L(d.error)&&d.error({name:b},z,oe,le));if(Y.action==="skip")return void S();typeof Y.config=="object"&&(w.instanceConfig=u.extend(w.instanceConfig,Y.config))}else if(Y==="skip")return void S()}var B=w.instanceConfig.complete;w.instanceConfig.complete=function(de){L(B)&&B(de,w.file,w.inputElem),S()},n.parse(w.file,w.instanceConfig)}}function S(){_.splice(0,1),v()}}),h&&(s.onmessage=function(d){d=d.data,n.WORKER_ID===void 0&&d&&(n.WORKER_ID=d.workerId),typeof d.input=="string"?s.postMessage({workerId:n.WORKER_ID,results:n.parse(d.input,d.config),finished:!0}):(s.File&&d.input instanceof File||d.input instanceof Object)&&(d=n.parse(d.input,d.config))&&s.postMessage({workerId:n.WORKER_ID,results:d,finished:!0})}),(f.prototype=Object.create(p.prototype)).constructor=f,(m.prototype=Object.create(p.prototype)).constructor=m,(g.prototype=Object.create(g.prototype)).constructor=g,(E.prototype=Object.create(p.prototype)).constructor=E,n})})(Ze)),Ze.exports}var os=as();const ls=er(os),Sr=({deleteButtonId:t,name:i,onDelete:r})=>{const s=Vr();return e.jsxs(q,{direction:"row",alignItems:"center",gap:1,children:[e.jsx(G,{children:i}),e.jsx(je,{onClick:r,id:t,children:e.jsx(pr,{color:s.palette.error.main})})]})},ds=t=>{const i={name:"UNEXPECTED_ERROR",message:"UNEXPECTED_ERROR"};if(t&&Gr(t)){const r=t.response?.data;return{name:r?.name,message:r?.message}}return{...i,message:t?.message??"UNEXPECTED_ERROR"}},us=({errorMessage:t})=>{const{t:i}=y(O.Builder),{t:r}=y(O.Messages);return t==="MODIFY_EXISTING"?i(T.SHARE_ITEM_CSV_SUMMARY_MODIFYING_EXISTING):r("UNEXPECTED_ERROR")},Nt=({email:t,permission:i})=>e.jsxs(q,{direction:"row",gap:1,children:[e.jsx(G,{children:t}),e.jsx(G,{children:i})]}),cs=({userCsvDataWithTemplate:t,error:i})=>{const{t:r}=y(O.Builder);if(i){const s=ds(i);return e.jsxs(Le,{severity:"error",children:[e.jsx(Et,{children:r(s.name)}),e.jsx(G,{children:e.jsx(us,{errorMessage:s.message})})]})}return t?e.jsxs(Le,{severity:"info",id:$r,children:[e.jsx(Et,{children:r(T.SHARE_ITEM_CSV_SUMMARY_GROUP_TITLE)}),e.jsx(q,{direction:"column",gap:2,children:t.map(({groupName:s,memberships:u,invitations:a})=>e.jsxs(q,{children:[e.jsx(G,{fontWeight:"bold",children:r(T.INVITATION_SUMMARY_GROUP_TITLE,{groupName:s})}),e.jsx(q,{children:u.map(h=>e.jsx(Nt,{email:h.account.type===Ce.Individual?h.account.email:"-",permission:h.permission}))}),e.jsx(q,{children:a.map(h=>e.jsx(Nt,{email:h.email,permission:h.permission}))})]}))})]}):null},hs=({targetItemId:t,selectedItemId:i,onTemplateSelected:r})=>{const{t:s}=y(O.Builder),{data:u}=me.useItem(i),{data:a}=me.useItem(t),[h,l]=F.useState(!1),o=()=>{l(!0)},n=()=>{l(!1)},p=g=>{g&&r(g),n()},f=()=>{r(void 0)},m=g=>s(T.ITEM_TEMPLATE_SELECTION_BUTTON,{name:g});return e.jsxs(e.Fragment,{children:[e.jsx(Qe,{id:Kr,children:s(T.SHARE_ITEM_CSV_IMPORT_MODAL_CONTENT_GROUP_COLUMN_DETECTED)}),u?e.jsxs(e.Fragment,{children:[e.jsx(Sr,{deleteButtonId:qr,onDelete:f,name:u.name}),e.jsx(Qe,{children:e.jsx(G,{children:s(T.SHARE_ITEM_CSV_IMPORT_SELECTED_TEMPLATE_CAPTION)})})]}):e.jsx(ce,{id:zr,variant:"outlined",startIcon:e.jsx(hi,{}),component:"label",onClick:o,children:s(T.SELECT_TEMPLATE_INPUT_BUTTON)}),a&&h&&e.jsx(li,{title:s(T.ITEM_TEMPLATE_SELECTION_MODAL_TITLE),buttonText:m,onClose:n,open:h,onConfirm:p,items:[a]})]})},vr="shareItemFromCsvLabel",fs="group_name",Pt="email",ps=[".csv"].join(","),ms=({csvFile:t,removeFile:i,handleFileChange:r})=>{const{t:s}=y(O.Builder);return t?e.jsx(Sr,{deleteButtonId:Xr,onDelete:i,name:t.name}):e.jsxs(ce,{id:Zr,startIcon:e.jsx(Zi,{}),variant:"outlined",component:"label",sx:{width:"max-content",textTransform:"none"},children:[s("SHARE_ITEM_CSV_IMPORT_INPUT_BUTTON"),e.jsx("input",{type:"file",hidden:!0,onChange:r,accept:ps})]})},_s=({item:t,isFolder:i,handleClose:r})=>{const{t:s}=y(O.Common),{t:u}=y(O.Builder),[a,h]=F.useState(),[l,o]=F.useState(),[n,p]=F.useState(!1),[f,m]=F.useState(),[g,E]=F.useState(!1),{mutate:I,isSuccess:C}=ye.useCSVUserImport(),{mutate:x,data:j,error:R,isSuccess:ee}=ye.useCSVUserImportWithTemplate(),te=C||ee,Q=({target:_})=>{if(_.files?.length){const v=_.files?.[0];v?ls.parse(v,{header:!0,dynamicTyping:!1,preview:1,transformHeader(S){return S.trim().toLowerCase()},complete(S){const b=S.meta.fields;if(!b?.includes(Pt.toLowerCase())){o(u("SHARE_ITEM_CSV_IMPORT_ERROR_MISSING_COLUMN",{column:Pt}));return}b?.includes(fs)&&i?p(!0):p(!1),E(!0),h(v)}}):console.error("Please select a file to upload.")}},L=()=>{p(!1),E(!1),h(void 0)},d=()=>{a?f?x({file:a,itemId:t.id,templateItemId:f}):I({file:a,itemId:t.id}):console.error("no file set")},c=_=>{m(_)};return e.jsxs(e.Fragment,{children:[e.jsx(De,{id:vr,children:u("SHARE_ITEM_CSV_IMPORT_MODAL_TITLE")}),e.jsx(Be,{dividers:!0,children:e.jsxs(q,{direction:"column",alignItems:"center",spacing:2,children:[e.jsx(Qe,{children:u("SHARE_ITEM_CSV_IMPORT_MODAL_CONTENT")}),e.jsx(ms,{csvFile:a,handleFileChange:Q,removeFile:L}),l&&e.jsx(Le,{id:Wr,severity:"error",children:l}),n&&e.jsx(hs,{targetItemId:t.id,selectedItemId:f,onTemplateSelected:c}),e.jsx(cs,{userCsvDataWithTemplate:j,error:R}),te&&e.jsxs(Le,{severity:"success",children:[e.jsx(Et,{children:u("IMPORT_CSV_SUCCESS_TITLE")}),e.jsx(G,{children:u("IMPORT_CSV_SUCCESS_TEXT")})]})]})}),e.jsxs(Ne,{children:[e.jsx(ce,{id:Qr,variant:"text",onClick:r,disabled:te,children:s("CANCEL.BUTTON_TEXT")}),e.jsx(ce,{id:Yr,variant:"contained",onClick:te?r:d,color:"primary",disabled:!g,children:te?u("CLOSE_BUTTON"):s("CONFIRM.BUTTON_TEXT")})]})]})},Es=({item:t,handleCloseModal:i,open:r})=>e.jsx(be,{scroll:"paper",onClose:i,"aria-labelledby":vr,open:r,children:e.jsx(_s,{item:t,isFolder:t.type==="folder",handleClose:i})}),gs={admin:!1,read:!1,write:!1},xr=({value:t,onChange:i,color:r,showLabel:s=!0,displayEmpty:u=!1,disabled:a=!1,allowDowngrade:h=!0,size:l="small"})=>{const{t:o}=y(O.Builder),{t:n}=y(O.Enums),[p,f]=F.useState(t),m=s?o(T.ITEM_MEMBERSHIP_PERMISSION_LABEL):void 0,g=typeof a=="boolean"?gs:a;F.useEffect(()=>{p!==t&&f(t)},[t]);const E=["read","write","admin"].filter(I=>t?h||St.gte(I,t):!0);return e.jsx(mi,{label:m,values:E.map(I=>({value:I,text:n(I),disabled:g[I]})),disabled:typeof a=="boolean"?a:void 0,buildOptionId:en,value:p,defaultValue:p,onChange:i,displayEmpty:u,className:Jr,color:r,size:l})},Ts=({handleClose:t,item:i})=>{const r=i.id,s=Ve(),{mutateAsync:u}=Me({...rn(),onSettled:()=>{s.invalidateQueries({queryKey:Oe.single(r).memberships}),s.invalidateQueries({queryKey:Oe.single(r).invitation})}}),{data:a}=me.useItemMemberships(r),{data:h}=mr(i.id),{t:l}=y(O.Common),{t:o}=y(O.Builder),{register:n,handleSubmit:p,watch:f,setValue:m,formState:{errors:g}}=fi({defaultValues:{permission:"read"}}),E=f("permission"),I=async C=>{let x;try{await u({path:{id:r},body:{invitations:[{email:C.email,permission:C.permission}]}}),t()}catch(j){console.error(j)}return x};return e.jsxs(Ge,{component:"form",onSubmit:p(I),children:[e.jsx(Be,{children:e.jsxs(q,{gap:3,children:[e.jsx(G,{variant:"body1",children:o(T.SHARE_ITEM_FORM_INVITATION_TOOLTIP)}),e.jsxs(q,{id:nn,direction:"row",alignItems:"center",justifyContent:"center",spacing:1,children:[e.jsx(fr,{id:sn,variant:"outlined",label:o(T.SHARE_ITEM_FORM_EMAIL_LABEL),helperText:g.email?.message,...n("email",{required:!0,validate:{isEmail:C=>_i(C,{})||o(T.SHARE_ITEM_FORM_INVITATION_INVALID_EMAIL_MESSAGE),noMembership:C=>!a?.some(({account:x})=>x.type===Ce.Individual&&x.email===C)||o(T.SHARE_ITEM_FORM_ALREADY_HAVE_MEMBERSHIP_MESSAGE),noInvitation:C=>!h?.some(x=>x.email===C)||o(T.SHARE_ITEM_FORM_INVITATION_EMAIL_EXISTS_MESSAGE)}}),error:!!g.email,sx:{flexGrow:1}}),e.jsx(xr,{value:E,onChange:C=>{C.target.value&&m("permission",C.target.value)},size:"medium"})]})]})}),e.jsxs(Ne,{children:[e.jsx(Pe,{variant:"text",onClick:t,dataCy:an,children:l("CANCEL.BUTTON_TEXT")}),e.jsx(Pe,{disabled:!!g.email,id:on,type:"submit",children:o(T.SHARE_ITEM_FORM_CONFIRM_BUTTON)})]})]})},Is=({item:t,open:i,handleClose:r})=>{const{t:s}=y(O.Builder);return e.jsxs(be,{onClose:r,open:i,children:[e.jsx(De,{children:s(T.SHARE_ITEM_FORM_TITLE,{name:pi(t.name,{length:tn})})}),e.jsx(Ts,{item:t,handleClose:r})]})},Ss=({item:t})=>{const{t:i}=y(O.Builder),[r,s]=F.useState(!1),u=F.useRef(null),{isOpen:a,closeModal:h,openModal:l}=We(),{isOpen:o,closeModal:n,openModal:p}=We(),f=()=>{s(g=>!g)},m=g=>{u.current?.contains(g.target)||s(!1)};return e.jsxs(e.Fragment,{children:[e.jsxs($i,{variant:"contained",disableElevation:!0,ref:u,"aria-label":"sharing options",children:[e.jsx(ce,{onClick:p,"data-cy":ln,children:i(T.SHARE_ITEM_BUTTON)}),e.jsx(ce,{size:"small","aria-controls":r?"split-button-menu":void 0,"aria-expanded":r?"true":void 0,"aria-label":"select share option","aria-haspopup":"menu",onClick:f,id:dn,children:e.jsx(gi,{})})]}),e.jsx(Ti,{sx:{zIndex:1},open:r,anchorEl:u.current,role:void 0,transition:!0,disablePortal:!0,placement:"bottom-start",children:({TransitionProps:g})=>e.jsx(Ii,{...g,children:e.jsx(Si,{children:e.jsx(qi,{onClickAway:m,children:e.jsxs(Ci,{id:"split-button-menu",autoFocusItem:!0,children:[e.jsx(Re,{onClick:p,children:i(T.SHARE_ITEM_BUTTON)}),e.jsx(Re,{id:un,onClick:()=>l(),children:i(T.SHARE_ITEM_CSV_IMPORT_BUTTON)})]})})})})}),e.jsx(Is,{open:o,item:t,handleClose:n}),e.jsx(Es,{item:t,handleCloseModal:h,open:a})]})},wt="alert-dialog-title",kt="alert-dialog-description",vs=({itemId:t,open:i=!1,handleClose:r,membershipToDelete:s,hasOnlyOneAdmin:u=!1})=>{const{t:a}=y(O.Builder),{data:h}=me.useCurrentMember(),l=Ve(),{mutateAsync:o}=Me({...cn(),onSettled:()=>{l.invalidateQueries({queryKey:Oe.single(t).memberships})}}),n=hn(),p=()=>{s?.id&&(o({path:{itemId:t,id:s.id}}).then(()=>{s.account.id===h?.id&&n({to:"/home"})}),r())};let f="";const m=u&&s?.permission==="admin";return m?f=a(T.DELETE_LAST_ADMIN_ALERT_MESSAGE):h?.id===s?.account?.id?f=a(T.DELETE_OWN_MEMBERSHIP_MESSAGE):f=a(T.DELETE_MEMBERSHIP_MESSAGE,{name:s?.account.name,permissionLevel:s?.permission}),e.jsxs(be,{open:i,onClose:r,"aria-labelledby":wt,"aria-describedby":kt,children:[e.jsx(De,{id:wt,children:a(T.DELETE_MEMBERSHIP)}),e.jsx(Be,{children:m?e.jsx(Le,{severity:"error",children:f}):e.jsx(Qe,{id:kt,children:f})}),e.jsx(Ne,{children:m?e.jsx(Pe,{onClick:r,autoFocus:!0,variant:"text",children:a(T.APPROVE_BUTTON_TEXT)}):e.jsxs(e.Fragment,{children:[e.jsx(vt,{onClick:r}),e.jsx(Pe,{id:fn,onClick:p,color:"error",autoFocus:!0,variant:"text",children:a(T.DELETE_MEMBERSHIP_MODAL_CONFIRM_BUTTON)})]})})]})},Rr=({id:t,tooltip:i,disabled:r,onClick:s})=>(()=>{const a=e.jsx(je,{disabled:r,onClick:s,id:t,color:"error",children:e.jsx(pr,{})});return!r||!i?a:e.jsx(Fe,{title:i,children:e.jsx("span",{children:a})})})(),Cr=({data:t,itemId:i})=>{const{isOpen:r,closeModal:s,openModal:u}=We(),{t:a}=y(O.Builder);return e.jsxs(e.Fragment,{children:[e.jsx(Rr,{onClick:()=>u(),id:pn(t.id),tooltip:a(T.ITEM_MEMBERSHIPS_TABLE_CANNOT_DELETE_PARENT_TOOLTIP)}),e.jsx(vs,{open:r,handleClose:s,itemId:i,membershipToDelete:t})]})},nt=we(Je)(()=>({"&:last-child td, &:last-child th":{border:0}})),xs=({data:t,itemId:i,isDisabled:r})=>{const{t:s}=y(O.Enums),{t:u}=y(O.Builder);return e.jsx(Fe,{title:r?u(T.ITEM_LOGIN_SCHEMA_DISABLED_GUEST_ACCESS_MESSAGE):void 0,children:e.jsxs(nt,{"data-cy":tr(t.id),children:[e.jsx(ie,{children:e.jsx(G,{sx:{color:r?"text.disabled":void 0},noWrap:!0,fontWeight:"bold",children:t.account.name})}),e.jsx(ie,{align:"right",children:r?e.jsx(G,{color:"text.disabled",children:s(tt.Disabled)}):e.jsx(G,{children:s(t.permission)})}),e.jsx(ie,{align:"right",children:e.jsx(Cr,{itemId:i,data:t})})]},t.id)})},Mr=({email:t,name:i,permission:r,allowDowngrade:s=!0,handleUpdate:u,id:a,loading:h})=>{const{isOpen:l,openModal:o,closeModal:n}=We(),[p,f]=F.useState(r),[m,g]=F.useState(),{t:E}=y(O.Common),{t:I}=y(O.Builder),{t:C}=y(O.Messages);if(!s&&r==="admin")return null;const x=async()=>{try{await u(p),n()}catch(j){console.error(j),g(C(mn(j)))}};return e.jsxs(e.Fragment,{children:[e.jsx(di,{id:a,onClick:()=>o()}),e.jsxs(be,{onClose:n,open:l,children:[e.jsx(De,{children:e.jsx(ur,{t:I,i18nKey:T.EDIT_PERMISSION_DIALOG_TITLE,values:{name:i||t},components:{1:e.jsx("strong",{})}})}),e.jsx(Be,{children:e.jsxs(q,{spacing:1,children:[e.jsx(G,{variant:"body1",children:I(T.EDIT_PERMISSION_CANNOT_DOWNGRADE_FROM_PARENT)}),e.jsxs(q,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[e.jsxs("div",{children:[e.jsx(G,{noWrap:!0,fontWeight:"bold",children:i}),e.jsx(G,{noWrap:!0,variant:"subtitle2",children:t})]}),e.jsx(xr,{value:p,onChange:j=>f(j.target.value),size:"medium",allowDowngrade:s})]}),m&&e.jsx(Le,{severity:"error",children:m})]})}),e.jsxs(Ne,{children:[e.jsx(ce,{variant:"text",onClick:n,children:E("CANCEL.BUTTON_TEXT")}),e.jsx(ce,{loading:h,type:"submit",onClick:x,children:I(T.EDIT_PERMISSION_DIALOG_SUBMIT_BUTTON)})]})]})]})},Rs=({itemId:t,invitationId:i,disabled:r=!1})=>{const{t:s}=y(O.Builder),{mutate:u}=ye.useResendInvitation(),[a,h]=F.useState(!1),l=()=>{h(!0),u({itemId:t,id:i})};return e.jsx(Pe,{variant:"text",onClick:l,disabled:a||r,className:_n,size:"small",children:s(T.SHARING_INVITATIONS_RESEND_BUTTON)})},Cs=({data:t,item:i})=>{const{t:r}=y(O.Enums),{t:s}=y(O.Builder),{mutate:u,isPending:a}=ye.usePatchInvitation(),{mutate:h,isPending:l}=ye.usePostInvitations(),{mutate:o}=ye.useDeleteInvitation(),n=async p=>{t.item.path===i.path?u({id:t.id,permission:p,itemId:i.id}):h({itemId:i.id,invitations:[{email:t.email,permission:p}]})};return e.jsxs(nt,{id:En(t.id),children:[e.jsxs(ie,{children:[e.jsxs(G,{noWrap:!0,fontWeight:"bold",children:["(",t.name??s(T.INVITATION_NOT_REGISTER_TEXT),")"]}),e.jsx(G,{noWrap:!0,variant:"subtitle2",children:t.email})]}),e.jsx(ie,{align:"right",children:e.jsx(G,{children:r(t.permission)})}),e.jsxs(ie,{align:"right",children:[e.jsx(Rs,{invitationId:t.id,itemId:i.id}),e.jsx(Mr,{permission:t.permission,email:t.email,name:t.name,handleUpdate:n,allowDowngrade:t.item.path===i.path,loading:a||l}),e.jsx(Rr,{id:gn(t.id),tooltip:s(T.INVITATION_DELETE_TOOLTIP),onClick:()=>o({id:t.id,itemId:i.id}),disabled:t.item.path!==i.path})]})]})};function Ms({itemPath:t,itemId:i}){const r=Ve(),{mutateAsync:s,error:u,isPending:a}=Me({...Tn(),onSettled:()=>{r.invalidateQueries({queryKey:Oe.single(i).memberships})}}),{mutateAsync:h,isPending:l,error:o}=Me({...rr(),onSettled:()=>{r.invalidateQueries({queryKey:Oe.single(i).memberships})}});return{changePermission:async(p,f)=>{p.item.path===t?await s({path:{id:p.id,itemId:i},body:{permission:f}}):await h({path:{itemId:i},body:{accountId:p.account.id,permission:f}})},isPending:a||l,error:u||o}}const Ls=({allowDowngrade:t=!1,isOnlyAdmin:i=!1,item:r,data:s,isDisabled:u})=>{const{t:a}=y(O.Enums),{changePermission:h,isPending:l}=Ms({itemId:r.id,itemPath:r.path});return e.jsxs(nt,{"data-cy":tr(s.id),children:[e.jsxs(ie,{children:[e.jsx(G,{noWrap:!0,sx:{color:u?st:void 0},fontWeight:"bold",children:s.account.name}),e.jsx(G,{noWrap:!0,variant:"subtitle2",sx:{color:u?st:void 0},children:s.account.type===Ce.Individual&&s.account.email})]}),e.jsx(ie,{align:"right",children:e.jsx(G,{children:u?e.jsx(G,{sx:{color:st},children:a(tt.Disabled)}):a(s.permission)})}),e.jsxs(ie,{align:"right",children:[!i&&e.jsx(Mr,{name:s.account.name,email:s.account.type===Ce.Individual?s.account.email:void 0,loading:l,handleUpdate:o=>h(s,o),allowDowngrade:t,permission:s.permission,id:In(s.id)}),!i&&t&&e.jsx(Cr,{itemId:r.id,data:s})]})]},s.id)},bs=t=>{const i=t.reduce((r,s)=>{const{account:u,permission:a}=s;return(!r[u.id]||St.gt(a,r[u.id].permission))&&(r[u.id]=s),r},{});return Object.values(i)},Bs=({canAdmin:t,item:i})=>{const{data:r}=me.useCurrentMember(),{data:s,isPending:u}=me.useItemMemberships(i.id),a=s?.filter(l=>l.permission==="admin").length===1;let h=s;return h&&(t||(h=h?.filter(l=>l.account.id===r?.id)),h=bs(h).sort((l,o)=>l.account.type!==Ce.Individual?1:o.account.type!==Ce.Individual?-1:l.account.name>o.account.name?1:-1)),{data:h,isPending:u,hasOnlyOneAdmin:a}},gt="-",ot=(t,i)=>t.name===i.name?t.email>i.email?1:-1:t.name===gt?1:i.name===gt?-1:t.name>i.name?1:-1,As=({showEmail:t=!0})=>{const{t:i}=y(O.Builder),{item:r,canAdmin:s}=rt(),{data:u,isPending:a}=mr(r.id,{enabled:s}),{data:h,hasOnlyOneAdmin:l,isPending:o}=Bs({canAdmin:s,item:r}),{data:n}=me.useItemLoginSchema({itemId:r.id}),{user:p}=nr(),f=!n||n.status===tt.Disabled;if(h){const m=h.map(R=>({name:R.account.name,email:R.account.type===Ce.Individual?R.account.email:"-",permission:R.permission,component:R.account.type===Ce.Individual?e.jsx(Ls,{data:R,item:r,isOnlyAdmin:l&&R.permission==="admin",allowDowngrade:R.item.path===r.path,isDisabled:!!r.hidden&&St.lt(R.permission,"write")},R.id):e.jsx(xs,{itemId:r.id,data:R,isDisabled:!!r.hidden||p?.id!==R.account.id&&f},R.id)})),g=u?.map(R=>({name:R.name??gt,email:R.email,permission:R.permission,component:e.jsx(Cs,{item:r,data:R},R.id)}))??[],E=Li([...m,...g],({permission:R})=>R),I=E.admin?.toSorted(ot),C=E.write?.toSorted(ot),x=E.read?.toSorted(ot),j=[I,C,x].filter(Boolean).flatMap(R=>[e.jsx(Je,{children:e.jsx(ie,{colSpan:5,sx:{padding:0}})}),...R.map(ee=>ee.component)]).slice(1);if(j)return e.jsx(cr,{children:e.jsxs(Er,{size:"small",children:[e.jsx(Tr,{children:e.jsxs(Je,{children:[t&&e.jsx(ie,{sx:{fontWeight:"bold"},children:i(T.ITEM_MEMBERSHIPS_TABLE_MEMBER_HEADER)}),e.jsx(ie,{sx:{fontWeight:"bold"},align:"right",children:i(T.ITEM_MEMBERSHIPS_TABLE_PERMISSION_HEADER)}),e.jsx(ie,{sx:{fontWeight:"bold"},align:"right",children:i(T.ITEM_MEMBERSHIPS_TABLE_ACTIONS_HEADER)})]})}),e.jsx(gr,{children:j.map(R=>R)})]})})}return o||a?e.jsx(Se,{}):e.jsx(_r,{})};function ys({itemId:t,canAdmin:i}){const r=Ve(),{data:s,isPending:u}=me.useMembershipRequests(t,{enabled:i}),{mutate:a}=Me({...Sn(),onSettled:()=>{r.invalidateQueries({queryKey:Oe.single(t).membershipRequests})}}),{mutate:h}=Me({...rr(),onSettled:()=>{r.invalidateQueries({queryKey:Oe.single(t).membershipRequests}),r.invalidateQueries({queryKey:Oe.single(t).memberships})}});return{requests:s,isPending:u,acceptRequest:n=>{h({path:{itemId:t},body:{accountId:n,permission:"read"}})},refuseRequest:n=>{a({path:{itemId:t,memberId:n}})}}}const Os=()=>{const{t,i18n:i}=y(O.Builder),{item:r,canAdmin:s}=rt(),{requests:u,isPending:a,acceptRequest:h,refuseRequest:l}=ys({itemId:r.id,canAdmin:s});return u?.length?e.jsx(cr,{children:e.jsxs(Er,{size:"small",children:[e.jsx(Tr,{children:e.jsxs(Je,{children:[e.jsx(ie,{sx:{fontWeight:"bold"},children:t(T.ITEM_MEMBERSHIPS_TABLE_MEMBER_HEADER)}),e.jsx(ie,{sx:{fontWeight:"bold"},align:"right",children:t(T.MEMBERSHIPS_REQUEST_TABLE_CREATED_AT_HEADER)}),e.jsx(ie,{sx:{fontWeight:"bold"},align:"right",children:t(T.ITEM_MEMBERSHIPS_TABLE_ACTIONS_HEADER)})]})}),e.jsx(gr,{children:u?.map(o=>e.jsxs(nt,{"data-cy":vn(o.member.id),children:[e.jsxs(ie,{children:[e.jsx(G,{noWrap:!0,fontWeight:"bold",children:o.member.name}),e.jsx(G,{noWrap:!0,variant:"subtitle2",children:o.member.email})]}),e.jsx(ie,{align:"right",children:e.jsx(G,{noWrap:!0,variant:"subtitle2",children:Bi(o.createdAt,{locale:i.language})})}),e.jsxs(ie,{align:"right",children:[e.jsx(Pe,{"data-cy":xn,size:"small",color:"success",onClick:()=>{h(o.member.id)},endIcon:e.jsx(bi,{size:20}),children:t(T.MEMBERSHIP_REQUEST_ACCEPT_BUTTON)}),e.jsx(Pe,{"data-cy":Rn,size:"small",color:"error",variant:"text",onClick:()=>l(o.member.id),children:t(T.MEMBERSHIP_REQUEST_REJECT_BUTTON)})]})]},o.member.id))})]})}):u?.length===0?e.jsx(G,{"data-cy":Cn,children:t(T.MEMBERSHIP_REQUESTS_TABLE_EMPTY)}):a?e.jsxs(e.Fragment,{children:[e.jsx(Se,{height:"60"}),e.jsx(Se,{height:"60"}),e.jsx(Se,{height:"60"})]}):e.jsx(_r,{})},Ut=({children:t,value:i,selectedTabId:r})=>e.jsx(Ge,{role:"tabpanel",hidden:i!==r,"aria-labelledby":`simple-tab-${i}`,mt:1,children:t}),js=()=>{const{t}=y(O.Builder),{item:i,canAdmin:r}=rt(),[s,u]=F.useState(0),{data:a}=me.useMembershipRequests(i.id);return e.jsxs(q,{children:[e.jsxs(q,{direction:"row",justifyContent:"space-between",children:[e.jsx(G,{variant:"h6",children:t(T.ACCESS_MANAGEMENT_TITLE)}),r&&e.jsx(Ss,{item:i})]}),e.jsx(Ge,{borderBottom:1,borderColor:"divider",children:e.jsxs(Ai,{value:s,onChange:(h,l)=>{u(l)},"aria-label":t(T.ACCESS_MANAGEMENT_TITLE),"data-cy":Mn,children:[e.jsx(bt,{label:t(T.USER_MANAGEMENT_MEMBERS_TAB)}),r&&e.jsx(bt,{"data-cy":Ln,label:a?.length?e.jsx(yi,{badgeContent:a?.length,color:"primary",children:t(T.USER_MANAGEMENT_REQUESTS_TAB)}):t(T.USER_MANAGEMENT_REQUESTS_TAB)})]})}),e.jsx(Ut,{selectedTabId:s,value:0,children:e.jsx(As,{})}),r&&e.jsx(Ut,{selectedTabId:s,value:1,children:e.jsx(Os,{})})]})},qe=6,et=255;function Ds(t){const i="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";return Array.from({length:t},()=>{const s=Math.floor(Math.random()*i.length);return i.charAt(s)}).join("")}function Tt(t=qe){if(t<qe||t>et)throw new Error(`Length must be between ${qe} and ${et}`);return Ds(t)}function Ht(t){const i=/^[a-zA-Z0-9-]*$/,r=t.length,s=t.match(/[^a-zA-Z0-9-]/g);return r<qe?{messageKey:"SHORT_LINK_MIN_CHARS_ERROR",data:qe,isValid:!1}:r>et?{messageKey:"SHORT_LINK_MIN_CHARS_ERROR",data:et,isValid:!1}:i.test(t)?{isValid:!0}:{messageKey:"SHORT_LINK_INVALID_CHARS_ERROR",data:s,isValid:!1}}const Ns=({alias:t,onChange:i,isError:r})=>{const{t:s}=y(O.Builder),u=a=>{i(a.target.value)};return e.jsxs(q,{direction:"row",alignItems:"center",children:[e.jsx(fr,{id:bn,label:s(T.ALIAS_INPUT),variant:"outlined",size:"small",value:t,onChange:u,error:r}),e.jsx(Fe,{title:s(T.GENERATE_ALIAS_TOOLTIP),children:e.jsx("span",{children:e.jsx(je,{onClick:()=>i(Tt()),id:Bn,children:e.jsx(Yi,{})})})})]})},Ps=500,ws=({alias:t,isNew:i,initialAlias:r})=>{const{t:s}=y(O.Builder),{isValid:u,messageKey:a,data:h}=Ht(t),l=i||r!==t,o=An(t,Ps),{data:n,isFetching:p,isError:f}=ir({...yn({path:{alias:o}}),enabled:l&&o===t&&Ht(o).isValid}),m=p||t!==o,g=F.useCallback(()=>{if(u)if(l){if(m)return s(T.ALIAS_CHECKING_MSG);{const E=!!n?.available;return s(E?T.ALIAS_VALID_MSG:T.ALIAS_ALREADY_EXIST)}}else return s(T.ALIAS_UNCHANGED_MSG);else{const E=a??T.SHORT_LINK_UNKNOWN_ERROR;return s(E,{data:h})}},[h,l,m,u,a,n?.available]);return{isLoading:m,message:g(),isError:f||!m&&!n?.available||!u,hasAliasChanged:l}},ks=we(oi)(()=>({overflowWrap:"anywhere",whiteSpace:"normal",maxWidth:"240px"})),Us=({isNew:t,itemId:i,initialAlias:r})=>{const{t:s}=y(O.Messages),u=Ve(),a=()=>{u.invalidateQueries({queryKey:ar({path:{itemId:i}})}),u.invalidateQueries({queryKey:Nn(r)})},{mutateAsync:h,isPending:l,isError:o}=Me({...jn(),onError:()=>{ze.error?.(s("SHORT_LINK_UNEXPECTED_ERROR"))},onSettled:a}),{mutateAsync:n,isPending:p,isError:f}=Me({...Dn(),onError:()=>{ze.error?.(s("SHORT_LINK_UNEXPECTED_ERROR"))},onSettled:a});return{putShortLink:async({alias:g,platform:E})=>{t?await h({body:{alias:g,platform:E,itemId:i}}):await n({path:{alias:r},body:{alias:g}})},isPending:t?l:p,isError:t?o:f}},Hs=({itemId:t,initialAlias:i,platform:r,handleClose:s,isNew:u})=>{const{t:a}=y(O.Builder),{putShortLink:h,isPending:l}=Us({isNew:u,itemId:t,initialAlias:i}),[o,n]=F.useState(i),{isLoading:p,message:f,isError:m,hasAliasChanged:g}=ws({isNew:u,initialAlias:i,alias:o}),E=a(u?"CREATE_SHORT_LINK_TITLE":"EDIT_SHORT_LINK_TITLE"),I=async()=>{try{await h({alias:o,platform:r}),s()}catch(x){console.error(x)}},C=`alert-title-manage-short-link-${o}`;return e.jsxs(e.Fragment,{children:[e.jsx(De,{id:C,children:E}),e.jsx(Be,{children:e.jsxs(q,{direction:"column",alignItems:"left",spacing:2,mt:2,children:[e.jsx(Ns,{alias:o,onChange:n,isError:g&&m}),e.jsx(ks,{error:g&&m,children:f})]})}),e.jsxs(Ne,{children:[e.jsx(vt,{onClick:s,id:sr(o),disabled:l}),e.jsx(ce,{loading:l,color:"success",onClick:I,disabled:p||m,id:On,children:a("SAVE_BTN")})]})]})},Fs=({shortLink:t,open:i,setOpen:r,handleDelete:s})=>{const{t:u}=y(O.Builder),a=()=>r(!1),h=(p,f)=>{f!=="backdropClick"&&a()},l=()=>{r(!1),s()},o=`alert-dialog-title-delete-${t}`,n=`alert-dialog-desc-delete-${t}`;return e.jsxs(be,{open:i,onClose:h,"aria-labelledby":o,"aria-describedby":n,children:[e.jsx(De,{id:o,children:u(T.CONFIRM_DELETE_SHORT_LINK_TITLE)}),e.jsx(Be,{children:e.jsx(Qe,{id:n,children:u(T.CONFIRM_DELETE_SHORT_LINK_MSG,{shortLink:t})})}),e.jsxs(Ne,{children:[e.jsx(vt,{onClick:a,id:sr(t)}),e.jsx(ce,{onClick:l,color:"error",id:Pn(t),children:u(T.DELETE_BTN)})]})]})},Vs=25,Gs=({platform:t,accentColor:i,size:r=Vs})=>{switch(t){case xe.Builder:return e.jsx(Di,{size:r,primaryColor:i});case xe.Player:return e.jsx(ji,{size:r,primaryColor:i});case xe.Library:return e.jsx(Ni,{size:r,primaryColor:i});default:return console.error(`Undefined platform ${t}.`),e.jsx(wn,{height:r,sx:{fill:i}})}};var He={},lt,Ft;function Lr(){return Ft||(Ft=1,lt={L:1,M:0,Q:3,H:2}),lt}var dt,Vt;function br(){return Vt||(Vt=1,dt={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8}),dt}var ut,Gt;function $s(){if(Gt)return ut;Gt=1;var t=br();function i(r){this.mode=t.MODE_8BIT_BYTE,this.data=r}return i.prototype={getLength:function(r){return this.data.length},write:function(r){for(var s=0;s<this.data.length;s++)r.put(this.data.charCodeAt(s),8)}},ut=i,ut}var ct,$t;function Ks(){if($t)return ct;$t=1;var t=Lr();function i(r,s){this.totalCount=r,this.dataCount=s}return i.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],i.getRSBlocks=function(r,s){var u=i.getRsBlockTable(r,s);if(u==null)throw new Error("bad rs block @ typeNumber:"+r+"/errorCorrectLevel:"+s);for(var a=u.length/3,h=new Array,l=0;l<a;l++)for(var o=u[l*3+0],n=u[l*3+1],p=u[l*3+2],f=0;f<o;f++)h.push(new i(n,p));return h},i.getRsBlockTable=function(r,s){switch(s){case t.L:return i.RS_BLOCK_TABLE[(r-1)*4+0];case t.M:return i.RS_BLOCK_TABLE[(r-1)*4+1];case t.Q:return i.RS_BLOCK_TABLE[(r-1)*4+2];case t.H:return i.RS_BLOCK_TABLE[(r-1)*4+3];default:return}},ct=i,ct}var ht,Kt;function qs(){if(Kt)return ht;Kt=1;function t(){this.buffer=new Array,this.length=0}return t.prototype={get:function(i){var r=Math.floor(i/8);return(this.buffer[r]>>>7-i%8&1)==1},put:function(i,r){for(var s=0;s<r;s++)this.putBit((i>>>r-s-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(i){var r=Math.floor(this.length/8);this.buffer.length<=r&&this.buffer.push(0),i&&(this.buffer[r]|=128>>>this.length%8),this.length++}},ht=t,ht}var ft,qt;function Br(){if(qt)return ft;qt=1;for(var t={glog:function(r){if(r<1)throw new Error("glog("+r+")");return t.LOG_TABLE[r]},gexp:function(r){for(;r<0;)r+=255;for(;r>=256;)r-=255;return t.EXP_TABLE[r]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},i=0;i<8;i++)t.EXP_TABLE[i]=1<<i;for(var i=8;i<256;i++)t.EXP_TABLE[i]=t.EXP_TABLE[i-4]^t.EXP_TABLE[i-5]^t.EXP_TABLE[i-6]^t.EXP_TABLE[i-8];for(var i=0;i<255;i++)t.LOG_TABLE[t.EXP_TABLE[i]]=i;return ft=t,ft}var pt,zt;function Ar(){if(zt)return pt;zt=1;var t=Br();function i(r,s){if(r.length==null)throw new Error(r.length+"/"+s);for(var u=0;u<r.length&&r[u]==0;)u++;this.num=new Array(r.length-u+s);for(var a=0;a<r.length-u;a++)this.num[a]=r[a+u]}return i.prototype={get:function(r){return this.num[r]},getLength:function(){return this.num.length},multiply:function(r){for(var s=new Array(this.getLength()+r.getLength()-1),u=0;u<this.getLength();u++)for(var a=0;a<r.getLength();a++)s[u+a]^=t.gexp(t.glog(this.get(u))+t.glog(r.get(a)));return new i(s,0)},mod:function(r){if(this.getLength()-r.getLength()<0)return this;for(var s=t.glog(this.get(0))-t.glog(r.get(0)),u=new Array(this.getLength()),a=0;a<this.getLength();a++)u[a]=this.get(a);for(var a=0;a<r.getLength();a++)u[a]^=t.gexp(t.glog(r.get(a))+s);return new i(u,0).mod(r)}},pt=i,pt}var mt,Wt;function zs(){if(Wt)return mt;Wt=1;var t=br(),i=Ar(),r=Br(),s={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},u={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(a){for(var h=a<<10;u.getBCHDigit(h)-u.getBCHDigit(u.G15)>=0;)h^=u.G15<<u.getBCHDigit(h)-u.getBCHDigit(u.G15);return(a<<10|h)^u.G15_MASK},getBCHTypeNumber:function(a){for(var h=a<<12;u.getBCHDigit(h)-u.getBCHDigit(u.G18)>=0;)h^=u.G18<<u.getBCHDigit(h)-u.getBCHDigit(u.G18);return a<<12|h},getBCHDigit:function(a){for(var h=0;a!=0;)h++,a>>>=1;return h},getPatternPosition:function(a){return u.PATTERN_POSITION_TABLE[a-1]},getMask:function(a,h,l){switch(a){case s.PATTERN000:return(h+l)%2==0;case s.PATTERN001:return h%2==0;case s.PATTERN010:return l%3==0;case s.PATTERN011:return(h+l)%3==0;case s.PATTERN100:return(Math.floor(h/2)+Math.floor(l/3))%2==0;case s.PATTERN101:return h*l%2+h*l%3==0;case s.PATTERN110:return(h*l%2+h*l%3)%2==0;case s.PATTERN111:return(h*l%3+(h+l)%2)%2==0;default:throw new Error("bad maskPattern:"+a)}},getErrorCorrectPolynomial:function(a){for(var h=new i([1],0),l=0;l<a;l++)h=h.multiply(new i([1,r.gexp(l)],0));return h},getLengthInBits:function(a,h){if(1<=h&&h<10)switch(a){case t.MODE_NUMBER:return 10;case t.MODE_ALPHA_NUM:return 9;case t.MODE_8BIT_BYTE:return 8;case t.MODE_KANJI:return 8;default:throw new Error("mode:"+a)}else if(h<27)switch(a){case t.MODE_NUMBER:return 12;case t.MODE_ALPHA_NUM:return 11;case t.MODE_8BIT_BYTE:return 16;case t.MODE_KANJI:return 10;default:throw new Error("mode:"+a)}else if(h<41)switch(a){case t.MODE_NUMBER:return 14;case t.MODE_ALPHA_NUM:return 13;case t.MODE_8BIT_BYTE:return 16;case t.MODE_KANJI:return 12;default:throw new Error("mode:"+a)}else throw new Error("type:"+h)},getLostPoint:function(a){for(var h=a.getModuleCount(),l=0,o=0;o<h;o++)for(var n=0;n<h;n++){for(var p=0,f=a.isDark(o,n),m=-1;m<=1;m++)if(!(o+m<0||h<=o+m))for(var g=-1;g<=1;g++)n+g<0||h<=n+g||m==0&&g==0||f==a.isDark(o+m,n+g)&&p++;p>5&&(l+=3+p-5)}for(var o=0;o<h-1;o++)for(var n=0;n<h-1;n++){var E=0;a.isDark(o,n)&&E++,a.isDark(o+1,n)&&E++,a.isDark(o,n+1)&&E++,a.isDark(o+1,n+1)&&E++,(E==0||E==4)&&(l+=3)}for(var o=0;o<h;o++)for(var n=0;n<h-6;n++)a.isDark(o,n)&&!a.isDark(o,n+1)&&a.isDark(o,n+2)&&a.isDark(o,n+3)&&a.isDark(o,n+4)&&!a.isDark(o,n+5)&&a.isDark(o,n+6)&&(l+=40);for(var n=0;n<h;n++)for(var o=0;o<h-6;o++)a.isDark(o,n)&&!a.isDark(o+1,n)&&a.isDark(o+2,n)&&a.isDark(o+3,n)&&a.isDark(o+4,n)&&!a.isDark(o+5,n)&&a.isDark(o+6,n)&&(l+=40);for(var I=0,n=0;n<h;n++)for(var o=0;o<h;o++)a.isDark(o,n)&&I++;var C=Math.abs(100*I/h/h-50)/5;return l+=C*10,l}};return mt=u,mt}var _t,Qt;function Ws(){if(Qt)return _t;Qt=1;var t=$s(),i=Ks(),r=qs(),s=zs(),u=Ar();function a(l,o){this.typeNumber=l,this.errorCorrectLevel=o,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}var h=a.prototype;return h.addData=function(l){var o=new t(l);this.dataList.push(o),this.dataCache=null},h.isDark=function(l,o){if(l<0||this.moduleCount<=l||o<0||this.moduleCount<=o)throw new Error(l+","+o);return this.modules[l][o]},h.getModuleCount=function(){return this.moduleCount},h.make=function(){if(this.typeNumber<1){var l=1;for(l=1;l<40;l++){for(var o=i.getRSBlocks(l,this.errorCorrectLevel),n=new r,p=0,f=0;f<o.length;f++)p+=o[f].dataCount;for(var f=0;f<this.dataList.length;f++){var m=this.dataList[f];n.put(m.mode,4),n.put(m.getLength(),s.getLengthInBits(m.mode,l)),m.write(n)}if(n.getLengthInBits()<=p*8)break}this.typeNumber=l}this.makeImpl(!1,this.getBestMaskPattern())},h.makeImpl=function(l,o){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(var n=0;n<this.moduleCount;n++){this.modules[n]=new Array(this.moduleCount);for(var p=0;p<this.moduleCount;p++)this.modules[n][p]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(l,o),this.typeNumber>=7&&this.setupTypeNumber(l),this.dataCache==null&&(this.dataCache=a.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,o)},h.setupPositionProbePattern=function(l,o){for(var n=-1;n<=7;n++)if(!(l+n<=-1||this.moduleCount<=l+n))for(var p=-1;p<=7;p++)o+p<=-1||this.moduleCount<=o+p||(0<=n&&n<=6&&(p==0||p==6)||0<=p&&p<=6&&(n==0||n==6)||2<=n&&n<=4&&2<=p&&p<=4?this.modules[l+n][o+p]=!0:this.modules[l+n][o+p]=!1)},h.getBestMaskPattern=function(){for(var l=0,o=0,n=0;n<8;n++){this.makeImpl(!0,n);var p=s.getLostPoint(this);(n==0||l>p)&&(l=p,o=n)}return o},h.createMovieClip=function(l,o,n){var p=l.createEmptyMovieClip(o,n),f=1;this.make();for(var m=0;m<this.modules.length;m++)for(var g=m*f,E=0;E<this.modules[m].length;E++){var I=E*f,C=this.modules[m][E];C&&(p.beginFill(0,100),p.moveTo(I,g),p.lineTo(I+f,g),p.lineTo(I+f,g+f),p.lineTo(I,g+f),p.endFill())}return p},h.setupTimingPattern=function(){for(var l=8;l<this.moduleCount-8;l++)this.modules[l][6]==null&&(this.modules[l][6]=l%2==0);for(var o=8;o<this.moduleCount-8;o++)this.modules[6][o]==null&&(this.modules[6][o]=o%2==0)},h.setupPositionAdjustPattern=function(){for(var l=s.getPatternPosition(this.typeNumber),o=0;o<l.length;o++)for(var n=0;n<l.length;n++){var p=l[o],f=l[n];if(this.modules[p][f]==null)for(var m=-2;m<=2;m++)for(var g=-2;g<=2;g++)m==-2||m==2||g==-2||g==2||m==0&&g==0?this.modules[p+m][f+g]=!0:this.modules[p+m][f+g]=!1}},h.setupTypeNumber=function(l){for(var o=s.getBCHTypeNumber(this.typeNumber),n=0;n<18;n++){var p=!l&&(o>>n&1)==1;this.modules[Math.floor(n/3)][n%3+this.moduleCount-8-3]=p}for(var n=0;n<18;n++){var p=!l&&(o>>n&1)==1;this.modules[n%3+this.moduleCount-8-3][Math.floor(n/3)]=p}},h.setupTypeInfo=function(l,o){for(var n=this.errorCorrectLevel<<3|o,p=s.getBCHTypeInfo(n),f=0;f<15;f++){var m=!l&&(p>>f&1)==1;f<6?this.modules[f][8]=m:f<8?this.modules[f+1][8]=m:this.modules[this.moduleCount-15+f][8]=m}for(var f=0;f<15;f++){var m=!l&&(p>>f&1)==1;f<8?this.modules[8][this.moduleCount-f-1]=m:f<9?this.modules[8][15-f-1+1]=m:this.modules[8][15-f-1]=m}this.modules[this.moduleCount-8][8]=!l},h.mapData=function(l,o){for(var n=-1,p=this.moduleCount-1,f=7,m=0,g=this.moduleCount-1;g>0;g-=2)for(g==6&&g--;;){for(var E=0;E<2;E++)if(this.modules[p][g-E]==null){var I=!1;m<l.length&&(I=(l[m]>>>f&1)==1);var C=s.getMask(o,p,g-E);C&&(I=!I),this.modules[p][g-E]=I,f--,f==-1&&(m++,f=7)}if(p+=n,p<0||this.moduleCount<=p){p-=n,n=-n;break}}},a.PAD0=236,a.PAD1=17,a.createData=function(l,o,n){for(var p=i.getRSBlocks(l,o),f=new r,m=0;m<n.length;m++){var g=n[m];f.put(g.mode,4),f.put(g.getLength(),s.getLengthInBits(g.mode,l)),g.write(f)}for(var E=0,m=0;m<p.length;m++)E+=p[m].dataCount;if(f.getLengthInBits()>E*8)throw new Error("code length overflow. ("+f.getLengthInBits()+">"+E*8+")");for(f.getLengthInBits()+4<=E*8&&f.put(0,4);f.getLengthInBits()%8!=0;)f.putBit(!1);for(;!(f.getLengthInBits()>=E*8||(f.put(a.PAD0,8),f.getLengthInBits()>=E*8));)f.put(a.PAD1,8);return a.createBytes(f,p)},a.createBytes=function(l,o){for(var n=0,p=0,f=0,m=new Array(o.length),g=new Array(o.length),E=0;E<o.length;E++){var I=o[E].dataCount,C=o[E].totalCount-I;p=Math.max(p,I),f=Math.max(f,C),m[E]=new Array(I);for(var x=0;x<m[E].length;x++)m[E][x]=255&l.buffer[x+n];n+=I;var j=s.getErrorCorrectPolynomial(C),R=new u(m[E],j.getLength()-1),ee=R.mod(j);g[E]=new Array(j.getLength()-1);for(var x=0;x<g[E].length;x++){var te=x+ee.getLength()-g[E].length;g[E][x]=te>=0?ee.get(te):0}}for(var Q=0,x=0;x<o.length;x++)Q+=o[x].totalCount;for(var L=new Array(Q),d=0,x=0;x<p;x++)for(var E=0;E<o.length;E++)x<m[E].length&&(L[d++]=m[E][x]);for(var x=0;x<f;x++)for(var E=0;E<o.length;E++)x<g[E].length&&(L[d++]=g[E][x]);return L},_t=a,_t}var Xe={},Yt;function Qs(){if(Yt)return Xe;Yt=1,Object.defineProperty(Xe,"__esModule",{value:!0});var t=Object.assign||function(n){for(var p=1;p<arguments.length;p++){var f=arguments[p];for(var m in f)Object.prototype.hasOwnProperty.call(f,m)&&(n[m]=f[m])}return n},i=Ir(),r=a(i),s=or(),u=a(s);function a(n){return n&&n.__esModule?n:{default:n}}function h(n,p){var f={};for(var m in n)p.indexOf(m)>=0||Object.prototype.hasOwnProperty.call(n,m)&&(f[m]=n[m]);return f}var l={bgColor:r.default.oneOfType([r.default.object,r.default.string]).isRequired,bgD:r.default.string.isRequired,fgColor:r.default.oneOfType([r.default.object,r.default.string]).isRequired,fgD:r.default.string.isRequired,size:r.default.number.isRequired,title:r.default.string,viewBoxSize:r.default.number.isRequired,xmlns:r.default.string},o=(0,s.forwardRef)(function(n,p){var f=n.bgColor,m=n.bgD,g=n.fgD,E=n.fgColor,I=n.size,C=n.title,x=n.viewBoxSize,j=n.xmlns,R=j===void 0?"http://www.w3.org/2000/svg":j,ee=h(n,["bgColor","bgD","fgD","fgColor","size","title","viewBoxSize","xmlns"]);return u.default.createElement("svg",t({},ee,{height:I,ref:p,viewBox:"0 0 "+x+" "+x,width:I,xmlns:R}),C?u.default.createElement("title",null,C):null,u.default.createElement("path",{d:m,fill:f}),u.default.createElement("path",{d:g,fill:E}))});return o.displayName="QRCodeSvg",o.propTypes=l,Xe.default=o,Xe}var Xt;function Ys(){if(Xt)return He;Xt=1,Object.defineProperty(He,"__esModule",{value:!0}),He.QRCode=void 0;var t=Object.assign||function(I){for(var C=1;C<arguments.length;C++){var x=arguments[C];for(var j in x)Object.prototype.hasOwnProperty.call(x,j)&&(I[j]=x[j])}return I},i=Ir(),r=f(i),s=Lr(),u=f(s),a=Ws(),h=f(a),l=or(),o=f(l),n=Qs(),p=f(n);function f(I){return I&&I.__esModule?I:{default:I}}function m(I,C){var x={};for(var j in I)C.indexOf(j)>=0||Object.prototype.hasOwnProperty.call(I,j)&&(x[j]=I[j]);return x}var g={bgColor:r.default.oneOfType([r.default.object,r.default.string]),fgColor:r.default.oneOfType([r.default.object,r.default.string]),level:r.default.string,size:r.default.number,value:r.default.string.isRequired},E=(0,l.forwardRef)(function(I,C){var x=I.bgColor,j=x===void 0?"#FFFFFF":x,R=I.fgColor,ee=R===void 0?"#000000":R,te=I.level,Q=te===void 0?"L":te,L=I.size,d=L===void 0?256:L,c=I.value,_=m(I,["bgColor","fgColor","level","size","value"]),v=new h.default(-1,u.default[Q]);v.addData(c),v.make();var S=v.modules;return o.default.createElement(p.default,t({},_,{bgColor:j,bgD:S.map(function(b,z){return b.map(function(oe,le){return oe?"":"M "+le+" "+z+" l 1 0 0 1 -1 0 Z"}).join(" ")}).join(" "),fgColor:ee,fgD:S.map(function(b,z){return b.map(function(oe,le){return oe?"M "+le+" "+z+" l 1 0 0 1 -1 0 Z":""}).join(" ")}).join(" "),ref:C,size:d,viewBoxSize:S.length}))});return He.QRCode=E,E.displayName="QRCode",E.propTypes=g,He.default=E,He}var Xs=Ys();const Zs=er(Xs),Js=({value:t,disabled:i=!1})=>{const{t:r}=y(O.Builder),[s,u]=F.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx(Fe,{title:r("SHARE_ITEM_LINK_QR_CODE"),children:e.jsx(je,{onClick:()=>u(!0),id:kn,disabled:i,children:e.jsx(Wi,{})})}),e.jsxs(be,{open:s,onClose:()=>u(!1),id:Un,children:[e.jsx(je,{"aria-label":"close",onClick:()=>u(!1),sx:{position:"absolute",right:8,top:8},children:e.jsx(Pi,{})}),e.jsx(Be,{sx:{p:5},children:e.jsx(Ge,{width:{xs:"60vw",sm:"50vw",md:"30vw",lg:"24vw"},children:e.jsx(Zs,{style:{height:"auto",maxWidth:"100%",width:"100%"},value:t})})})]})]})},ea=async(t,{onSuccess:i,onError:r})=>{try{await navigator.clipboard.writeText(t),i?.()}catch{r?.()}},ta=({shortLink:t,url:i,isShorten:r,canAdminShortLink:s,onCreate:u,onUpdate:a,onDelete:h})=>{const{t:l}=y(O.Builder),{t:o}=y(O.Messages),{alias:n,platform:p,itemId:f}=t,[m,g]=F.useState(null),E=!!m,I=ee=>{g(ee.currentTarget)},C=()=>{g(null)},x=()=>{C(),a()},j=()=>{i&&ea(i,{onSuccess:()=>{ze.success(o("COPY_LINK_TO_CLIPBOARD"))},onError:()=>{ze.error(o("COPY_LINK_TO_CLIPBOARD_ERROR"))}})},R=()=>{C(),h()};return e.jsxs(q,{direction:"row",children:[e.jsx(Fe,{title:l(T.SHARE_ITEM_LINK_COPY_TOOLTIP),children:e.jsx("span",{children:e.jsx(je,{onClick:j,children:e.jsx(ui,{})})})}),e.jsx(Js,{value:i}),s&&e.jsxs(e.Fragment,{children:[r&&e.jsxs(e.Fragment,{children:[e.jsx(je,{id:Mt(n),onClick:I,children:e.jsx(ci,{})}),e.jsxs(Mi,{id:Mt(n),anchorEl:m,open:E,onClose:C,children:[e.jsxs(Re,{onClick:x,id:Hn(n),children:[e.jsx(Bt,{children:e.jsx(At,{})}),e.jsx(yt,{children:l(T.EDIT_SHORT_LINK_TITLE)})]}),e.jsxs(Re,{onClick:R,id:Fn(n),children:[e.jsx(Bt,{children:e.jsx(wi,{})}),e.jsx(yt,{children:l(T.DELETE_SHORT_LINK_TITLE)})]})]})]}),!r&&e.jsx(Fe,{title:l(T.SHORTEN_LINK_TOOLTIP),children:e.jsx("span",{children:e.jsx(je,{id:Vn(f,p),onClick:()=>u(p),children:e.jsx(At,{})})})})]})]})},Zt=we(q)(({theme:t})=>({borderRadius:t.shape.borderRadius,borderWidth:dr,borderStyle:lr,padding:t.spacing(1),margin:t.spacing(1,"auto"),maxWidth:"100%"})),ra=we(ki)(()=>({color:zn,textDecoration:"none !important",textOverflow:"ellipsis",overflowWrap:"anywhere"})),na=we("p")(({color:t="auto"})=>({color:t,textTransform:"capitalize"})),ia=({itemId:t,alias:i})=>{const{t:r}=y(O.Messages),s=Ve(),{mutate:u}=Me({...qn({path:{alias:i}}),onSuccess:()=>{s.invalidateQueries({queryKey:ar({path:{itemId:t}})})},onError:a=>{console.error(a),ze.error?.(r("SHORT_LINK_UNEXPECTED_ERROR"))}});return u},sa=({url:t,shortLink:i,isShorten:r,canAdminShortLink:s,onUpdate:u,onCreate:a})=>{const[h,l]=F.useState(!1),{alias:o,platform:n}=i,p=ia({itemId:i.itemId,alias:o}),f=()=>{s?p({path:{alias:o}}):console.error("Only administrators can delete short link.")},m={xs:"column",sm:"row"},g={xs:"center",sm:"start"};return e.jsxs(e.Fragment,{children:[s&&e.jsx(Fs,{open:h,setOpen:l,handleDelete:f,shortLink:o}),e.jsxs(Zt,{justifyContent:"space-between",alignItems:"center",direction:m,className:Gn,children:[e.jsxs(q,{direction:m,alignItems:"center",justifyContent:"space-between",spacing:2,children:[e.jsxs(Zt,{minWidth:"120px",direction:"row",spacing:1,color:"white",children:[e.jsx(Gs,{platform:n,accentColor:Lt[n]}),e.jsx(na,{id:$n(n),color:Lt[n],children:n})]}),e.jsx(ra,{id:Kn(n),textAlign:g,href:t,target:"_blank",children:t})]}),e.jsx(ta,{shortLink:i,url:t,isShorten:r,canAdminShortLink:s,onCreate:a,onUpdate:u,onDelete:()=>l(!0)})]})]})},Jt=we(q)(({theme:t})=>({borderRadius:t.shape.borderRadius,borderWidth:dr,borderStyle:lr,padding:t.spacing(1),margin:t.spacing(1,"auto"),maxWidth:"100%"})),aa=()=>{const t={xs:"column",sm:"row"};return e.jsxs(Jt,{justifyContent:"space-between",alignItems:"center",direction:t,width:{xs:"100%",sm:"80%"},children:[e.jsxs(q,{direction:t,alignItems:"center",justifyContent:"space-between",spacing:2,flex:1,children:[e.jsxs(Jt,{direction:"row",spacing:1,color:"white",children:[e.jsx(Se,{variant:"circular",width:50,height:25}),e.jsx(Se,{variant:"text",width:"100%"})]}),e.jsx(Se,{variant:"text",width:"100%"})]}),e.jsxs(q,{direction:"row",spacing:2,mr:1,ml:1,children:[e.jsx(Se,{variant:"rounded",width:23}),e.jsx(Se,{variant:"rounded",width:23}),e.jsx(Se,{variant:"rounded",width:23})]})]})},{useItemPublishedInformation:oa}=me,la=({itemId:t,canAdminShortLink:i})=>{const{mode:r}=Oi(),{data:s,isLoading:u}=ir(Wn({path:{itemId:t}})),{data:a}=oa({itemId:t}),[h,l]=F.useState(!1),[o,n]=F.useState(!1),[p,f]=F.useState(""),[m,g]=F.useState(xe.Player),I=[xe.Builder,xe.Player,xe.Library].map(R=>{if(!a&&R===xe.Library)return;const te=Qn.getInstance().getItemAsURL(R,t);R===xe.Builder&&te.searchParams.set("mode",r);const Q={alias:Tt(),platform:R,url:te,isShorten:!1},L=s?.[R];return L&&(Q.alias=L.alias,Q.isShorten=!0,Q.url=Ui({baseURL:Yn,pathname:L.alias})),Q}).filter(R=>!!R),C=R=>{f(Tt()),g(R),n(!0),l(!0)},x=()=>l(!1),j=R=>{f(R.alias),g(R.platform),n(!1),l(!0)};return e.jsxs(e.Fragment,{children:[i&&e.jsx(be,{open:h,onClose:x,children:e.jsx(Hs,{itemId:t,handleClose:x,initialAlias:p,platform:m,isNew:o})}),!u&&e.jsx(q,{alignItems:"center",justifyContent:"center",children:e.jsx(Ge,{width:{xs:"100%",sm:"80%"},children:I.map(R=>e.jsx(sa,{url:`${R.url}`,shortLink:{alias:R.alias,platform:R.platform,itemId:t},isShorten:R.isShorten,canAdminShortLink:i,onUpdate:()=>j(R),onCreate:C},R.platform))})}),u&&I.map(R=>e.jsx(aa,{},R.alias))]})};function Yo(){const{user:t}=nr(),{itemId:i}=Xn.useParams(),{item:r,canAdmin:s}=rt(),{t:u}=y(O.Builder),{data:a}=me.useItemMemberships(i);return e.jsxs(q,{gap:2,mb:5,children:[e.jsxs(Ge,{children:[e.jsx(G,{variant:"h5",children:u("SHARING_TITLE")}),e.jsx(la,{itemId:i,canAdminShortLink:!!(a&&s)})]}),e.jsx(Ot,{}),t?.type===Ce.Individual&&s?e.jsxs(e.Fragment,{children:[e.jsxs(q,{gap:2,children:[e.jsx(G,{variant:"h6",children:u("ITEM_SETTINGS_VISIBILITY_TITLE")}),e.jsx(Ji,{itemId:i}),r?.hidden?e.jsx(Le,{id:Zn,sx:{my:1},severity:"info",children:u("ITEM_SETTINGS_VISIBILITY_HIDDEN_INFORMATION")}):e.jsx(is,{item:r,edit:s}),e.jsx(si,{item:r})]}),e.jsx(Ot,{})]}):null,e.jsx(js,{})]})}export{Yo as component};
