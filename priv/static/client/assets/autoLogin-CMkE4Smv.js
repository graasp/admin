import{d as L,b as d,N as g,Z as E,gV as c,h as R,a6 as f,j as t,gW as j,b0 as _,S as h,T as m,gX as G,gY as x}from"./index-B_BHgQQY.js";import{B as U}from"./ButtonLink-D-yZd9SS.js";import{A as I}from"./Alert-af15MLjr.js";import{B as O}from"./Button-4ORflwU5.js";import{I as y}from"./itemLogin-BRGmCLqv.js";import"./useSlot-D6B6Ly0P.js";import"./ButtonBase-ylRkSt5R.js";import"./isFocusVisible-B8k4qzLc.js";import"./createSvgIcon-CR_wPvPv.js";import"./IconButton-t5WdCoTE.js";import"./CircularProgress-_2M16NEZ.js";import"./Paper-e3G0y0Go.js";const u=({id:r,children:n})=>t.jsx(h,{id:r,height:"100vh",alignItems:"center",justifyContent:"center",gap:2,children:n});function w(){const{user:r,logout:n}=L(),{t:e}=d(g.Player),{mutateAsync:T}=E.usePostItemLogin(),{itemId:s,rootId:N}=c.useParams(),{data:p}=R.useItemLoginSchemaType({itemId:s}),a=c.useSearch(),l=f(),o=a.username;if(!o)return t.jsxs(u,{id:j,children:[t.jsx(I,{severity:"error",children:e("AUTO_LOGIN_MISSING_REQUIRED_PARAMETER_USERNAME")}),t.jsx(U,{to:"/",children:e("AUTO_LOGIN_GO_TO_HOME")})]});if(!s)return t.jsx(_,{to:"/"});const i={to:"/player/$rootId/$itemId",params:{rootId:N,itemId:s},search:{fullscreen:a.fullscreen,shuffle:a.shuffle}};if(r)return r.name!==o?t.jsxs(h,{height:"100vh",alignItems:"center",justifyContent:"center",gap:2,children:[t.jsx(m,{variant:"h2",children:e("AUTO_LOGIN_ALREADY_LOGGED_IN")}),t.jsx(O,{variant:"contained",onClick:()=>n(),children:e("AUTO_LOGIN_SIGN_OUT_AND_BACK_IN")})]}):t.jsx(_,{...i});if(p!==y.Username)return t.jsx(I,{id:G,severity:"error",children:e("AUTO_LOGIN_NO_ITEM_LOGIN_ERROR")});const A=async()=>{await T({itemId:s,username:o}),l(i)};return t.jsxs(u,{id:x,children:[t.jsx(m,{variant:"h2",children:e("AUTO_LOGIN_WELCOME_TITLE")}),t.jsx(O,{variant:"contained",onClick:A,children:e("AUTO_LOGIN_START_BUTTON")})]})}export{w as component};
