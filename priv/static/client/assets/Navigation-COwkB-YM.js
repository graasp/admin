import{j as r,s as y,S as x,gP as j,r as C,T as M,dP as T,h as b,gQ as k,gR as E}from"./index-B_BHgQQY.js";import{t as I}from"./index-BzmWlSRn.js";import{M as L}from"./MenuItemLink-BMQoDPhe.js";import{T as N}from"./TypographyLink-BhX6wc0l.js";import{B as A}from"./Breadcrumbs-CifeKTUg.js";import{I as B}from"./IconButton-t5WdCoTE.js";import{M as O}from"./Menu-C45l_y2r.js";import{C as _}from"./chevron-right-CtTm1uPZ.js";const w=y(A)(()=>({".MuiBreadcrumbs-separator":{margin:0}}));function P({backgroundColor:t,buildBreadcrumbsItemLinkId:e,buildIconId:a,buildMenuItemId:s,itemPath:o,id:n,item:i,parents:c,sx:m,useChildren:l,buildMenuId:d,maxItems:u=4,children:h}){return c?.length?r.jsxs(w,{sx:m,id:n,maxItems:u,separator:"","aria-label":"breadcrumb",style:{backgroundColor:t},children:[i?.id&&c&&r.jsx(R,{useChildren:l,parents:c,itemPath:o,buildBreadcrumbsItemLinkId:e}),i?.id&&i&&r.jsx(S,{item:i,useChildren:l,itemPath:o,buildBreadcrumbsItemLinkId:e,buildIconId:a,buildMenuId:d,buildMenuItemId:s,showArrow:!!h}),h]}):null}function R({parents:t,useChildren:e,buildBreadcrumbsItemLinkId:a,itemPath:s}){return r.jsx(x,{direction:"row",children:t.map(({name:o,id:n})=>r.jsxs(x,{direction:"row",alignItems:"center",justifyContent:"center",children:[r.jsx(N,{sx:{textDecoration:"none",color:"inherit"},id:a?.(n),to:s,params:{itemId:n},children:I(o,{length:j})}),r.jsx(v,{useChildren:e,itemId:n,itemPath:s})]},n))})}const S=({item:t,buildBreadcrumbsItemLinkId:e,itemPath:a,useChildren:s,buildIconId:o,buildMenuId:n,buildMenuItemId:i,showArrow:c})=>r.jsxs(x,{direction:"row",alignItems:"center",justifyContent:"center",children:[r.jsx(N,{sx:{textDecoration:"none",color:"inherit"},id:e?.(t.id),to:a,params:{itemId:t.id},children:I(t.name,{length:j})},t.id),(t.type==="folder"||c)&&r.jsx(v,{useChildren:s,itemId:t.id,itemPath:a,buildIconId:o,buildMenuItemId:i,buildMenuId:n,renderArrow:c})]});function v({buildIconId:t,buildMenuId:e,buildMenuItemId:a,itemPath:s,icon:o=r.jsx(_,{"data-testid":"NavigateNextIcon"}),itemId:n,useChildren:i,renderArrow:c}){const[m,l]=C.useState(null),d=!!m,{data:u}=i(n),h=g=>{l(g.currentTarget)},f=()=>{l(null)};return!u?.length&&c?o:u?.length?r.jsxs(r.Fragment,{children:[r.jsx(B,{onClick:h,id:t?.(n),"aria-controls":d?e?.(n):void 0,"aria-haspopup":"true","aria-expanded":d?!0:void 0,children:o}),r.jsx(O,{anchorEl:m,id:e?.(n),open:d,onClose:f,onClick:f,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"left"},children:u?.map(({name:g,id:p})=>r.jsx(L,{id:a?.(p),to:s,params:{itemId:p},children:r.jsx(M,{children:g})},p))})]}):null}const{useItem:D,useParents:z,useChildren:G}=b,K=()=>{const{itemId:t}=T({strict:!1}),{data:e,isLoading:a}=D(t),{data:s,isLoading:o}=z({id:t});return a||o?null:r.jsx(P,{id:E,item:e,itemPath:"/builder/items/$itemId",parents:s,buildMenuItemId:k,useChildren:G})};export{K as N};
