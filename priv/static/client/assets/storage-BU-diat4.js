import{b as _,N as g,h as S,j as e,S as R,s as b,bs as x,bt as j,bu as I,bv as M,bw as O,bx as E,L as f,by as y,bz as B,bA as F,bB as G,T as L,bC as T}from"./index-B_BHgQQY.js";import{S as D}from"./ScreenLayout-DHNFjLyq.js";import{f as p}from"./fileSize-Ct-TZ2my.js";import{S as A}from"./Skeleton-Bf_dEhrE.js";import{A as l}from"./Alert-af15MLjr.js";import{T as N,a as h,b as t,c as w}from"./TableRow-iBTETprB.js";import{T as P}from"./TableHead-CbzCS9fp.js";import{f as v}from"./date-BPVbmzn6.js";import{B as k}from"./Button-4ORflwU5.js";import{T as C}from"./Trans-1gex2Erj.js";import"./Divider-DwBPlmwR.js";import"./dividerClasses-Bk0V9OT7.js";import"./useSlot-D6B6Ly0P.js";import"./ButtonBase-ylRkSt5R.js";import"./isFocusVisible-B8k4qzLc.js";import"./createSvgIcon-CR_wPvPv.js";import"./IconButton-t5WdCoTE.js";import"./CircularProgress-_2M16NEZ.js";import"./Paper-e3G0y0Go.js";import"./differenceInMinutes-BbWlujZi.js";import"./normalizeDates-Bl5IZJGD.js";import"./toDate-BXq0HhWu.js";import"./differenceInCalendarDays-DiZ3ZI30.js";import"./getTimezoneOffsetInMilliseconds-CkMJBntH.js";import"./differenceInSeconds-DNsH8fUT.js";import"./differenceInCalendarMonths-C8dGLoK4.js";const z=window.innerWidth/3,$=25,q=b("progress")(({theme:r})=>({WebkitAppearance:"none",MozAppearance:"none",appearance:"none",border:"none",overflow:"hidden",borderRadius:r.spacing(1),height:r.spacing(4),"&::-webkit-progress-bar":{backgroundColor:"#eee",borderRadius:r.spacing(1),boxShadow:"0 2px 5px rgba(0, 0, 0, 0.25) inset"},"&::-webkit-progress-value":{backgroundColor:r.palette.primary.main},"&::-moz-progress-bar":{backgroundColor:r.palette.primary.main},flexGrow:1}));function H(){const{t:r}=_(g.Common),{data:n,isLoading:s}=S.useMemberStorage();if(n){const{current:o,maximum:d}=n,c=o/d*100;return e.jsxs(R,{direction:"row",alignItems:"center",width:"100%",spacing:1,children:[e.jsx(q,{id:x,value:c,max:100,children:c}),e.jsxs("label",{htmlFor:x,id:j,children:[p(o)," / ",p(d)]})]})}return s?e.jsx(A,{width:z,height:$}):e.jsx(l,{severity:"error",children:r("ERRORS.UNEXPECTED")})}const m=10,U=()=>{const{t:r,i18n:n}=_(g.Account),{data:s,isPending:o,hasNextPage:d,fetchNextPage:c,isFetching:u}=I({queryKey:O({query:{pageSize:m,page:1}}).queryKey,queryFn:async({pageParam:i})=>(await M({query:{page:i??1,pageSize:m}})).data,getNextPageParam:(i,a)=>i&&i.data.length<m?void 0:a.length+1,refetchOnWindowFocus:()=>!1,initialPageParam:1});if(s){if(s.pages.length===0)return e.jsx(l,{severity:"info",children:r("MEMBER_STORAGE_FILES_EMPTY")});const i=s.pages.flatMap(a=>a?.data??[]);return e.jsxs(e.Fragment,{children:[e.jsxs(N,{children:[e.jsx(P,{children:e.jsxs(h,{children:[e.jsx(t,{children:r("MEMBER_STORAGE_FILE_NAME")}),e.jsx(t,{children:r("MEMBER_STORAGE_FILE_SIZE")}),e.jsx(t,{children:r("MEMBER_STORAGE_FILE_UPDATED_AT")}),e.jsx(t,{children:r("MEMBER_STORAGE_PARENT_FOLDER")})]})}),e.jsx(w,{children:i.map(a=>e.jsxs(h,{children:[e.jsx(t,{id:E(`${y}`,a.id),children:e.jsx(f,{to:"/builder/items/$itemId",params:{itemId:a.id},children:a.name})}),e.jsx(t,{id:E(`${B}`,a.id),children:p(a.size)}),e.jsx(t,{id:E(`${F}`,a.id),children:v(a.updatedAt,{locale:n.language})}),e.jsx(t,{id:E(`${G}`,a.id),children:a.parent?.name??r("MEMBER_STORAGE_NO_PARENT")})]},a.id))})]}),d&&e.jsx(R,{textAlign:"center",alignItems:"center",children:e.jsx(k,{loading:u,variant:"outlined",onClick:()=>c(),role:"feed",children:r("STORAGE_LOAD_MORE_FILES")})})]})}return o?e.jsx(A,{}):e.jsx(l,{severity:"error",children:r("MEMBER_STORAGE_FILES_ERROR")})};function Te(){const{t:r}=_(g.Account);return e.jsxs(D,{title:r("STORAGE_TITLE"),children:[e.jsxs(R,{gap:2,children:[e.jsx(L,{variant:"body1",children:e.jsx(C,{t:r,i18nKey:"STORAGE_TEXT",values:{email:T},components:[e.jsx("a",{href:`mailto:${T}`,children:"_"},"email")]})}),e.jsx(l,{severity:"info",children:r("STORAGE_INFO")})]}),e.jsx(H,{}),e.jsx(U,{})]})}export{Te as component};
