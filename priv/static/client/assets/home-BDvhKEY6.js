import{b as u,N as h,j as t,aV as G,r as I,bp as U,fM as Q,S as s,T as x,k as V,f as Y,m as q,fc as $,fb as X,fN as Z,c3 as J,f9 as tt,fO as et,fP as ot,fQ as rt,i as b,fR as it,c_ as st,d as nt,h as at,cO as mt,az as lt,fS as ct}from"./index-B_BHgQQY.js";import{M as pt}from"./MaintenanceAnnouncement-Dn92-Cl3.js";import{O as dt}from"./OldDeletedItemsNotice-DR5qPbe8.js";import{u as ut}from"./useLocalStorage-CP_azpUr.js";import{A as E}from"./Alert-af15MLjr.js";import{T as ht}from"./Trans-1gex2Erj.js";import{C as xt}from"./CardActionArea-BWT8PuAd.js";import{I as ft}from"./ItemIcon-aRVTEBTL.js";import{g as jt}from"./mimeTypes-Bpmm_hmI.js";import{g as gt,B as It,C as Ct,M as St,e as kt,f as Mt,R as yt,b as Et,d as w,S as Ot,c as Bt,I as wt,u as vt}from"./useSorting-rrsm5hZb.js";import{C as _}from"./Card-Rs4ggG5A.js";import{B as C}from"./Box-CXXiFbSb.js";import{f as T}from"./date-BPVbmzn6.js";import{B as At}from"./Badge-DAnJA1M3.js";import{C as bt}from"./CardContent-ZLzXOttd.js";import{I as _t}from"./IconButton-t5WdCoTE.js";import{X as Tt}from"./x-B2OknFaz.js";import{B as j}from"./Button-4ORflwU5.js";import{C as Rt}from"./check-D07k9qIq.js";import{P as Dt}from"./pen-DzBOH2fN.js";import{G as M}from"./Grid-DwBZvdO2.js";import{S as Nt}from"./Skeleton-Bf_dEhrE.js";import{u as g}from"./index-CVpgN-ou.js";import{v as Lt}from"./v4-CEEIItsa.js";import{u as R,F as Pt}from"./FilterItemsContext-D5pcm88K.js";import{N as y,a as Ft}from"./NoItemFilters-DFSEHwYM.js";import{u as O,S as Kt,b as zt,D as Wt,a as Ht}from"./SelectionToolbar-DgkJCewa.js";import{F as Gt}from"./FolderCreateForm-D_2wcpXy.js";import{L as Ut}from"./LoadingScreen-B7yW9AZn.js";import{B as Qt}from"./langs-BKRoRoQy.js";import{C as Vt}from"./ThumbnailCrop-iMyJZY_9.js";import{u as v}from"./useModalStatus-CF1QQN94.js";import{D as Yt}from"./Divider-DwBPlmwR.js";import"./langs-C5VEx8tQ.js";import"./normalizeDates-Bl5IZJGD.js";import"./toDate-BXq0HhWu.js";import"./Collapse-CF3-lsEC.js";import"./utils-NE7yIt1Q.js";import"./ButtonBase-ylRkSt5R.js";import"./isFocusVisible-B8k4qzLc.js";import"./AlertTitle-CZRu3C6o.js";import"./format-C1rEO6Ru.js";import"./differenceInCalendarDays-DiZ3ZI30.js";import"./getTimezoneOffsetInMilliseconds-CkMJBntH.js";import"./useSlot-D6B6Ly0P.js";import"./createSvgIcon-CR_wPvPv.js";import"./Paper-e3G0y0Go.js";import"./StyledBaseComponents-0ZpECQxB.js";import"./link-nLlUeqkm.js";import"./text-align-start-BvNJbDOj.js";import"./fileItem-Bbp5pYua.js";import"./itemType-D9KQEJss.js";import"./FormControl-DkBPBeJg.js";import"./isMuiElement-BdxtYttK.js";import"./TextField-CCzZwtaB.js";import"./Modal-DNRlalor.js";import"./createChainedFunction-BO_9K8Jh.js";import"./Popover-CgVTRYfe.js";import"./Grow-BvZTf0bq.js";import"./Menu-C45l_y2r.js";import"./List-Cf8ruq7c.js";import"./listItemTextClasses-DkicRqsl.js";import"./useControlled-BMwunPLn.js";import"./MenuItem-i4R53H8t.js";import"./dividerClasses-Bk0V9OT7.js";import"./Checkbox-CAPv11-J.js";import"./SwitchBase-BpBcR0Ys.js";import"./ListItemText-Db53d-gu.js";import"./InputAdornment-CGS_1X61.js";import"./LinkTypeFormControl-Cx3z8ol1.js";import"./index.esm-D6N0kWEX.js";import"./Clear-BLTcymBh.js";import"./LinkUrlField-BcIiYqG0.js";import"./Thumbnail-CeEWDJof.js";import"./external-link-QQvANG3_.js";import"./withResizing-Bmu3xIGc.js";import"./AccordionSummary-CDFC1KDY.js";import"./chevron-down-D3HPGb0W.js";import"./TextDisplay-DKy1jHXb.js";import"./alignment-FBy0_b-y.js";import"./index-Chjiymov.js";import"./constants-CyQbYbhY.js";import"./linkItem-VVVu8jA7.js";import"./Link-DLKBSA2n.js";import"./item-dXKRHMD1.js";import"./TextEditor-NUJSy7Vm.js";import"./isEqual-D6G76aij.js";import"./Tabs-D8U24ZxU.js";import"./useThemeProps-BNH6uLhE.js";import"./RadioGroup-B8axso0y.js";import"./FormControlLabel-CAZP-rGy.js";import"./Switch-BMLgWMtw.js";import"./ItemSettingProperty-DyTew-Ej.js";import"./Button-C2DML4l_.js";import"./uploadWithProgress-X8OCjAji.js";import"./LibraryIcon-Us5FpFqN.js";import"./Avatar-BO-XeDPi.js";import"./eye-off-WWB42nol.js";import"./pin-CWXz_P8J.js";import"./Tooltip-CY4gBTjx.js";import"./useLocation-C8vtnVMT.js";import"./CustomLink-CCI7pO31.js";import"./capsule-ocBuEWIN.js";import"./LayoutContext-DvWbprYl.js";import"./PinButton-B2O-3CYr.js";import"./ListItemIcon-BTN91sVG.js";import"./ItemCard-NGB9iUow.js";import"./EditButton-ZZbYvNZm.js";import"./index-BzmWlSRn.js";import"./Breadcrumbs-CifeKTUg.js";import"./CancelButton-DsqMvRyV.js";import"./CircularProgress-_2M16NEZ.js";import"./DialogContent-BLGJ1kXP.js";import"./DialogTitle-BL-ZXwRQ.js";import"./DialogActions-B4c7iV3e.js";import"./FlagItemModalContext-B9D_0oH9.js";import"./ListItemButton-TRjTb-Ya.js";import"./listItemButtonClasses-BxUs8zQL.js";import"./eye-c2LSV0oY.js";import"./trash-CYNfI7WN.js";import"./MenuItemLink-BMQoDPhe.js";import"./settings-CTRMiCcG.js";import"./download-C1DwLYTP.js";import"./permissionLevel-BOsSKewz.js";import"./differenceInMinutes-BbWlujZi.js";import"./differenceInSeconds-DNsH8fUT.js";import"./differenceInCalendarMonths-C8dGLoK4.js";import"./usePreviousProps-WLnL_Kyw.js";import"./stringify-D92ucQ0I.js";import"./circle-question-mark-BrH_Q4hU.js";import"./CropModal-D3OxYzrA.js";import"./DialogContentText-X3gecpnz.js";import"./trash-2-D4QstvMZ.js";function qt(){const{t:e}=u(h.Home),{value:r,changeValue:o}=ut("user-survey-2025-closed",!1);return r?null:t.jsx(E,{severity:"info",onClose:()=>{o(!0)},children:t.jsx(ht,{t:e,i18nKey:"SURVEY.INFO",components:{l1:t.jsx("a",{href:"https://docs.google.com/forms/d/e/1FAIpQLScSSD8oPlpvLvX1YPDfvfDGQzV7zqqPoSEhkItIZ8pIAPCpTw/viewform?usp=preview",children:"here"})}})})}const $t=I.forwardRef((e,r)=>{const{onClick:o,...i}=e;return t.jsx(xt,{component:"a",ref:r,onClick:o,...i})}),Xt=G($t),Zt=e=>t.jsx(Xt,{preload:"intent",...e}),D=({item:e,size:r=U.Medium})=>{const o=e.thumbnails?.[r];return t.jsx(ft,{type:e.type,mimetype:jt(e.extra),alt:e.name,iconSrc:o})};function Jt({item:e}){const{i18n:r}=u(h.Player),o=e.type==="shortcut"?gt(e.extra)?.target:e.id;return t.jsx(_,{sx:{height:"100%"},id:Q(e.id),children:t.jsx(s,{direction:"row",alignItems:"stretch",justifyContent:"space-between",width:"100%",height:"100%",children:t.jsx(Zt,{id:`bookmarkCardAction-${e.id}`,to:"/builder/items/$itemId",params:{itemId:o},onClick:()=>{window.umami.track("bookmark-card")},sx:{minWidth:0,width:"100%",flex:1,display:"flex",alignItems:"center",padding:2},children:t.jsxs(s,{direction:"row",spacing:2,width:"100%",minWidth:0,children:[t.jsx(C,{display:"flex",justifyContent:"center",alignItems:"center",flexShrink:0,children:t.jsx(D,{item:e})}),t.jsxs(s,{minWidth:0,children:[t.jsx(x,{variant:"h5",component:"h2",alignItems:"center",textOverflow:"ellipsis",overflow:"hidden",noWrap:!0,children:e.name}),t.jsx(x,{variant:"body2",color:"text.secondary",children:T(e.updatedAt,{locale:r.language})})]})]})})})})}function te({item:e}){const r=V(),{i18n:o}=u(),{color:i}=Y("error"),{t:a}=u(h.Common,{keyPrefix:"ARIA"}),{mutate:l}=q({...$(),onSettled:()=>{r.invalidateQueries({queryKey:X()})}});return t.jsx(At,{className:Z(e.id),sx:{width:"100%"},badgeContent:t.jsx(_t,{"aria-label":a("REMOVE_BOOKMARK"),onClick:()=>{l({path:{itemId:e.id}})},children:t.jsx(Tt,{color:i})}),children:t.jsx(_,{sx:{height:"100%",width:"100%"},id:`bookmark-${e.id}`,children:t.jsx(bt,{id:`bookmarkCardAction-${e.id}`,children:t.jsxs(s,{direction:"row",alignItems:"stretch",width:"100%",height:"100%",gap:1,children:[t.jsx(C,{display:"flex",justifyContent:"center",alignItems:"center",flexShrink:0,children:t.jsx(D,{item:e})}),t.jsxs(s,{minWidth:0,children:[t.jsx(x,{variant:"h5",component:"h2",alignItems:"center",textOverflow:"ellipsis",overflow:"hidden",noWrap:!0,children:e.name}),t.jsx(x,{variant:"body2",color:"text.secondary",children:T(e.updatedAt,{locale:o.language})})]})]})})})})}const A=({children:e})=>t.jsx(M,{size:{xs:12,sm:4,md:3,xl:2},children:e}),ee=Array(6).map(()=>({id:Lt()})),oe=()=>{const e=b(),r=g(e.breakpoints.up("xl")),o=g(e.breakpoints.up("md")),i=g(e.breakpoints.up("sm"));return r?24:o?12:i?6:4};function re(){const{t:e}=u(h.Home,{keyPrefix:"BOOKMARKED_ITEMS"}),{data:r,isPending:o,isError:i}=J(tt()),[a,l]=I.useState(!1),[m,c]=I.useState(!1),p=oe();if(r?.length){const d=a?r:r.slice(0,p);return t.jsxs(t.Fragment,{children:[t.jsxs(s,{direction:"row",justifyContent:"space-between",children:[t.jsxs(s,{direction:"row",gap:1,alignItems:"center",children:[t.jsx(It,{}),t.jsx(x,{variant:"h3",children:e("TITLE")})]}),m?t.jsx(j,{size:"small",startIcon:t.jsx(Rt,{size:16}),onClick:()=>c(!1),children:e("DONE_BUTTON")}):t.jsx(j,{size:"small",startIcon:t.jsx(Dt,{size:16}),onClick:()=>c(!0),id:et,children:e("MANAGE_BUTTON")})]}),t.jsx(M,{id:ot,width:"100%",container:!0,spacing:2,justifyItems:"center",children:d.map(({item:n})=>t.jsx(A,{children:m?t.jsx(te,{item:n},n.id):t.jsx(Jt,{item:n},n.id)},n.id))}),p<r.length?t.jsx(j,{onClick:()=>l(n=>!n),children:e(a?"SHOW_LESS":"SHOW_MORE")}):null]})}return o?t.jsx(M,{width:"100%",container:!0,spacing:2,justifyItems:"center",children:ee.map(({id:d})=>t.jsx(A,{children:t.jsx(Nt,{variant:"rounded",animation:"wave",width:"100%",height:"75px"})},d))}):i?t.jsx(E,{id:rt,severity:"error",children:e("ERROR_MESSAGE")}):null}const ie=({onClick:e,enabled:r=!1})=>{const{t:o}=u(h.Builder);return t.jsx(Vt,{color:"primary",onClick:()=>{e?.(!r)},variant:r?"filled":"outlined",sx:{fontSize:"1rem",maxWidth:"max-content"},id:it,label:o(Qt.HOME_SHOW_ONLY_CREATED_BY_ME),component:"button","data-umami-event":"filter-created-by-me"})},se=({items:e})=>{const{selectedIds:r,clearSelection:o}=O(),i=e?.filter(({id:n})=>r.includes(n)),{isOpen:a,openModal:l,closeModal:m}=v(),{isOpen:c,openModal:p,closeModal:d}=v();return t.jsxs(t.Fragment,{children:[t.jsx(Ct,{onClose:()=>{m(),o()},open:a,items:i}),t.jsx(St,{onClose:()=>{d(),o()},open:c,items:i}),t.jsx(Kt,{children:t.jsxs(t.Fragment,{children:[t.jsx(kt,{onClick:p}),t.jsx(Mt,{onClick:l}),t.jsx(yt,{onClick:o,color:"primary",itemIds:r})]})})]})},N="home-items-container";function ne({searchText:e}){const{t:r}=u(h.Builder),{t:o}=u(h.Enums),[i,a]=I.useState(!1),{selectedIds:l}=O(),{sortBy:m,setSortBy:c,ordering:p,setOrdering:d}=Et({sortBy:w.ItemUpdatedAt,ordering:st.DESC}),{user:n}=nt(),{itemTypes:L}=R(),{data:f,fetchNextPage:P,isLoading:F,isFetching:B,hasNextPage:K}=at.useInfiniteAccessibleItems({creatorId:i?n?.id:void 0,sortBy:m,ordering:p,types:L,keywords:e},{pageSize:mt}),z=zt({containerId:N}),W=S=>{a(S)};if(f?.pages?.length){const S=Object.values(w).sort((k,H)=>o(k).localeCompare(o(H)));return t.jsxs(t.Fragment,{children:[z,t.jsxs(s,{alignItems:"space-between",direction:"column",mt:2,gap:1,width:"100%",children:[t.jsx(s,{spacing:1,children:t.jsx(ie,{onClick:W,enabled:i})}),l.length?t.jsx(se,{items:f.pages.flatMap(({data:k})=>k)}):t.jsxs(s,{spacing:1,direction:"row",justifyContent:"space-between",alignItems:"center",children:[t.jsx(Ot,{}),t.jsx(s,{direction:"row",gap:1,children:m&&c&&t.jsx(Bt,{sortBy:m,setSortBy:c,ordering:p,setOrdering:d,options:S})})]})]}),t.jsxs(s,{height:"100%",children:[t.jsx(ae,{data:f,isFetching:B,fetchNextPage:P,searchText:e,hasNextPage:K}),f&&B&&t.jsx(C,{sx:{width:"100%"},children:t.jsx(lt,{})})]})]})}return F?t.jsx(Ut,{chipsPlaceholder:!0}):t.jsx(E,{severity:"error",children:r("ERROR_MESSAGE")})}function ae({data:e,fetchNextPage:r,searchText:o,hasNextPage:i,isFetching:a}){const{t:l}=u(h.Builder),{itemTypes:m}=R(),{selectedIds:c,toggleSelection:p,clearSelection:d}=O();return e.pages[0].data.length?t.jsxs(Wt,{id:N,children:[t.jsx(wt,{canMove:!o,id:ct,items:e.pages.flatMap(({data:n})=>n),enableMoveInBetween:!1,onCardClick:p,selectedIds:c,onMove:d}),i&&t.jsx(s,{textAlign:"center",alignItems:"center",children:t.jsx(j,{variant:"outlined",onClick:r,role:"feed",loading:a,children:l("HOME_SCREEN_LOAD_MORE_BUTTON")})}),!i&&t.jsx(s,{alignItems:"center",mb:2,children:t.jsx(y,{type:"icon"})})]}):m.length||o?t.jsx(Ft,{searchText:o}):t.jsx(C,{mt:2,children:t.jsx(Gt,{buttons:t.jsx(y,{size:"small"})})})}function Rr(){const e=b(),r=g(e.breakpoints.up("md")),o=vt();return t.jsxs(t.Fragment,{children:[t.jsx(pt,{suffix:"home"}),t.jsx(qt,{}),t.jsx(dt,{}),t.jsx(re,{}),t.jsx(Yt,{flexItem:!0}),t.jsxs(Ht,{children:[t.jsxs(s,{direction:"row",alignItems:"center",justifyContent:"flex-end",spacing:1,children:[o.input,t.jsx(y,{type:r?"button":"icon"})]}),t.jsx(Pt,{children:t.jsx(ne,{searchText:o.text})})]})]})}export{Rr as component};
